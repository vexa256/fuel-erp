import{_ as Qt,r as _,a as at,c as mt,s as Zt,o as te,b as r,d as e,e as v,g as D,w as x,m as G,F as E,h as X,u as ee,f as L,t as n,n as C,v as I,x as $t,S as m,i as l}from"./index-BJk99QVQ.js";const se={class:"card card-flush shadow-sm mb-5"},ae={class:"card-header pt-6"},oe={class:"card-toolbar"},ne={class:"d-flex align-items-center gap-3"},ie=["value"],re=["disabled"],le={key:0,class:"alert alert-warning d-flex align-items-center p-5 mb-5"},de={class:"d-flex flex-column"},ce={class:"fs-6"},ue={key:1,class:"row g-5 g-xl-8 mb-5"},me={class:"col-6 col-md-3"},pe={class:"card card-flush h-xl-100"},ve={class:"card-body"},fe={class:"d-flex align-items-center"},ge={class:"flex-grow-1"},be={class:"text-gray-800 fw-bold fs-2"},ye={class:"col-6 col-md-3"},he={class:"card card-flush h-xl-100"},Ce={class:"card-body"},we={class:"d-flex align-items-center"},xe={class:"flex-grow-1"},Ae={class:"text-gray-800 fw-bold fs-2"},_e={class:"col-6 col-md-3"},ke={class:"card card-flush h-xl-100"},De={class:"card-body"},Be={class:"d-flex align-items-center"},Se={class:"flex-grow-1"},Ie={class:"text-gray-800 fw-bold fs-2"},$e={class:"col-6 col-md-3"},Pe={class:"card card-flush h-xl-100"},Ne={class:"card-body"},Te={class:"d-flex align-items-center"},Fe={class:"flex-grow-1"},Ue={class:"text-gray-800 fw-bold fs-2"},Me={class:"card card-flush"},Le={class:"card-header pt-6"},Re={class:"nav nav-tabs nav-line-tabs nav-line-tabs-2x border-transparent fs-4 fw-semibold"},Ee={class:"nav-item"},je={class:"nav-item"},Oe={class:"nav-item"},qe={class:"nav-item"},Ve={class:"card-body pt-6"},ze={key:0,class:"alert alert-info d-flex align-items-center p-5 mb-5"},Ge={key:1},Xe={class:"d-flex justify-content-between align-items-center mb-5"},Je={class:"position-relative w-300px"},He={key:0,class:"row g-5"},We={class:"card card-flush h-100 shadow-sm"},Ye={class:"card-header pt-6"},Ke={class:"card-title"},Qe={class:"d-flex align-items-center"},Ze={class:"symbol symbol-40px me-3"},ts={class:"fw-bold text-gray-800 fs-6"},es={class:"text-gray-500 fs-7"},ss={class:"card-toolbar"},as={class:"card-body pt-3"},os={class:"row g-3 mb-4"},ns={class:"col-12"},is={class:"fw-semibold"},rs={class:"col-12"},ls={class:"fw-semibold"},ds={class:"col-12"},cs={class:"fw-semibold"},us={class:"d-flex justify-content-between"},ms=["onClick"],ps=["onClick"],vs={key:1,class:"text-center py-10"},fs={key:2},gs={class:"d-flex justify-content-between align-items-center mb-5"},bs={class:"d-flex align-items-center gap-3"},ys={key:0,class:"row g-5"},hs={class:"card-header pt-6"},Cs={class:"card-title"},ws={class:"d-flex align-items-center"},xs={class:"symbol symbol-40px me-3"},As={class:"symbol-label bg-light-success text-success fw-bold"},_s={class:"fw-bold text-gray-800 fs-6"},ks={class:"text-gray-500 fs-7"},Ds={class:"card-toolbar"},Bs={class:"card-body pt-3"},Ss={class:"row g-3 mb-4"},Is={class:"col-6"},$s={class:"fw-bold text-gray-800"},Ps={class:"col-6"},Ns={class:"fw-bold text-success"},Ts={class:"col-6"},Fs={class:"fw-bold text-danger"},Us={class:"col-6"},Ms={class:"col-6"},Ls={class:"col-6"},Rs={class:"fw-bold"},Es={class:"d-flex justify-content-between"},js=["onClick"],Os=["onClick"],qs=["onClick"],Vs={key:1,class:"text-center py-10"},zs={key:3},Gs={class:"d-flex justify-content-between align-items-center mb-5"},Xs={class:"d-flex align-items-center gap-3"},Js={key:0,class:"table-responsive"},Hs={class:"table align-middle table-row-dashed fs-6 gy-5"},Ws={class:"fw-semibold text-gray-600"},Ys={class:"d-flex align-items-center"},Ks={class:"symbol symbol-35px me-3"},Qs={class:"symbol-label bg-light-primary text-primary fw-bold fs-7"},Zs={class:"fw-bold"},ta={class:"text-gray-500 fs-7"},ea={class:"fw-bold text-success"},sa={class:"badge badge-light-info"},aa={class:"fw-semibold"},oa={key:0,class:"text-gray-500 fs-7"},na={key:1,class:"text-gray-500 fs-7"},ia={class:"text-end"},ra=["onClick"],la=["onClick"],da={key:1,class:"text-center py-10"},ca={key:4},ua={class:"row g-5 mb-5"},ma={class:"card card-flush h-100"},pa={class:"card-body"},va={class:"d-flex align-items-center"},fa={class:"symbol symbol-45px me-3"},ga={class:"flex-grow-1"},ba={class:"text-gray-500 fw-semibold d-block fs-7"},ya={class:"text-gray-800 fw-bold fs-2"},ha={class:"text-gray-500 fs-7 d-block"},Ca={key:0,class:"table-responsive"},wa={class:"table align-middle table-row-dashed fs-6 gy-5"},xa={class:"fw-semibold text-gray-600"},Aa={class:"fw-bold"},_a={class:"text-gray-500 fs-7"},ka={class:"fw-bold"},Da={class:"fw-bold text-danger"},Ba={class:"text-end"},Sa=["onClick"],Ia={class:"modal fade",id:"addCustomerModal",tabindex:"-1","aria-hidden":"true",ref:"addCustomerModal"},$a={class:"modal-dialog modal-lg"},Pa={class:"modal-content"},Na={class:"modal-body"},Ta={class:"row g-5"},Fa={class:"col-12"},Ua={key:0,class:"invalid-feedback"},Ma={key:0,class:"col-12 col-md-6"},La={key:0,class:"invalid-feedback"},Ra={key:1,class:"col-12 col-md-6"},Ea={key:0,class:"invalid-feedback"},ja={key:2,class:"col-12"},Oa={key:0,class:"invalid-feedback"},qa={class:"col-12 col-md-6"},Va={key:0,class:"invalid-feedback"},za={class:"col-12 col-md-6"},Ga={key:0,class:"invalid-feedback"},Xa={class:"col-12 col-md-6"},Ja={class:"col-12 col-md-6"},Ha={class:"col-12"},Wa={class:"modal-footer"},Ya=["disabled"],Ka={key:0,class:"spinner-border spinner-border-sm me-2"},Qa={class:"modal fade",id:"creditAdjustmentModal",tabindex:"-1","aria-hidden":"true",ref:"creditAdjustmentModal"},Za={class:"modal-dialog"},to={class:"modal-content"},eo={class:"modal-body"},so={key:0},ao={class:"card card-flush bg-light mb-5"},oo={class:"card-body"},no={class:"fw-bold text-gray-800 mb-2"},io={class:"row g-3"},ro={class:"col-6"},lo={class:"fw-bold"},co={class:"col-6"},uo={class:"fw-bold text-danger"},mo={class:"col-6"},po={class:"fw-bold text-success"},vo={class:"col-6"},fo={class:"fw-bold"},go={class:"mb-5"},bo={class:"mb-5"},yo={class:"mb-5"},ho={class:"modal-footer"},Co=["disabled"],wo={key:0,class:"spinner-border spinner-border-sm me-2"},w="https://backend.cloudfuelstationmis.com/api/records/v1",xo={__name:"CustomerCreditAccountsManagement",setup(Ao){const g=JSON.parse(localStorage.getItem("kigrama_user_data")||"{}"),j=g.user||{},ot=g.stations||[],O=_(!1),B=_(!1),d=_(""),S=_("customers"),H=_(""),T=_(""),W=_(""),Y=_(""),K=_(""),Q=_([]),F=_([]),nt=_([]),Z=_([]),U=_([]),N=at({totalCustomers:0,activeCreditAccounts:0,totalOutstanding:0,avgUtilization:0}),$=_([{name:"Current (0-30 days)",amount:0,count:0,colorClass:"bg-light-success",iconClass:"text-success"},{name:"31-60 Days",amount:0,count:0,colorClass:"bg-light-warning",iconClass:"text-warning"},{name:"61-90 Days",amount:0,count:0,colorClass:"bg-light-danger",iconClass:"text-danger"},{name:"90+ Days",amount:0,count:0,colorClass:"bg-light-dark",iconClass:"text-dark"}]),i=at({CustomerType:"Individual",FirstName:"",LastName:"",CompanyName:"",PhoneNumber:"",Email:"",NationalID:"",TaxID:"",Address:""}),y=at({type:"limit_increase",amount:"",reason:""}),c=at({}),P=_(null),Pt=()=>{var s,o,u,f,b;Object.keys(c).forEach(k=>{c[k]=""});let a=!0;return["Individual","Corporate","Fleet"].includes(i.CustomerType)||(c.CustomerType="Invalid customer type",a=!1),(s=i.PhoneNumber)!=null&&s.trim()?/^(\+256|0)[7-9]\d{8}$/.test(i.PhoneNumber.trim())||(c.PhoneNumber="Please enter a valid Uganda phone number (+256/0 + 7-9 + 8 digits)",a=!1):(c.PhoneNumber="Phone number is required",a=!1),(o=i.Email)!=null&&o.trim()&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.Email.trim())&&(c.Email="Please enter a valid email address",a=!1),i.CustomerType==="Individual"?((u=i.FirstName)!=null&&u.trim()?i.FirstName.trim().length<2&&(c.FirstName="First name must be at least 2 characters",a=!1):(c.FirstName="First name is required for individual customers",a=!1),(f=i.LastName)!=null&&f.trim()?i.LastName.trim().length<2&&(c.LastName="Last name must be at least 2 characters",a=!1):(c.LastName="Last name is required for individual customers",a=!1),i.CompanyName=""):((b=i.CompanyName)!=null&&b.trim()?i.CompanyName.trim().length<3&&(c.CompanyName="Company name must be at least 3 characters",a=!1):(c.CompanyName="Company name is required for corporate/fleet customers",a=!1),i.FirstName="",i.LastName=""),d.value||(m.fire({title:"Station Required",text:"Please select a station before adding customers",icon:"error",confirmButtonColor:"#f1416c"}),a=!1),a},Nt=a=>!a||isNaN(a)||parseFloat(a)<=0?!1:/^\d+(\.\d{0,2})?$/.test(a.toString()),it=async(a,t)=>{try{if(t.StationID||t.PrimaryStationID){const s=t.StationID||t.PrimaryStationID;if(!(await fetch(`${w}/Stations/${s}`,{headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"}})).ok)throw new Error("Invalid Station ID - station does not exist")}if(t.CustomerID&&!(await fetch(`${w}/Customers/${t.CustomerID}`,{headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"}})).ok)throw new Error("Invalid Customer ID - customer does not exist");if(t.ApprovedBy||t.ReceivedBy||t.VerifiedBy){const s=t.ApprovedBy||t.ReceivedBy||t.VerifiedBy;if(s&&!(await fetch(`${w}/users/${s}`,{headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"}})).ok)throw new Error("Invalid User ID - user does not exist")}return!0}catch(s){throw console.error("Foreign key validation error:",s),s}},pt=mt(()=>{if(!H.value)return Q.value;const a=H.value.toLowerCase();return Q.value.filter(t=>{const s=h(t).toLowerCase(),o=t.CustomerCode.toLowerCase(),u=t.PhoneNumber.toLowerCase();return s.includes(a)||o.includes(a)||u.includes(a)})}),vt=mt(()=>T.value?F.value.filter(a=>{const t=V(a),s=R(a);return T.value==="Active"?a.IsActive==="1":T.value==="Inactive"?a.IsActive==="0":T.value==="OverLimit"?t==="Over Limit":T.value==="NearLimit"?t==="Near Limit":T.value==="HighUtilization"?s>80:!0}):F.value),rt=mt(()=>{let a=nt.value;return W.value&&(a=a.filter(t=>t.PaymentDate.startsWith(W.value))),Y.value&&(a=a.filter(t=>t.PaymentMethod===Y.value)),K.value&&(a=a.filter(t=>t.Status===K.value)),a}),h=a=>a.CompanyName?a.CompanyName:`${a.FirstName||""} ${a.LastName||""}`.trim(),lt=a=>{if(a.CompanyName)return a.CompanyName.substring(0,2).toUpperCase();const t=a.FirstName?a.FirstName[0]:"",s=a.LastName?a.LastName[0]:"";return(t+s).toUpperCase()||"CU"},p=a=>a?parseFloat(a).toLocaleString("en-UG",{minimumFractionDigits:0,maximumFractionDigits:0}):"0",q=a=>a?new Date(a).toLocaleDateString("en-GB"):"N/A",ft=a=>a?new Date(a).toLocaleString("en-GB"):"N/A",V=a=>{const t=parseFloat(a.CurrentBalance||0),s=parseFloat(a.CreditLimit||0),o=parseFloat(a.AvailableCredit||0);return t>s?"Over Limit":o<s*.1?"Near Limit":t===0?"No Balance":"Normal"},R=a=>{const t=parseFloat(a.CurrentBalance||0),s=parseFloat(a.CreditLimit||0);return s===0?0:Math.round(t/s*100)},Tt=a=>{const t=Date.now().toString().slice(-6),s=Math.floor(Math.random()*1e3).toString().padStart(3,"0");return`${a}${t}${s}`},gt=a=>{const t=Date.now(),s=Math.floor(Math.random()*1e4);return`${a}-${t}-${s}`},dt=(a,t)=>{const s=[];if(a==="Customers"&&(t.CustomerType||s.push("CustomerType is required"),t.CustomerCode||s.push("CustomerCode is required"),t.PhoneNumber||s.push("PhoneNumber is required"),t.RegistrationDate||s.push("RegistrationDate is required"),t.Status||s.push("Status is required"),t.CreatedAt||s.push("CreatedAt is required"),t.UpdatedAt||s.push("UpdatedAt is required"),t.CustomerType&&!["Individual","Corporate","Fleet"].includes(t.CustomerType)&&s.push("CustomerType must be Individual, Corporate, or Fleet"),t.Status&&!["Active","Suspended","Blacklisted"].includes(t.Status)&&s.push("Status must be Active, Suspended, or Blacklisted")),a==="CustomerCreditAccounts"&&((t.CustomerID===void 0||t.CustomerID===null)&&s.push("CustomerID is required"),t.CreditLimit||s.push("CreditLimit is required"),t.CurrentBalance||s.push("CurrentBalance is required"),t.AvailableCredit||s.push("AvailableCredit is required"),t.PaymentTermsDays||s.push("PaymentTermsDays is required"),(t.ApprovedBy===void 0||t.ApprovedBy===null)&&s.push("ApprovedBy is required"),t.ApprovedDate||s.push("ApprovedDate is required")),a==="CustomerCreditPayments"&&((t.CustomerID===void 0||t.CustomerID===null)&&s.push("CustomerID is required"),(t.StationID===void 0||t.StationID===null)&&s.push("StationID is required"),t.PaymentReference||s.push("PaymentReference is required"),t.PaymentDate||s.push("PaymentDate is required"),t.PaymentAmount||s.push("PaymentAmount is required"),t.PaymentMethod||s.push("PaymentMethod is required"),(t.ReceivedBy===void 0||t.ReceivedBy===null)&&s.push("ReceivedBy is required"),t.PaymentMethod&&!["Cash","Bank Transfer","Mobile Money","Card"].includes(t.PaymentMethod)&&s.push("PaymentMethod must be Cash, Bank Transfer, Mobile Money, or Card"),t.Status&&!["Pending","Completed","Failed"].includes(t.Status)&&s.push("Status must be Pending, Completed, or Failed")),s.length>0)throw new Error(`Database constraint violations: ${s.join(", ")}`);return!0},Ft=a=>({Individual:"bg-light-primary text-primary fw-bold",Corporate:"bg-light-success text-success fw-bold",Fleet:"bg-light-warning text-warning fw-bold"})[a]||"bg-light-secondary text-secondary fw-bold",bt=a=>({Active:"badge-light-success",Suspended:"badge-light-warning",Blacklisted:"badge-light-danger"})[a]||"badge-light-secondary",yt=a=>({Normal:"badge-light-success","Near Limit":"badge-light-warning","Over Limit":"badge-light-danger","No Balance":"badge-light-info"})[a]||"badge-light-secondary",Ut=a=>{const t=V(a);return t==="Over Limit"?"border-danger":t==="Near Limit"?"border-warning":""},ht=a=>a>=90?"text-danger":a>=75?"text-warning":"text-success",Ct=a=>{const t=parseFloat(a||0);return t>=80?"text-success":t>=60?"text-warning":"text-danger"},wt=a=>({Completed:"badge-light-success",Pending:"badge-light-warning",Failed:"badge-light-danger"})[a]||"badge-light-secondary",xt=a=>({Current:"badge-light-success","31-60 Days":"badge-light-warning","61-90 Days":"badge-light-danger","90+ Days":"badge-light-dark"})[a]||"badge-light-secondary",At=async()=>{if(d.value)try{O.value=!0;const a=await fetch(`${w}/Customers?PrimaryStationID=${d.value}`,{headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to fetch customers");const t=await a.json();Q.value=t.records||[]}catch(a){console.error("Error fetching customers:",a),m.fire({title:"Error!",text:"Failed to load customers",icon:"error",confirmButtonColor:"#f1416c"})}finally{O.value=!1}},tt=async()=>{if(d.value)try{const a=await fetch(`${w}/CustomerCreditSummary?StationID=${d.value}`,{headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to fetch credit summary");const t=await a.json();F.value=t.records||[]}catch(a){console.error("Error fetching credit summary:",a)}},ct=async()=>{if(d.value)try{const a=await fetch(`${w}/CustomerCreditPayments?StationID=${d.value}`,{headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to fetch payments");const t=await a.json();nt.value=t.records||[],await Promise.all(nt.value.map(async s=>{const o=await fetch(`${w}/Customers/${s.CustomerID}`,{headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"}});if(o.ok){const u=await o.json();Object.assign(s,u)}}))}catch(a){console.error("Error fetching payments:",a)}},_t=async()=>{if(d.value)try{const a=await fetch(`${w}/CustomerOutstandingBalances?StationID=${d.value}`,{headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"}});if(!a.ok)throw new Error("Failed to fetch outstanding balances");const t=await a.json();Z.value=t.records||[],Mt()}catch(a){console.error("Error fetching outstanding balances:",a)}},J=()=>{N.totalCustomers=Q.value.length,N.activeCreditAccounts=F.value.filter(t=>t.IsActive==="1").length,N.totalOutstanding=F.value.reduce((t,s)=>t+parseFloat(s.CurrentBalance||0),0);const a=F.value.filter(t=>t.IsActive==="1");if(a.length>0){const t=a.reduce((s,o)=>s+R(o),0);N.avgUtilization=Math.round(t/a.length)}else N.avgUtilization=0},Mt=()=>{$.value.forEach(a=>{a.amount=0,a.count=0}),Z.value.forEach(a=>{const t=parseFloat(a.OutstandingAmount||0),s=a.AgingBucket;s==="Current"?($.value[0].amount+=t,$.value[0].count++):s==="31-60 Days"?($.value[1].amount+=t,$.value[1].count++):s==="61-90 Days"?($.value[2].amount+=t,$.value[2].count++):s==="90+ Days"&&($.value[3].amount+=t,$.value[3].count++)})},kt=()=>{U.value=[],F.value.forEach(a=>{const t=V(a),s=R(a),o=parseFloat(a.CreditScore||100);t==="Over Limit"&&U.value.push({customer:h(a),type:"Over Limit",message:"Credit limit exceeded"}),s>90&&t!=="Over Limit"&&U.value.push({customer:h(a),type:"High Utilization",message:`${s}% credit utilization`}),o<60&&U.value.push({customer:h(a),type:"Low Credit Score",message:`Credit score: ${o}%`})}),m.fire({title:"Credit Monitoring Complete",text:`Found ${U.value.length} risk alerts requiring attention`,icon:U.value.length>0?"warning":"success",confirmButtonColor:"#3699ff"})},ut=async()=>{d.value&&(await Promise.all([At(),tt(),ct(),_t()]),J(),kt())},Lt=async()=>{d.value&&(await ut(),m.fire({title:"Refreshed!",text:"Data has been updated",icon:"success",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1}))},Dt=()=>{Object.assign(i,{CustomerType:"Individual",FirstName:"",LastName:"",CompanyName:"",PhoneNumber:"",Email:"",NationalID:"",TaxID:"",Address:""}),Object.keys(c).forEach(t=>{c[t]=""}),new bootstrap.Modal(document.getElementById("addCustomerModal")).show()},Bt=async()=>{if(Pt())try{B.value=!0;const a=Tt("CUST"),s=await(await fetch(`${w}/Customers?CustomerCode=${a}`,{headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"}})).json();if(s.records&&s.records.length>0)throw new Error("Customer code already exists. Please try again.");const o={CustomerType:i.CustomerType,CustomerCode:a,FirstName:i.CustomerType==="Individual"&&i.FirstName||null,LastName:i.CustomerType==="Individual"&&i.LastName||null,CompanyName:i.CustomerType!=="Individual"&&i.CompanyName||null,PhoneNumber:i.PhoneNumber,Email:i.Email||null,NationalID:i.NationalID||null,TaxID:i.TaxID||null,Address:i.Address||null,PrimaryStationID:parseInt(d.value),RegistrationDate:new Date().toISOString(),Status:"Active",CreatedAt:new Date().toISOString(),UpdatedAt:new Date().toISOString()};dt("Customers",o),await it("Customers",o);const u=await fetch(`${w}/Customers`,{method:"POST",headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"},body:JSON.stringify(o)});if(!u.ok){const b=await u.json();throw new Error(b.message||"Failed to create customer")}const f=await u.json();await z("INSERT","Customers",f.CustomerID,null,o),bootstrap.Modal.getInstance(document.getElementById("addCustomerModal")).hide(),await m.fire({title:"Success!",text:`Customer ${a} created successfully`,icon:"success",confirmButtonColor:"#50cd89"}),await At(),J()}catch(a){console.error("Error creating customer:",a),m.fire({title:"Error!",text:a.message||"Failed to create customer",icon:"error",confirmButtonColor:"#f1416c"})}finally{B.value=!1}},Rt=async a=>{try{const t=F.value.find(s=>s.CustomerID===a.CustomerID&&s.StationID===parseInt(d.value));if(t)P.value=t,new bootstrap.Modal(document.getElementById("creditAdjustmentModal")).show();else{const s=await m.fire({title:"Create Credit Account",html:`
          <div class="mb-3">
            <label class="form-label">Credit Limit (UGX)</label>
            <input id="credit-limit" class="form-control form-control-lg" type="number" min="1000" step="1000" value="100000">
          </div>
          <div class="mb-3">
            <label class="form-label">Payment Terms (Days)</label>
            <select id="payment-terms" class="form-select form-select-lg">
              <option value="30">30 Days</option>
              <option value="60">60 Days</option>
              <option value="90">90 Days</option>
            </select>
          </div>
        `,showCancelButton:!0,confirmButtonText:"Create Account",cancelButtonText:"Cancel",confirmButtonColor:"#50cd89",preConfirm:()=>{const o=document.getElementById("credit-limit").value,u=document.getElementById("payment-terms").value;return!o||parseFloat(o)<1e3?(m.showValidationMessage("Minimum credit limit is UGX 1,000"),!1):{limit:o,terms:u}}});s.isConfirmed&&await Et(a,s.value.limit,s.value.terms)}}catch(t){console.error("Error managing credit account:",t)}},Et=async(a,t,s)=>{try{B.value=!0;const u=await(await fetch(`${w}/CustomerCreditAccounts?CustomerID=${a.CustomerID}&StationID=${d.value}`,{headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"}})).json();if(u.records&&u.records.length>0)throw new Error("Credit account already exists for this customer at this station");const f={CustomerID:a.CustomerID,StationID:parseInt(d.value),CreditLimit:t.toString(),CurrentBalance:"0.00",AvailableCredit:t.toString(),PaymentTermsDays:s.toString(),LastPurchaseDate:null,LastPaymentDate:null,LastPaymentAmount:"0.00",CreditScore:"100",IsActive:"1",ApprovedBy:j.id,ApprovedDate:new Date().toISOString(),CreatedAt:new Date().toISOString(),UpdatedAt:new Date().toISOString()};dt("CustomerCreditAccounts",f),await it("CustomerCreditAccounts",f);const b=await fetch(`${w}/CustomerCreditAccounts`,{method:"POST",headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"},body:JSON.stringify(f)});if(!b.ok){const M=await b.json();throw new Error(M.message||"Failed to create credit account")}const k=await b.json();await z("INSERT","CustomerCreditAccounts",k.CreditAccountID,null,f),await et(parseInt(d.value),"1200","Credit_Account_Setup",k.CreditAccountID,`Credit account created for ${h(a)} - Limit: UGX ${p(t)}`,"0.00","0.00"),await m.fire({title:"Success!",text:`Credit account created with limit UGX ${p(t)}`,icon:"success",confirmButtonColor:"#50cd89"}),await tt(),J()}catch(o){console.error("Error creating credit account:",o),m.fire({title:"Error!",text:o.message||"Failed to create credit account",icon:"error",confirmButtonColor:"#f1416c"})}finally{B.value=!1}},jt=a=>{P.value=a,Object.assign(y,{type:"limit_increase",amount:"",reason:""}),new bootstrap.Modal(document.getElementById("creditAdjustmentModal")).show()},St=async()=>{var a;if(!y.amount||!Nt(y.amount)){m.fire({title:"Invalid Amount",text:"Please enter a valid amount",icon:"error",confirmButtonColor:"#f1416c"});return}if(!((a=y.reason)!=null&&a.trim())){m.fire({title:"Reason Required",text:"Please provide a reason for this adjustment",icon:"error",confirmButtonColor:"#f1416c"});return}try{if(!(await m.fire({title:"Confirm Credit Adjustment",html:`
        <div class="text-start">
          <p><strong>Customer:</strong> ${h(P.value)}</p>
          <p><strong>Type:</strong> ${y.type.replace(/_/g," ")}</p>
          <p><strong>Amount:</strong> UGX ${p(y.amount)}</p>
          <p><strong>Reason:</strong> ${y.reason}</p>
          <div class="alert alert-warning mt-3">
            <strong>Warning:</strong> This action cannot be undone and will be logged for audit purposes.
          </div>
        </div>
      `,icon:"warning",showCancelButton:!0,confirmButtonText:"Confirm Adjustment",cancelButtonText:"Cancel",confirmButtonColor:"#f1c40f",cancelButtonColor:"#6c757d"})).isConfirmed)return;B.value=!0;const s=P.value,o=parseFloat(y.amount),u={CreditLimit:s.CreditLimit,CurrentBalance:s.CurrentBalance,AvailableCredit:s.AvailableCredit};let f={},b="",k="0.00",M="0.00";if(y.type==="limit_increase"){const A=parseFloat(s.CreditLimit)+o;f={CreditLimit:A.toFixed(2),AvailableCredit:(A-parseFloat(s.CurrentBalance)).toFixed(2),UpdatedAt:new Date().toISOString()},b=`Credit limit increased by UGX ${p(o)} for ${h(s)}`}else if(y.type==="limit_decrease"){const A=Math.max(parseFloat(s.CurrentBalance),parseFloat(s.CreditLimit)-o);f={CreditLimit:A.toFixed(2),AvailableCredit:(A-parseFloat(s.CurrentBalance)).toFixed(2),UpdatedAt:new Date().toISOString()},b=`Credit limit decreased by UGX ${p(o)} for ${h(s)}`}else if(y.type==="balance_adjustment_positive"){const A=parseFloat(s.CurrentBalance)+o;f={CurrentBalance:A.toFixed(2),AvailableCredit:(parseFloat(s.CreditLimit)-A).toFixed(2),UpdatedAt:new Date().toISOString()},k=o.toFixed(2),b=`Outstanding balance increased by UGX ${p(o)} for ${h(s)}`}else if(y.type==="balance_adjustment_negative"){const A=Math.max(0,parseFloat(s.CurrentBalance)-o);f={CurrentBalance:A.toFixed(2),AvailableCredit:(parseFloat(s.CreditLimit)-A).toFixed(2),UpdatedAt:new Date().toISOString()},M=o.toFixed(2),b=`Outstanding balance decreased by UGX ${p(o)} for ${h(s)}`}const st=await fetch(`${w}/CustomerCreditAccounts/${s.CreditAccountID}`,{method:"PATCH",headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"},body:JSON.stringify(f)});if(!st.ok){const A=await st.json();throw new Error(A.message||"Failed to update credit account")}await z("UPDATE","CustomerCreditAccounts",s.CreditAccountID,u,{...u,...f,AdjustmentReason:y.reason}),await et(parseInt(d.value),"1200","Credit_Adjustment",s.CreditAccountID,b+`. Reason: ${y.reason}`,k,M),bootstrap.Modal.getInstance(document.getElementById("creditAdjustmentModal")).hide(),await m.fire({title:"Success!",text:"Credit adjustment applied successfully",icon:"success",confirmButtonColor:"#50cd89"}),await tt(),J()}catch(t){console.error("Error adjusting credit:",t),m.fire({title:"Error!",text:t.message||"Failed to apply credit adjustment",icon:"error",confirmButtonColor:"#f1416c"})}finally{B.value=!1}},Ot=async a=>{try{const{value:t}=await m.fire({title:"Record Payment",html:`
        <div class="mb-3">
          <label class="form-label">Payment Amount (UGX)</label>
          <input id="payment-amount" class="form-control form-control-lg" type="number" min="1" step="0.01" max="${a.CurrentBalance}">
          <div class="form-text">Maximum: UGX ${p(a.CurrentBalance)}</div>
        </div>
        <div class="mb-3">
          <label class="form-label">Payment Method</label>
          <select id="payment-method" class="form-select form-select-lg">
            <option value="Cash">Cash</option>
            <option value="Bank Transfer">Bank Transfer</option>
            <option value="Mobile Money">Mobile Money</option>
            <option value="Card">Card</option>
          </select>
        </div>
        <div class="mb-3">
          <label class="form-label">Reference Number</label>
          <input id="payment-reference" class="form-control form-control-lg" type="text" placeholder="Transaction reference">
        </div>
        <div class="mb-3">
          <label class="form-label">Notes (Optional)</label>
          <textarea id="payment-notes" class="form-control" rows="2" placeholder="Additional payment notes"></textarea>
        </div>
      `,showCancelButton:!0,confirmButtonText:"Record Payment",cancelButtonText:"Cancel",confirmButtonColor:"#50cd89",preConfirm:()=>{const s=document.getElementById("payment-amount").value,o=document.getElementById("payment-method").value,u=document.getElementById("payment-reference").value,f=document.getElementById("payment-notes").value;return!s||parseFloat(s)<=0?(m.showValidationMessage("Please enter a valid payment amount"),!1):parseFloat(s)>parseFloat(a.CurrentBalance)?(m.showValidationMessage("Payment amount cannot exceed outstanding balance"),!1):u!=null&&u.trim()?{amount:s,method:o,reference:u,notes:f}:(m.showValidationMessage("Please enter a reference number"),!1)}});t&&await qt(a,t)}catch(t){console.error("Error recording payment:",t)}},qt=async(a,t)=>{try{B.value=!0;let s=gt("PAY"),o=await fetch(`${w}/CustomerCreditPayments?PaymentReference=${s}`,{headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"}}),u=await o.json();for(;u.records&&u.records.length>0;)s=gt("PAY"),o=await fetch(`${w}/CustomerCreditPayments?PaymentReference=${s}`,{headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"}}),u=await o.json();if(!["Cash","Bank Transfer","Mobile Money","Card"].includes(t.method))throw new Error("Invalid payment method");const b={CustomerID:a.CustomerID,StationID:parseInt(d.value),PaymentReference:s,PaymentDate:new Date().toISOString(),PaymentAmount:t.amount.toString(),PaymentMethod:t.method,MobileMoneyReference:t.method==="Mobile Money"?t.reference:null,BankReference:t.method==="Bank Transfer"?t.reference:null,AllocatedToTransactions:"[]",Notes:t.notes||null,ReceivedBy:j.id,VerifiedBy:null,Status:"Completed",CreatedAt:new Date().toISOString(),UpdatedAt:new Date().toISOString()};dt("CustomerCreditPayments",b),await it("CustomerCreditPayments",b);const k=await fetch(`${w}/CustomerCreditPayments`,{method:"POST",headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"},body:JSON.stringify(b)});if(!k.ok){const Kt=await k.json();throw new Error(Kt.message||"Failed to record payment")}const M=await k.json(),st=parseFloat(t.amount),A=Math.max(0,parseFloat(a.CurrentBalance)-st),Yt=parseFloat(a.CreditLimit)-A,It={CurrentBalance:A.toFixed(2),AvailableCredit:Yt.toFixed(2),LastPaymentDate:new Date().toISOString().split("T")[0],LastPaymentAmount:t.amount.toString(),UpdatedAt:new Date().toISOString()};await fetch(`${w}/CustomerCreditAccounts/${a.CreditAccountID}`,{method:"PATCH",headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"},body:JSON.stringify(It)}),await z("INSERT","CustomerCreditPayments",M.PaymentID,null,b),await z("UPDATE","CustomerCreditAccounts",a.CreditAccountID,{CurrentBalance:a.CurrentBalance,AvailableCredit:a.AvailableCredit},It),await Promise.all([et(parseInt(d.value),t.method==="Cash"?"1000":"1010","Customer_Payment",M.PaymentID,`Payment received from ${h(a)} via ${t.method}`,t.amount.toString(),"0.00"),et(parseInt(d.value),"1200","Customer_Payment",M.PaymentID,`Payment applied to ${h(a)} credit account`,"0.00",t.amount.toString())]),await m.fire({title:"Payment Recorded!",text:`Payment of UGX ${p(t.amount)} recorded successfully`,icon:"success",confirmButtonColor:"#50cd89"}),await Promise.all([tt(),ct(),_t()]),J()}catch(s){console.error("Error processing payment:",s),m.fire({title:"Error!",text:s.message||"Failed to process payment",icon:"error",confirmButtonColor:"#f1416c"})}finally{B.value=!1}},Vt=async a=>{try{(await m.fire({title:"Verify Payment",text:`Verify payment of UGX ${p(a.PaymentAmount)} from ${h(a)}?`,icon:"question",showCancelButton:!0,confirmButtonText:"Verify",cancelButtonText:"Cancel",confirmButtonColor:"#50cd89"})).isConfirmed&&(await fetch(`${w}/CustomerCreditPayments/${a.PaymentID}`,{method:"PATCH",headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"},body:JSON.stringify({Status:"Completed",VerifiedBy:j.id})}),await z("UPDATE","CustomerCreditPayments",a.PaymentID,{Status:a.Status},{Status:"Completed",VerifiedBy:j.id}),await ct(),m.fire({title:"Verified!",text:"Payment has been verified",icon:"success",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1}))}catch(t){console.error("Error verifying payment:",t)}},zt=a=>{m.fire({title:h(a),html:`
      <div class="text-start">
        <div class="row g-3">
          <div class="col-6">
            <strong>Customer Code:</strong><br>${a.CustomerCode}
          </div>
          <div class="col-6">
            <strong>Type:</strong><br>${a.CustomerType}
          </div>
          <div class="col-6">
            <strong>Phone:</strong><br>${a.PhoneNumber}
          </div>
          <div class="col-6">
            <strong>Email:</strong><br>${a.Email||"Not provided"}
          </div>
          <div class="col-6">
            <strong>National ID:</strong><br>${a.NationalID||"Not provided"}
          </div>
          <div class="col-6">
            <strong>Tax ID:</strong><br>${a.TaxID||"Not provided"}
          </div>
          <div class="col-12">
            <strong>Address:</strong><br>${a.Address||"Not provided"}
          </div>
          <div class="col-6">
            <strong>Status:</strong><br><span class="badge ${bt(a.Status)}">${a.Status}</span>
          </div>
          <div class="col-6">
            <strong>Registration Date:</strong><br>${q(a.RegistrationDate)}
          </div>
        </div>
      </div>
    `,confirmButtonText:"Close",confirmButtonColor:"#3699ff",width:"600px"})},Gt=a=>{const t=R(a),s=V(a);m.fire({title:`Credit Account - ${h(a)}`,html:`
      <div class="text-start">
        <div class="row g-3">
          <div class="col-6">
            <strong>Credit Limit:</strong><br>UGX ${p(a.CreditLimit)}
          </div>
          <div class="col-6">
            <strong>Outstanding:</strong><br>UGX ${p(a.CurrentBalance)}
          </div>
          <div class="col-6">
            <strong>Available:</strong><br>UGX ${p(a.AvailableCredit)}
          </div>
          <div class="col-6">
            <strong>Utilization:</strong><br><span class="${ht(t)}">${t}%</span>
          </div>
          <div class="col-6">
            <strong>Credit Score:</strong><br><span class="${Ct(a.CreditScore)}">${a.CreditScore}%</span>
          </div>
          <div class="col-6">
            <strong>Payment Terms:</strong><br>${a.PaymentTermsDays} days
          </div>
          <div class="col-6">
            <strong>Status:</strong><br><span class="badge ${yt(s)}">${s}</span>
          </div>
          <div class="col-6">
            <strong>Account Active:</strong><br><span class="badge ${a.IsActive==="1"?"badge-light-success":"badge-light-danger"}">${a.IsActive==="1"?"Yes":"No"}</span>
          </div>
          <div class="col-6">
            <strong>Last Purchase:</strong><br>${q(a.LastPurchaseDate)}
          </div>
          <div class="col-6">
            <strong>Last Payment:</strong><br>${q(a.LastPaymentDate)}
          </div>
          <div class="col-6">
            <strong>Last Payment Amount:</strong><br>UGX ${p(a.LastPaymentAmount)}
          </div>
          <div class="col-6">
            <strong>Approved Date:</strong><br>${q(a.ApprovedDate)}
          </div>
        </div>
      </div>
    `,confirmButtonText:"Close",confirmButtonColor:"#3699ff",width:"700px"})},Xt=a=>{m.fire({title:"Payment Details",html:`
      <div class="text-start">
        <div class="row g-3">
          <div class="col-12">
            <strong>Customer:</strong><br>${h(a)}
          </div>
          <div class="col-6">
            <strong>Amount:</strong><br>UGX ${p(a.PaymentAmount)}
          </div>
          <div class="col-6">
            <strong>Method:</strong><br>${a.PaymentMethod}
          </div>
          <div class="col-6">
            <strong>Reference:</strong><br>${a.PaymentReference}
          </div>
          <div class="col-6">
            <strong>Date:</strong><br>${ft(a.PaymentDate)}
          </div>
          <div class="col-6">
            <strong>Status:</strong><br><span class="badge ${wt(a.Status)}">${a.Status}</span>
          </div>
          <div class="col-6">
            <strong>Received By:</strong><br>Staff ID: ${a.ReceivedBy}
          </div>
          ${a.MobileMoneyReference?`<div class="col-12"><strong>Mobile Money Ref:</strong><br>${a.MobileMoneyReference}</div>`:""}
          ${a.BankReference?`<div class="col-12"><strong>Bank Reference:</strong><br>${a.BankReference}</div>`:""}
          ${a.Notes?`<div class="col-12"><strong>Notes:</strong><br>${a.Notes}</div>`:""}
          ${a.VerifiedBy?`<div class="col-12"><strong>Verified By:</strong><br>Staff ID: ${a.VerifiedBy}</div>`:""}
        </div>
      </div>
    `,confirmButtonText:"Close",confirmButtonColor:"#3699ff",width:"600px"})},Jt=async a=>{const t=Math.floor(a.DaysOutstanding);m.fire({title:"Payment Follow-up",html:`
      <div class="text-start">
        <p><strong>Customer:</strong> ${a.CustomerName}</p>
        <p><strong>Outstanding Amount:</strong> UGX ${p(a.OutstandingAmount)}</p>
        <p><strong>Days Outstanding:</strong> ${t} days</p>
        <p><strong>Aging Bucket:</strong> <span class="badge ${xt(a.AgingBucket)}">${a.AgingBucket}</span></p>
        <div class="alert alert-info mt-3">
          <strong>Recommended Actions:</strong><br>
          ${t<=30?"• Send friendly payment reminder":""}
          ${t>30&&t<=60?"• Phone call for payment discussion<br>• Request payment plan":""}
          ${t>60&&t<=90?"• Formal payment demand letter<br>• Suspend credit privileges<br>• Manager escalation":""}
          ${t>90?"• Legal notice preparation<br>• Debt collection consideration<br>• Account review for write-off":""}
        </div>
      </div>
    `,confirmButtonText:"Mark as Followed Up",showCancelButton:!0,cancelButtonText:"Close",confirmButtonColor:"#f1c40f"})},Ht=async()=>{try{const a=await m.fire({title:"Generate Credit Report",html:`
        <div class="mb-3">
          <label class="form-label">Report Type</label>
          <select id="report-type" class="form-select">
            <option value="summary">Credit Summary Report</option>
            <option value="aging">Aging Analysis Report</option>
            <option value="risk">Risk Assessment Report</option>
            <option value="payment">Payment History Report</option>
          </select>
        </div>
        <div class="mb-3">
          <label class="form-label">Date Range</label>
          <select id="date-range" class="form-select">
            <option value="30">Last 30 Days</option>
            <option value="60">Last 60 Days</option>
            <option value="90">Last 90 Days</option>
            <option value="365">Last 12 Months</option>
          </select>
        </div>
      `,showCancelButton:!0,confirmButtonText:"Generate Report",cancelButtonText:"Cancel",confirmButtonColor:"#3699ff",preConfirm:()=>{const t=document.getElementById("report-type").value,s=document.getElementById("date-range").value;return{reportType:t,dateRange:s}}});a.isConfirmed&&await m.fire({title:"Report Generated!",text:`${a.value.reportType} report for ${d.value?"selected station":"all stations"} has been generated.`,icon:"success",confirmButtonColor:"#50cd89"})}catch(a){console.error("Error generating report:",a)}},Wt=async()=>{try{(await m.fire({title:"Export Payments",text:"Export payment data for the current filters?",icon:"question",showCancelButton:!0,confirmButtonText:"Export",cancelButtonText:"Cancel",confirmButtonColor:"#50cd89"})).isConfirmed&&await m.fire({title:"Exported!",text:`${rt.value.length} payment records exported successfully.`,icon:"success",confirmButtonColor:"#50cd89"})}catch(a){console.error("Error exporting payments:",a)}},z=async(a,t,s,o,u)=>{try{const f={StationID:d.value?parseInt(d.value):null,UserID:j.id,Action:a,TableName:t,RecordID:s,Changes:JSON.stringify({oldValues:o||{},newValues:u||{},timestamp:new Date().toISOString(),userAgent:navigator.userAgent}),IPAddress:"client_ip"};await fetch(`${w}/AuditLogs`,{method:"POST",headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"},body:JSON.stringify(f)})}catch(f){console.error("Error logging audit action:",f)}},et=async(a,t,s,o,u,f,b)=>{try{const k={StationID:a,TransactionDate:new Date().toISOString(),AccountCode:t,TransactionType:s,ReferenceID:o,Description:u,DebitAmount:f,CreditAmount:b,RecordedBy:j.id};await fetch(`${w}/LedgerEntries`,{method:"POST",headers:{Authorization:`Bearer ${g.token}`,"Content-Type":"application/json"},body:JSON.stringify(k)})}catch(k){console.error("Error creating ledger entry:",k)}};return Zt(d,a=>{a&&ut()}),te(()=>{ot.length===1&&(d.value=ot[0].StationID.toString())}),(a,t)=>(l(),r(E,null,[e("div",se,[e("div",ae,[t[24]||(t[24]=D('<div class="card-title" data-v-b97cd8de><div class="d-flex align-items-center" data-v-b97cd8de><i class="ki-duotone ki-bank fs-2 text-primary me-3" data-v-b97cd8de><span class="path1" data-v-b97cd8de></span><span class="path2" data-v-b97cd8de></span></i><h3 class="fw-bold mb-0" data-v-b97cd8de>Customer Credit Management</h3></div></div>',1)),e("div",oe,[e("div",ne,[x(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>d.value=s),onChange:ut,class:"form-select form-select-lg w-250px"},[t[22]||(t[22]=e("option",{value:""},"Select Station",-1)),(l(!0),r(E,null,X(ee(ot),s=>(l(),r("option",{key:s.StationID,value:s.StationID},n(s.StationName),9,ie))),128))],544),[[G,d.value]]),e("button",{onClick:Lt,class:"btn btn-light-primary",disabled:O.value},t[23]||(t[23]=[e("i",{class:"ki-duotone ki-arrows-circle fs-2"},[e("span",{class:"path1"}),e("span",{class:"path2"})],-1),L(" Refresh ")]),8,re)])])])]),U.value.length>0?(l(),r("div",le,[t[26]||(t[26]=e("i",{class:"ki-duotone ki-shield-cross fs-2hx text-warning me-4"},[e("span",{class:"path1"}),e("span",{class:"path2"}),e("span",{class:"path3"})],-1)),e("div",de,[t[25]||(t[25]=e("h4",{class:"mb-1 text-warning"},"Credit Risk Alerts",-1)),e("span",ce,n(U.value.length)+" account(s) require immediate attention",1)])])):v("",!0),d.value?(l(),r("div",ue,[e("div",me,[e("div",pe,[e("div",ve,[e("div",fe,[t[28]||(t[28]=D('<div class="symbol symbol-45px me-3" data-v-b97cd8de><span class="symbol-label bg-light-success" data-v-b97cd8de><i class="ki-duotone ki-people fs-2 text-success" data-v-b97cd8de><span class="path1" data-v-b97cd8de></span><span class="path2" data-v-b97cd8de></span><span class="path3" data-v-b97cd8de></span><span class="path4" data-v-b97cd8de></span><span class="path5" data-v-b97cd8de></span></i></span></div>',1)),e("div",ge,[t[27]||(t[27]=e("span",{class:"text-gray-500 fw-semibold d-block fs-7"},"Total Customers",-1)),e("span",be,n(N.totalCustomers),1)])])])])]),e("div",ye,[e("div",he,[e("div",Ce,[e("div",we,[t[30]||(t[30]=D('<div class="symbol symbol-45px me-3" data-v-b97cd8de><span class="symbol-label bg-light-warning" data-v-b97cd8de><i class="ki-duotone ki-wallet fs-2 text-warning" data-v-b97cd8de><span class="path1" data-v-b97cd8de></span><span class="path2" data-v-b97cd8de></span><span class="path3" data-v-b97cd8de></span><span class="path4" data-v-b97cd8de></span></i></span></div>',1)),e("div",xe,[t[29]||(t[29]=e("span",{class:"text-gray-500 fw-semibold d-block fs-7"},"Active Credit",-1)),e("span",Ae,n(N.activeCreditAccounts),1)])])])])]),e("div",_e,[e("div",ke,[e("div",De,[e("div",Be,[t[32]||(t[32]=D('<div class="symbol symbol-45px me-3" data-v-b97cd8de><span class="symbol-label bg-light-danger" data-v-b97cd8de><i class="ki-duotone ki-bill fs-2 text-danger" data-v-b97cd8de><span class="path1" data-v-b97cd8de></span><span class="path2" data-v-b97cd8de></span><span class="path3" data-v-b97cd8de></span><span class="path4" data-v-b97cd8de></span><span class="path5" data-v-b97cd8de></span><span class="path6" data-v-b97cd8de></span></i></span></div>',1)),e("div",Se,[t[31]||(t[31]=e("span",{class:"text-gray-500 fw-semibold d-block fs-7"},"Outstanding",-1)),e("span",Ie,"UGX "+n(p(N.totalOutstanding)),1)])])])])]),e("div",$e,[e("div",Pe,[e("div",Ne,[e("div",Te,[t[34]||(t[34]=D('<div class="symbol symbol-45px me-3" data-v-b97cd8de><span class="symbol-label bg-light-info" data-v-b97cd8de><i class="ki-duotone ki-percentage fs-2 text-info" data-v-b97cd8de><span class="path1" data-v-b97cd8de></span><span class="path2" data-v-b97cd8de></span></i></span></div>',1)),e("div",Fe,[t[33]||(t[33]=e("span",{class:"text-gray-500 fw-semibold d-block fs-7"},"Avg Utilization",-1)),e("span",Ue,n(N.avgUtilization)+"%",1)])])])])])])):v("",!0),e("div",Me,[e("div",Le,[e("ul",Re,[e("li",Ee,[e("a",{class:C(["nav-link text-active-primary pb-4",{active:S.value==="customers"}]),onClick:t[1]||(t[1]=s=>S.value="customers")},t[35]||(t[35]=[D('<i class="ki-duotone ki-people fs-2 me-2" data-v-b97cd8de><span class="path1" data-v-b97cd8de></span><span class="path2" data-v-b97cd8de></span><span class="path3" data-v-b97cd8de></span><span class="path4" data-v-b97cd8de></span><span class="path5" data-v-b97cd8de></span></i> Customer Registry ',2)]),2)]),e("li",je,[e("a",{class:C(["nav-link text-active-primary pb-4",{active:S.value==="credit"}]),onClick:t[2]||(t[2]=s=>S.value="credit")},t[36]||(t[36]=[D('<i class="ki-duotone ki-bill fs-2 me-2" data-v-b97cd8de><span class="path1" data-v-b97cd8de></span><span class="path2" data-v-b97cd8de></span><span class="path3" data-v-b97cd8de></span><span class="path4" data-v-b97cd8de></span><span class="path5" data-v-b97cd8de></span><span class="path6" data-v-b97cd8de></span></i> Credit Monitoring ',2)]),2)]),e("li",Oe,[e("a",{class:C(["nav-link text-active-primary pb-4",{active:S.value==="payments"}]),onClick:t[3]||(t[3]=s=>S.value="payments")},t[37]||(t[37]=[D('<i class="ki-duotone ki-wallet fs-2 me-2" data-v-b97cd8de><span class="path1" data-v-b97cd8de></span><span class="path2" data-v-b97cd8de></span><span class="path3" data-v-b97cd8de></span><span class="path4" data-v-b97cd8de></span></i> Payment Processing ',2)]),2)]),e("li",qe,[e("a",{class:C(["nav-link text-active-primary pb-4",{active:S.value==="aging"}]),onClick:t[4]||(t[4]=s=>S.value="aging")},t[38]||(t[38]=[e("i",{class:"ki-duotone ki-chart-line fs-2 me-2"},[e("span",{class:"path1"}),e("span",{class:"path2"})],-1),L(" Aging Analysis ")]),2)])])]),e("div",Ve,[d.value?v("",!0):(l(),r("div",ze,t[39]||(t[39]=[D('<i class="ki-duotone ki-information-5 fs-2hx text-info me-4" data-v-b97cd8de><span class="path1" data-v-b97cd8de></span><span class="path2" data-v-b97cd8de></span><span class="path3" data-v-b97cd8de></span></i><div class="d-flex flex-column" data-v-b97cd8de><h4 class="mb-1 text-info" data-v-b97cd8de>Station Selection Required</h4><span class="fs-6" data-v-b97cd8de>Please select a station from the dropdown above to view and manage customer credit accounts.</span></div>',2)]))),S.value==="customers"&&d.value?(l(),r("div",Ge,[e("div",Xe,[e("div",Je,[t[40]||(t[40]=e("i",{class:"ki-duotone ki-magnifier fs-3 text-gray-500 position-absolute top-50 translate-middle ms-6"},[e("span",{class:"path1"}),e("span",{class:"path2"})],-1)),x(e("input",{"onUpdate:modelValue":t[5]||(t[5]=s=>H.value=s),type:"text",class:"form-control form-control-lg ps-13",placeholder:"Search customers..."},null,512),[[I,H.value]])]),e("button",{onClick:Dt,class:"btn btn-light-primary"},t[41]||(t[41]=[e("i",{class:"ki-duotone ki-plus fs-2"},[e("span",{class:"path1"}),e("span",{class:"path2"})],-1),L(" Add Customer ")]))]),pt.value.length>0?(l(),r("div",He,[(l(!0),r(E,null,X(pt.value,s=>(l(),r("div",{class:"col-12 col-md-6 col-xl-4",key:s.CustomerID},[e("div",We,[e("div",Ye,[e("div",Ke,[e("div",Qe,[e("div",Ze,[e("span",{class:C(["symbol-label",Ft(s.CustomerType)])},n(lt(s)),3)]),e("div",null,[e("div",ts,n(h(s)),1),e("div",es,n(s.CustomerCode),1)])])]),e("div",ss,[e("span",{class:C(["badge",bt(s.Status)])},n(s.Status),3)])]),e("div",as,[e("div",os,[e("div",ns,[t[42]||(t[42]=e("div",{class:"text-gray-500 fs-7"},"Type",-1)),e("div",is,n(s.CustomerType),1)]),e("div",rs,[t[43]||(t[43]=e("div",{class:"text-gray-500 fs-7"},"Contact",-1)),e("div",ls,n(s.PhoneNumber),1)]),e("div",ds,[t[44]||(t[44]=e("div",{class:"text-gray-500 fs-7"},"Registration",-1)),e("div",cs,n(q(s.RegistrationDate)),1)])]),t[45]||(t[45]=e("div",{class:"separator my-4"},null,-1)),e("div",us,[e("button",{onClick:o=>zt(s),class:"btn btn-sm btn-light-primary"}," View ",8,ms),e("button",{onClick:o=>Rt(s),class:"btn btn-sm btn-light-success"}," Credit ",8,ps)])])])]))),128))])):d.value&&!O.value?(l(),r("div",vs,[t[46]||(t[46]=D('<i class="ki-duotone ki-file-deleted fs-3x text-gray-400 mb-5" data-v-b97cd8de><span class="path1" data-v-b97cd8de></span><span class="path2" data-v-b97cd8de></span></i><h3 class="text-gray-600 mb-3" data-v-b97cd8de>No Customers Found</h3><p class="text-gray-500 mb-5" data-v-b97cd8de>No customers are registered for this station yet.</p>',3)),e("button",{onClick:Dt,class:"btn btn-primary"},"Add First Customer")])):v("",!0)])):v("",!0),S.value==="credit"&&d.value?(l(),r("div",fs,[e("div",gs,[e("div",bs,[x(e("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>T.value=s),class:"form-select w-150px"},t[47]||(t[47]=[D('<option value="" data-v-b97cd8de>All Accounts</option><option value="Active" data-v-b97cd8de>Active</option><option value="Inactive" data-v-b97cd8de>Inactive</option><option value="OverLimit" data-v-b97cd8de>Over Limit</option><option value="NearLimit" data-v-b97cd8de>Near Limit</option><option value="HighUtilization" data-v-b97cd8de>High Utilization</option>',6)]),512),[[G,T.value]])]),e("div",{class:"d-flex gap-2"},[e("button",{onClick:Ht,class:"btn btn-light-info"},t[48]||(t[48]=[e("i",{class:"ki-duotone ki-file-down fs-2"},[e("span",{class:"path1"}),e("span",{class:"path2"})],-1),L(" Report ")])),e("button",{onClick:kt,class:"btn btn-light-warning"},t[49]||(t[49]=[D('<i class="ki-duotone ki-scan-barcode fs-2" data-v-b97cd8de><span class="path1" data-v-b97cd8de></span><span class="path2" data-v-b97cd8de></span><span class="path3" data-v-b97cd8de></span><span class="path4" data-v-b97cd8de></span><span class="path5" data-v-b97cd8de></span><span class="path6" data-v-b97cd8de></span></i> Monitor ',2)]))])]),vt.value.length>0?(l(),r("div",ys,[(l(!0),r(E,null,X(vt.value,s=>(l(),r("div",{class:"col-12 col-md-6 col-xl-4",key:s.CreditAccountID},[e("div",{class:C(["card card-flush h-100 shadow-sm",Ut(s)])},[e("div",hs,[e("div",Cs,[e("div",ws,[e("div",xs,[e("span",As,n(lt(s)),1)]),e("div",null,[e("div",_s,n(h(s)),1),e("div",ks,n(s.CustomerCode),1)])])]),e("div",Ds,[e("span",{class:C(["badge",yt(V(s))])},n(V(s)),3)])]),e("div",Bs,[e("div",Ss,[e("div",Is,[t[50]||(t[50]=e("div",{class:"text-gray-500 fs-7"},"Credit Limit",-1)),e("div",$s," UGX "+n(p(s.CreditLimit)),1)]),e("div",Ps,[t[51]||(t[51]=e("div",{class:"text-gray-500 fs-7"},"Available",-1)),e("div",Ns," UGX "+n(p(s.AvailableCredit)),1)]),e("div",Ts,[t[52]||(t[52]=e("div",{class:"text-gray-500 fs-7"},"Outstanding",-1)),e("div",Fs," UGX "+n(p(s.CurrentBalance)),1)]),e("div",Us,[t[53]||(t[53]=e("div",{class:"text-gray-500 fs-7"},"Utilization",-1)),e("div",{class:C(["fw-bold",ht(R(s))])},n(R(s))+"% ",3)]),e("div",Ms,[t[54]||(t[54]=e("div",{class:"text-gray-500 fs-7"},"Credit Score",-1)),e("div",{class:C(["fw-bold",Ct(s.CreditScore)])},n(s.CreditScore)+"% ",3)]),e("div",Ls,[t[55]||(t[55]=e("div",{class:"text-gray-500 fs-7"},"Payment Terms",-1)),e("div",Rs,n(s.PaymentTermsDays)+" days",1)])]),t[56]||(t[56]=e("div",{class:"separator my-4"},null,-1)),e("div",Es,[e("button",{onClick:o=>jt(s),class:"btn btn-sm btn-light-warning"}," Adjust ",8,js),e("button",{onClick:o=>Ot(s),class:"btn btn-sm btn-light-success"}," Payment ",8,Os),e("button",{onClick:o=>Gt(s),class:"btn btn-sm btn-light-primary"}," Details ",8,qs)])])],2)]))),128))])):d.value&&!O.value?(l(),r("div",Vs,t[57]||(t[57]=[D('<i class="ki-duotone ki-wallet fs-3x text-gray-400 mb-5" data-v-b97cd8de><span class="path1" data-v-b97cd8de></span><span class="path2" data-v-b97cd8de></span><span class="path3" data-v-b97cd8de></span><span class="path4" data-v-b97cd8de></span></i><h3 class="text-gray-600 mb-3" data-v-b97cd8de>No Credit Accounts</h3><p class="text-gray-500" data-v-b97cd8de>No credit accounts are active for this station.</p>',3)]))):v("",!0)])):v("",!0),S.value==="payments"&&d.value?(l(),r("div",zs,[e("div",Gs,[e("div",Xs,[x(e("input",{"onUpdate:modelValue":t[7]||(t[7]=s=>W.value=s),type:"date",class:"form-control w-150px"},null,512),[[I,W.value]]),x(e("select",{"onUpdate:modelValue":t[8]||(t[8]=s=>Y.value=s),class:"form-select w-150px"},t[58]||(t[58]=[D('<option value="" data-v-b97cd8de>All Methods</option><option value="Cash" data-v-b97cd8de>Cash</option><option value="Bank Transfer" data-v-b97cd8de>Bank Transfer</option><option value="Mobile Money" data-v-b97cd8de>Mobile Money</option><option value="Card" data-v-b97cd8de>Card</option>',5)]),512),[[G,Y.value]]),x(e("select",{"onUpdate:modelValue":t[9]||(t[9]=s=>K.value=s),class:"form-select w-150px"},t[59]||(t[59]=[e("option",{value:""},"All Status",-1),e("option",{value:"Completed"},"Completed",-1),e("option",{value:"Pending"},"Pending",-1),e("option",{value:"Failed"},"Failed",-1)]),512),[[G,K.value]])]),e("button",{onClick:Wt,class:"btn btn-light-success"},t[60]||(t[60]=[e("i",{class:"ki-duotone ki-file-down fs-2"},[e("span",{class:"path1"}),e("span",{class:"path2"})],-1),L(" Export ")]))]),rt.value.length>0?(l(),r("div",Js,[e("table",Hs,[t[61]||(t[61]=e("thead",null,[e("tr",{class:"text-start text-gray-500 fw-bold fs-7 text-uppercase gs-0"},[e("th",null,"Date & Time"),e("th",null,"Customer"),e("th",null,"Amount"),e("th",null,"Method"),e("th",null,"Reference"),e("th",null,"Status"),e("th",{class:"text-end"},"Actions")])],-1)),e("tbody",Ws,[(l(!0),r(E,null,X(rt.value,s=>(l(),r("tr",{key:s.PaymentID},[e("td",null,n(ft(s.PaymentDate)),1),e("td",null,[e("div",Ys,[e("div",Ks,[e("span",Qs,n(lt(s)),1)]),e("div",null,[e("div",Zs,n(h(s)),1),e("div",ta,n(s.CustomerCode),1)])])]),e("td",ea," UGX "+n(p(s.PaymentAmount)),1),e("td",null,[e("span",sa,n(s.PaymentMethod),1)]),e("td",null,[e("div",aa,n(s.PaymentReference),1),s.MobileMoneyReference?(l(),r("div",oa,n(s.MobileMoneyReference),1)):v("",!0),s.BankReference?(l(),r("div",na,n(s.BankReference),1)):v("",!0)]),e("td",null,[e("span",{class:C(["badge",wt(s.Status)])},n(s.Status),3)]),e("td",ia,[e("button",{onClick:o=>Xt(s),class:"btn btn-sm btn-light-primary"}," View ",8,ra),s.Status==="Pending"?(l(),r("button",{key:0,onClick:o=>Vt(s),class:"btn btn-sm btn-light-success ms-1"}," Verify ",8,la)):v("",!0)])]))),128))])])])):d.value&&!O.value?(l(),r("div",da,t[62]||(t[62]=[D('<i class="ki-duotone ki-bill fs-3x text-gray-400 mb-5" data-v-b97cd8de><span class="path1" data-v-b97cd8de></span><span class="path2" data-v-b97cd8de></span><span class="path3" data-v-b97cd8de></span><span class="path4" data-v-b97cd8de></span><span class="path5" data-v-b97cd8de></span><span class="path6" data-v-b97cd8de></span></i><h3 class="text-gray-600 mb-3" data-v-b97cd8de>No Payments Found</h3><p class="text-gray-500" data-v-b97cd8de>No payment records match the current filters.</p>',3)]))):v("",!0)])):v("",!0),S.value==="aging"&&d.value?(l(),r("div",ca,[e("div",ua,[(l(!0),r(E,null,X($.value,s=>(l(),r("div",{class:"col-12 col-md-3",key:s.name},[e("div",ma,[e("div",pa,[e("div",va,[e("div",fa,[e("span",{class:C(["symbol-label",s.colorClass])},[e("i",{class:C(["ki-duotone ki-calendar fs-2",s.iconClass])},t[63]||(t[63]=[e("span",{class:"path1"},null,-1),e("span",{class:"path2"},null,-1)]),2)],2)]),e("div",ga,[e("span",ba,n(s.name),1),e("span",ya,"UGX "+n(p(s.amount)),1),e("span",ha,n(s.count)+" transactions",1)])])])])]))),128))]),Z.value.length>0?(l(),r("div",Ca,[e("table",wa,[t[64]||(t[64]=e("thead",null,[e("tr",{class:"text-start text-gray-500 fw-bold fs-7 text-uppercase gs-0"},[e("th",null,"Customer"),e("th",null,"Transaction Date"),e("th",null,"Amount"),e("th",null,"Outstanding"),e("th",null,"Days Outstanding"),e("th",null,"Aging Bucket"),e("th",{class:"text-end"},"Actions")])],-1)),e("tbody",xa,[(l(!0),r(E,null,X(Z.value,s=>(l(),r("tr",{key:s.TransactionID},[e("td",null,[e("div",Aa,n(s.CustomerName),1),e("div",_a,n(s.CustomerCode),1)]),e("td",null,n(q(s.TransactionDate)),1),e("td",ka,"UGX "+n(p(s.TotalAmount)),1),e("td",Da," UGX "+n(p(s.OutstandingAmount)),1),e("td",null,n(Math.floor(s.DaysOutstanding))+" days",1),e("td",null,[e("span",{class:C(["badge",xt(s.AgingBucket)])},n(s.AgingBucket),3)]),e("td",Ba,[e("button",{onClick:o=>Jt(s),class:"btn btn-sm btn-light-warning"}," Follow Up ",8,Sa)])]))),128))])])])):v("",!0)])):v("",!0)])]),e("div",Ia,[e("div",$a,[e("div",Pa,[t[77]||(t[77]=e("div",{class:"modal-header"},[e("h2",{class:"fw-bold"},"Add New Customer"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),e("div",Na,[e("form",{onSubmit:$t(Bt,["prevent"]),novalidate:""},[e("div",Ta,[e("div",Fa,[t[66]||(t[66]=e("label",{class:"required form-label"},"Customer Type",-1)),x(e("select",{"onUpdate:modelValue":t[10]||(t[10]=s=>i.CustomerType=s),class:C(["form-select form-select-lg",{"is-invalid":c.CustomerType}]),required:""},t[65]||(t[65]=[e("option",{value:"Individual"},"Individual",-1),e("option",{value:"Corporate"},"Corporate",-1),e("option",{value:"Fleet"},"Fleet",-1)]),2),[[G,i.CustomerType]]),c.CustomerType?(l(),r("div",Ua,n(c.CustomerType),1)):v("",!0)]),i.CustomerType==="Individual"?(l(),r("div",Ma,[t[67]||(t[67]=e("label",{class:"required form-label"},"First Name",-1)),x(e("input",{"onUpdate:modelValue":t[11]||(t[11]=s=>i.FirstName=s),type:"text",class:C(["form-control form-control-lg",{"is-invalid":c.FirstName}]),required:""},null,2),[[I,i.FirstName]]),c.FirstName?(l(),r("div",La,n(c.FirstName),1)):v("",!0)])):v("",!0),i.CustomerType==="Individual"?(l(),r("div",Ra,[t[68]||(t[68]=e("label",{class:"required form-label"},"Last Name",-1)),x(e("input",{"onUpdate:modelValue":t[12]||(t[12]=s=>i.LastName=s),type:"text",class:C(["form-control form-control-lg",{"is-invalid":c.LastName}]),required:""},null,2),[[I,i.LastName]]),c.LastName?(l(),r("div",Ea,n(c.LastName),1)):v("",!0)])):v("",!0),i.CustomerType!=="Individual"?(l(),r("div",ja,[t[69]||(t[69]=e("label",{class:"required form-label"},"Company Name",-1)),x(e("input",{"onUpdate:modelValue":t[13]||(t[13]=s=>i.CompanyName=s),type:"text",class:C(["form-control form-control-lg",{"is-invalid":c.CompanyName}]),required:""},null,2),[[I,i.CompanyName]]),c.CompanyName?(l(),r("div",Oa,n(c.CompanyName),1)):v("",!0)])):v("",!0),e("div",qa,[t[70]||(t[70]=e("label",{class:"required form-label"},"Phone Number",-1)),x(e("input",{"onUpdate:modelValue":t[14]||(t[14]=s=>i.PhoneNumber=s),type:"tel",class:C(["form-control form-control-lg",{"is-invalid":c.PhoneNumber}]),required:""},null,2),[[I,i.PhoneNumber]]),c.PhoneNumber?(l(),r("div",Va,n(c.PhoneNumber),1)):v("",!0)]),e("div",za,[t[71]||(t[71]=e("label",{class:"form-label"},"Email",-1)),x(e("input",{"onUpdate:modelValue":t[15]||(t[15]=s=>i.Email=s),type:"email",class:C(["form-control form-control-lg",{"is-invalid":c.Email}])},null,2),[[I,i.Email]]),c.Email?(l(),r("div",Ga,n(c.Email),1)):v("",!0)]),e("div",Xa,[t[72]||(t[72]=e("label",{class:"form-label"},"National ID",-1)),x(e("input",{"onUpdate:modelValue":t[16]||(t[16]=s=>i.NationalID=s),type:"text",class:"form-control form-control-lg"},null,512),[[I,i.NationalID]])]),e("div",Ja,[t[73]||(t[73]=e("label",{class:"form-label"},"Tax ID",-1)),x(e("input",{"onUpdate:modelValue":t[17]||(t[17]=s=>i.TaxID=s),type:"text",class:"form-control form-control-lg"},null,512),[[I,i.TaxID]])]),e("div",Ha,[t[74]||(t[74]=e("label",{class:"form-label"},"Address",-1)),x(e("textarea",{"onUpdate:modelValue":t[18]||(t[18]=s=>i.Address=s),class:"form-control form-control-lg",rows:"3"},null,512),[[I,i.Address]])])])],32)]),e("div",Wa,[t[76]||(t[76]=e("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal"},"Cancel",-1)),e("button",{onClick:Bt,class:"btn btn-primary",disabled:B.value},[B.value?(l(),r("span",Ka)):v("",!0),t[75]||(t[75]=L(" Add Customer "))],8,Ya)])])])],512),e("div",Qa,[e("div",Za,[e("div",to,[t[89]||(t[89]=e("div",{class:"modal-header"},[e("h2",{class:"fw-bold"},"Credit Adjustment"),e("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal"})],-1)),e("div",eo,[P.value?(l(),r("div",so,[e("div",ao,[e("div",oo,[e("div",no,n(h(P.value)),1),e("div",io,[e("div",ro,[t[78]||(t[78]=e("div",{class:"text-gray-500 fs-7"},"Current Limit",-1)),e("div",lo," UGX "+n(p(P.value.CreditLimit)),1)]),e("div",co,[t[79]||(t[79]=e("div",{class:"text-gray-500 fs-7"},"Outstanding",-1)),e("div",uo," UGX "+n(p(P.value.CurrentBalance)),1)]),e("div",mo,[t[80]||(t[80]=e("div",{class:"text-gray-500 fs-7"},"Available",-1)),e("div",po," UGX "+n(p(P.value.AvailableCredit)),1)]),e("div",vo,[t[81]||(t[81]=e("div",{class:"text-gray-500 fs-7"},"Utilization",-1)),e("div",fo,n(R(P.value))+"%",1)])])])]),e("form",{onSubmit:$t(St,["prevent"]),novalidate:""},[e("div",go,[t[83]||(t[83]=e("label",{class:"required form-label"},"Adjustment Type",-1)),x(e("select",{"onUpdate:modelValue":t[19]||(t[19]=s=>y.type=s),class:"form-select form-select-lg",required:""},t[82]||(t[82]=[e("option",{value:"limit_increase"},"Increase Credit Limit",-1),e("option",{value:"limit_decrease"},"Decrease Credit Limit",-1),e("option",{value:"balance_adjustment_positive"},"Increase Outstanding Balance",-1),e("option",{value:"balance_adjustment_negative"},"Decrease Outstanding Balance",-1)]),512),[[G,y.type]])]),e("div",bo,[t[84]||(t[84]=e("label",{class:"required form-label"},"Amount (UGX)",-1)),x(e("input",{"onUpdate:modelValue":t[20]||(t[20]=s=>y.amount=s),type:"number",class:"form-control form-control-lg",required:"",min:"0",step:"1000"},null,512),[[I,y.amount]])]),e("div",yo,[t[85]||(t[85]=e("label",{class:"required form-label"},"Reason",-1)),x(e("textarea",{"onUpdate:modelValue":t[21]||(t[21]=s=>y.reason=s),class:"form-control form-control-lg",rows:"3",required:"",placeholder:"Provide detailed justification for this adjustment..."},null,512),[[I,y.reason]])]),t[86]||(t[86]=e("div",{class:"alert alert-warning"},[e("strong",null,"Warning:"),L(" This adjustment will be logged for audit purposes and requires management approval. ")],-1))],32)])):v("",!0)]),e("div",ho,[t[88]||(t[88]=e("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal"},"Cancel",-1)),e("button",{onClick:St,class:"btn btn-warning",disabled:B.value},[B.value?(l(),r("span",wo)):v("",!0),t[87]||(t[87]=L(" Apply Adjustment "))],8,Co)])])])],512)],64))}},ko=Qt(xo,[["__scopeId","data-v-b97cd8de"]]);export{ko as default};
