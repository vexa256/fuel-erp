import { _ as bt, r as u, o as gt, q as yt, d as n, e as t, w as b, j as Z, F as tt, k as et, g, i as v, t as o, v as w, s as j, h as N, p as i, S as A } from "./index-Fk_fMhvq.js"; const wt = { class: "d-flex flex-column gap-5 p-5" }, ht = { key: 0, class: "alert alert-warning d-flex align-items-center" }, St = { class: "mt-1" }, xt = ["value"], It = { key: 1, class: "d-flex flex-column gap-7" }, Dt = { class: "card card-flush bg-gradient-primary" }, _t = { class: "card-body py-5 px-4 d-flex flex-column gap-3" }, kt = { class: "d-flex align-items-center justify-content-between" }, At = { class: "text-white fw-bolder fs-2x mb-2" }, Ct = { class: "badge badge-light-success fs-6" }, Pt = { class: "text-white-50 fs-6 mt-1" }, Nt = { class: "fw-bold" }, Ot = { class: "fw-bold" }, Tt = { class: "d-flex gap-3 mt-4" }, Ut = { class: "bg-white bg-opacity-10 rounded-3 p-4 text-center flex-fill" }, Bt = { class: "text-white fs-2hx fw-bold" }, qt = { class: "bg-white bg-opacity-10 rounded-3 p-4 text-center flex-fill" }, Mt = { class: "text-warning fs-2hx fw-bold" }, Vt = { class: "bg-white bg-opacity-10 rounded-3 p-4 text-center flex-fill" }, Gt = { class: "text-danger fs-2hx fw-bold" }, Lt = { class: "bg-white bg-opacity-10 rounded-3 p-4 text-center flex-fill" }, Xt = { class: "text-success fs-2hx fw-bold" }, jt = { class: "card card-flush" }, Rt = { class: "card-header bg-light-primary" }, $t = { class: "card-title fs-3 fw-bold text-primary" }, Et = { class: "fw-bolder" }, Jt = { class: "card-toolbar d-flex gap-2" }, Ft = { class: "card-body p-0" }, Ht = { key: 0, class: "py-20 text-center" }, zt = { key: 1 }, Yt = { key: 0, class: "text-center py-10 text-gray-500" }, Wt = { key: 1 }, Kt = { class: "row g-4" }, Qt = { class: "flex-fill" }, Zt = { class: "d-flex align-items-center gap-2" }, te = { class: "fw-bold fs-4" }, ee = { class: "fs-7 text-gray-600 mt-1" }, se = { class: "fw-bold" }, ae = { class: "fs-7 text-gray-600" }, oe = { class: "mt-1 d-flex gap-3 flex-wrap" }, le = { class: "fs-7" }, ne = { class: "fw-bold text-dark" }, ie = { class: "fs-7" }, de = { class: "fw-bold text-success" }, re = { class: "fs-7" }, ue = { class: "fw-bold text-danger" }, ce = { class: "d-flex flex-column gap-2" }, ve = ["onClick"], pe = ["onClick"], me = ["onClick"], fe = { class: "modal-dialog modal-dialog-centered" }, be = { class: "modal-content" }, ge = { class: "modal-header bg-primary" }, ye = { class: "modal-title text-white fw-bold" }, we = { class: "modal-body" }, he = { class: "row g-5" }, Se = { class: "col-12" }, xe = ["disabled"], Ie = ["value"], De = { key: 0, class: "text-danger" }, _e = { class: "col-12" }, ke = { key: 0, class: "text-danger" }, Ae = { class: "col-12 col-md-6" }, Ce = { key: 0, class: "text-danger" }, Pe = { class: "col-12 col-md-6" }, Ne = { key: 0, class: "text-danger" }, Oe = { class: "col-12" }, Te = { key: 0, class: "text-danger" }, Ue = { class: "col-12" }, Be = { key: 0, class: "col-12" }, qe = ["max"], Me = { class: "col-12" }, Ve = { class: "bg-light-info rounded p-4 text-center fw-bold" }, Ge = { class: "fs-3 text-danger" }, Le = { class: "modal-footer d-flex justify-content-between" }, Xe = ["disabled"], je = { key: 0 }, Re = { key: 1 }, $e = { key: 1 }, Ee = { class: "modal-header bg-light-primary" }, Je = { class: "modal-title text-primary fw-bold" }, Fe = { class: "modal-body" }, He = { class: "row g-3" }, ze = { class: "col-12" }, Ye = { class: "fw-bold fs-4 text-dark" }, We = { class: "fs-7 text-gray-600" }, Ke = { class: "col-6" }, Qe = { class: "fs-7 text-dark" }, Ze = { class: "col-6" }, ts = { class: "col-6" }, es = { class: "fs-7 text-dark" }, ss = { class: "col-6" }, as = { class: "fs-7 text-success" }, os = { class: "col-12" }, ls = { class: "fs-7 text-danger fw-bold" }, ns = { class: "col-12" }, is = { class: "fs-7 text-gray-600" }, ds = { class: "col-12" }, rs = { class: "modal-footer d-flex justify-content-between" }, us = { class: "modal-dialog modal-dialog-centered" }, cs = { class: "modal-content" }, vs = { class: "modal-body" }, ps = { class: "row g-5" }, ms = { class: "col-12" }, fs = ["max"], bs = { class: "col-12" }, gs = { class: "col-12" }, ys = { class: "col-12" }, ws = { class: "modal-footer" }, hs = ["disabled"], Ss = { key: 0 }, xs = { key: 1 }, Is = "https://backend.cloudfuelstationmis.com/api/records/v1", Ds = { __name: "InvoiceManagementHub", setup(_s) { const nt = localStorage.getItem("jwt") || "", _ = Number(localStorage.getItem("user_id")) || 4782875, R = u([]), $ = u([]), x = u([]), O = u(null), E = u(""), I = u(!1), r = u(""), J = u(!1), y = u("new"), p = u({}), l = u({}), c = u({}), T = u(!1), F = u([]), st = u([]), D = u({ total: 0, outstanding: 0, overdue: 0, paid: 0 }), H = u(!1), P = u({}), m = u({ amount: "", method: "Bank Transfer", ref: "", notes: "" }), U = u(!1), B = async ({ action: s = "-", table: e = "-", record: d = 0, changes: f = "-", station: k = null, user: a = null }) => { const X = { StationID: k || r.value || 0, UserID: a || _, Action: s || "-", TableName: e || "-", RecordID: d || 0, Changes: typeof f == "object" ? JSON.stringify(f) : f || "-", IPAddress: "-", LogTimestamp: new Date().toISOString() }; try { await h("/AuditLogs", { method: "POST", body: JSON.stringify(X) }) } catch (ft) { console.error("Audit log failed:", ft) } }, h = async (s, e = {}) => { let d = { Authorization: `Bearer ${nt}` }; e.method && (e.method === "POST" || e.method === "PATCH") && (d["Content-Type"] = "application/json"); let f = await fetch(Is + s, { ...e, headers: d }); if (!f.ok) { let k = "Unknown error"; try { k = (await f.json()).message || f.statusText } catch { } throw new Error(k) } return await f.json() }, it = async () => { I.value = !0; try { const s = await h("/Stations"); R.value = Array.isArray(s.records) ? s.records : [] } catch { } I.value = !1 }, dt = async () => { I.value = !0; try { const s = await h("/Suppliers"); $.value = Array.isArray(s.records) ? s.records : [] } catch { } I.value = !1 }, q = async () => { try { if (!r.value) return; const s = await h(`/SupplierCreditAccounts?StationID=${r.value}`); O.value = Array.isArray(s.records) && s.records.length ? s.records.find(e => String(e.StationID) === String(r.value)) || s.records[0] : null } catch { } }, M = async () => { I.value = !0; try { if (!r.value) { x.value = [], V(), z(), I.value = !1; return } const s = await h(`/SupplierInvoices?StationID=${r.value}`), e = Array.isArray(s.records) ? s.records : []; x.value = e.filter(d => String(d.StationID) === String(r.value)), V(), z() } catch { x.value = [], V(), z() } I.value = !1 }, V = () => { const s = E.value.toLowerCase(); F.value = x.value.filter(e => !s || String(e.InvoiceNumber).toLowerCase().includes(s) || Y(e.SupplierID).toLowerCase().includes(s)) }, z = () => { D.value.total = x.value.length, D.value.outstanding = x.value.filter(s => s.Status === "Outstanding").length, D.value.overdue = x.value.filter(s => s.Status === "Overdue").length, D.value.paid = x.value.filter(s => s.Status === "Paid").length }, Y = s => { const e = $.value.find(d => String(d.SupplierID) === String(s)); return (e == null ? void 0 : e.Name) || "Unknown" }, at = s => { const e = R.value.find(d => String(d.StationID) === String(s)); return (e == null ? void 0 : e.StationName) || "Unknown" }, S = s => Number(s || 0).toLocaleString("en-UG", { minimumFractionDigits: 2 }), G = s => s ? new Date(s).toLocaleDateString("en-UG", { year: "numeric", month: "short", day: "numeric" }) : "-", ot = s => ({ Outstanding: "badge-light-warning", Overdue: "badge-light-danger", Paid: "badge-light-success" })[s] || "badge-light", rt = s => ({ Outstanding: "border-warning", Overdue: "border-danger", Paid: "border-success" })[s.Status] || "border-light", lt = s => { const e = new Date(s.DueDate), d = new Date; return e < d ? "text-danger fw-bold" : (e - d) / 864e5 <= 7 ? "text-warning fw-bold" : "text-dark" }, W = (s, e) => { c.value = {}, J.value = !0, y.value = s, s === "view" ? p.value = { ...e } : s === "edit" ? (l.value = { ...e }, l.value.PaidAmount = Number(l.value.PaidAmount || 0), K()) : l.value = { SupplierID: "", StationID: r.value, InvoiceNumber: "", InvoiceDate: "", DueDate: "", TotalAmount: "", PaidAmount: 0, OutstandingAmount: "", Status: "Outstanding", Description: "", ReceivedBy: _ }, st.value = $.value.filter(d => d.Status === "Active") }, C = () => { J.value = !1, y.value = "new" }, ut = async () => { if (c.value = {}, l.value.SupplierID || (c.value.SupplierID = "Supplier required"), l.value.InvoiceNumber || (c.value.InvoiceNumber = "Invoice number required"), l.value.InvoiceDate || (c.value.InvoiceDate = "Invoice date required"), l.value.DueDate || (c.value.DueDate = "Due date required"), (!l.value.TotalAmount || Number(l.value.TotalAmount) <= 0) && (c.value.TotalAmount = "Amount required"), !Object.keys(c.value).length) { T.value = !0; try { let s = { ...l.value, StationID: r.value || 0, OutstandingAmount: Number(l.value.TotalAmount) - Number(l.value.PaidAmount || 0), Status: l.value.PaidAmount >= l.value.TotalAmount ? "Paid" : "Outstanding" }, e = y.value === "edit" ? "PATCH" : "POST", d = y.value === "edit" ? `/SupplierInvoices/${l.value.id}` : "/SupplierInvoices", f = await h(d, { method: e, body: JSON.stringify(s) }); await B({ action: y.value === "edit" ? "Edit" : "Create", table: "SupplierInvoices", record: f.id || s.InvoiceID || 0, changes: s, station: r.value, user: _ }), A.fire({ title: "Success!", text: "Invoice saved", icon: "success", toast: !0, timer: 2e3, position: "top-end", showConfirmButton: !1 }), C(), await M(), await q() } catch (s) { A.fire({ title: "Error", text: s.message, icon: "error", confirmButtonColor: "#f1416c" }) } T.value = !1 } }, K = () => { l.value.OutstandingAmount = Math.max(0, Number(l.value.TotalAmount || 0) - Number(l.value.PaidAmount || 0)) }, ct = s => { A.fire({ title: "Delete Invoice?", text: "This action cannot be undone.", icon: "warning", showCancelButton: !0, confirmButtonColor: "#f1416c", confirmButtonText: "Yes, delete", cancelButtonText: "Cancel" }).then(async e => { if (e.isConfirmed) try { await h(`/SupplierInvoices/${s.id}`, { method: "DELETE" }), await B({ action: "Delete", table: "SupplierInvoices", record: s.id || s.InvoiceID || 0, changes: s, station: r.value, user: _ }), A.fire({ title: "Deleted!", icon: "success", toast: !0, timer: 1500, position: "top-end", showConfirmButton: !1 }), await M(), await q() } catch (d) { A.fire({ title: "Delete failed", text: d.message, icon: "error", confirmButtonColor: "#f1416c" }) } }) }, vt = s => { H.value = !0, P.value = { ...s }, m.value = { amount: s.OutstandingAmount, method: "Bank Transfer", ref: "", notes: "" } }, L = () => { H.value = !1 }, pt = async () => { if (!(!m.value.amount || m.value.amount <= 0)) { U.value = !0; try { let s = { SupplierID: P.value.SupplierID, StationID: r.value || 0, PaymentReference: "PAY-" + Date.now(), PaymentDate: new Date().toISOString().split("T")[0], PaymentAmount: m.value.amount, PaymentMethod: m.value.method, BankReference: m.value.ref, Notes: m.value.notes, ProcessedBy: _, Status: "Completed" }, e = await h("/SupplierPayments", { method: "POST", body: JSON.stringify(s) }), d = { PaymentID: e.PaymentID || e.id || 0, InvoiceID: P.value.InvoiceID || P.value.id || 0, AllocatedAmount: m.value.amount, AllocationDate: new Date().toISOString().split("T")[0] }, f = await h("/SupplierPaymentAllocations", { method: "POST", body: JSON.stringify(d) }); await B({ action: "Create", table: "SupplierPayments", record: e.PaymentID || e.id || 0, changes: s, station: r.value, user: _ }), await B({ action: "Create", table: "SupplierPaymentAllocations", record: f.AllocationID || f.id || 0, changes: d, station: r.value, user: _ }), A.fire({ title: "Payment processed!", icon: "success", toast: !0, timer: 2e3, position: "top-end", showConfirmButton: !1 }), L(), await M(), await q() } catch (s) { A.fire({ title: "Payment Failed", text: s.message, icon: "error", confirmButtonColor: "#f1416c" }) } U.value = !1 } }, Q = async () => { await q(), await dt(), await M() }, mt = async () => { await Q() }; return gt(async () => { await it() }), yt(r, async () => { r.value && await Q() }), (s, e) => { var d, f, k; return i(), n("div", wt, [r.value ? (i(), n("div", It, [t("div", Dt, [t("div", _t, [t("div", kt, [t("div", null, [t("h2", At, [e[18] || (e[18] = t("i", { class: "ki-duotone ki-bill text-white fs-2 me-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" }), t("span", { class: "path3" })], -1)), v(" Station Invoices - " + o(at(r.value)), 1)]), t("span", Ct, o(((d = O.value) == null ? void 0 : d.CreditStatus) || "..."), 1), t("div", Pt, [e[19] || (e[19] = v(" Credit Limit: ")), t("span", Nt, "UGX " + o(S((f = O.value) == null ? void 0 : f.CreditLimit)), 1), e[20] || (e[20] = v("  |  Available: ")), t("span", Ot, "UGX " + o(S((k = O.value) == null ? void 0 : k.AvailableCredit)), 1)])]), t("button", { class: "btn btn-light-success btn-lg px-6 py-3 fw-bold", onClick: e[1] || (e[1] = a => W("new")) }, e[21] || (e[21] = [t("i", { class: "ki-duotone ki-plus fs-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1), v(" New Invoice ")]))]), t("div", Tt, [t("div", Ut, [t("div", Bt, o(D.value.total), 1), e[22] || (e[22] = t("div", { class: "text-white opacity-75 fs-7" }, "Invoices", -1))]), t("div", qt, [t("div", Mt, o(D.value.outstanding), 1), e[23] || (e[23] = t("div", { class: "text-white opacity-75 fs-7" }, "Outstanding", -1))]), t("div", Vt, [t("div", Gt, o(D.value.overdue), 1), e[24] || (e[24] = t("div", { class: "text-white opacity-75 fs-7" }, "Overdue", -1))]), t("div", Lt, [t("div", Xt, o(D.value.paid), 1), e[25] || (e[25] = t("div", { class: "text-white opacity-75 fs-7" }, "Paid", -1))])])])]), t("div", jt, [t("div", Rt, [t("div", $t, [e[26] || (e[26] = v(" Invoices for ")), t("span", Et, o(at(r.value)), 1)]), t("div", Jt, [b(t("input", { "onUpdate:modelValue": e[2] || (e[2] = a => E.value = a), class: "form-control form-control-solid form-control-lg", placeholder: "Search invoice number or supplier...", onInput: V }, null, 544), [[w, E.value]]), t("button", { class: "btn btn-light-primary", onClick: mt }, e[27] || (e[27] = [t("i", { class: "ki-duotone ki-arrows-circle fs-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)]))])]), t("div", Ft, [I.value ? (i(), n("div", Ht, e[28] || (e[28] = [t("div", { class: "spinner-border text-primary" }, null, -1)]))) : (i(), n("div", zt, [F.value.length === 0 ? (i(), n("div", Yt, e[29] || (e[29] = [t("i", { class: "ki-duotone ki-file-deleted fs-3x mb-3" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1), t("div", null, "No invoices found for this station", -1)]))) : (i(), n("div", Wt, [t("div", Kt, [(i(!0), n(tt, null, et(F.value, a => (i(), n("div", { key: a.id, class: "col-12" }, [t("div", { class: N(["card card-flush shadow-sm d-flex flex-row align-items-center p-4 gap-3", rt(a.Status)]) }, [t("div", Qt, [t("div", Zt, [e[30] || (e[30] = t("i", { class: "ki-duotone ki-bill fs-2 text-primary" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)), t("span", te, o(a.InvoiceNumber), 1), t("span", { class: N(["badge", ot(a.Status)]) }, o(a.Status), 3)]), t("div", ee, [e[31] || (e[31] = v(" Supplier: ")), t("span", se, o(Y(a.SupplierID)), 1), v(" | Date: " + o(G(a.InvoiceDate)), 1)]), t("div", ae, [e[32] || (e[32] = v(" Due: ")), t("span", { class: N(lt(a)) }, o(G(a.DueDate)), 3)]), t("div", oe, [t("span", le, [e[33] || (e[33] = v("Total: ")), t("span", ne, "UGX " + o(S(a.TotalAmount)), 1)]), t("span", ie, [e[34] || (e[34] = v("Paid: ")), t("span", de, "UGX " + o(S(a.PaidAmount)), 1)]), t("span", re, [e[35] || (e[35] = v("Outstanding: ")), t("span", ue, "UGX " + o(S(a.OutstandingAmount)), 1)])])]), t("div", ce, [t("button", { class: "btn btn-light-primary btn-sm", onClick: X => W("view", a) }, e[36] || (e[36] = [t("i", { class: "ki-duotone ki-eye fs-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)]), 8, ve), a.Status !== "Paid" ? (i(), n("button", { key: 0, class: "btn btn-light-warning btn-sm", onClick: X => W("edit", a) }, e[37] || (e[37] = [t("i", { class: "ki-duotone ki-pencil fs-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)]), 8, pe)) : g("", !0), a.Status !== "Paid" ? (i(), n("button", { key: 1, class: "btn btn-light-danger btn-sm", onClick: X => ct(a) }, e[38] || (e[38] = [t("i", { class: "ki-duotone ki-trash fs-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)]), 8, me)) : g("", !0)])], 2)]))), 128))])]))]))])]), J.value ? (i(), n("div", { key: 0, class: "modal fade show d-block", tabindex: "-1", style: { background: "rgba(0, 0, 0, 0.5)" }, onClick: j(C, ["self"]) }, [t("div", fe, [t("div", be, [y.value !== "view" ? (i(), n("form", { key: 0, onSubmit: j(ut, ["prevent"]), novalidate: "" }, [t("div", ge, [t("h3", ye, [e[39] || (e[39] = t("i", { class: "ki-duotone ki-bill text-white fs-2 me-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)), v(" " + o(y.value === "edit" ? "Edit Invoice" : "Record New Invoice"), 1)]), t("button", { class: "btn btn-icon btn-light btn-sm", onClick: C }, e[40] || (e[40] = [t("i", { class: "ki-duotone ki-cross fs-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)]))]), t("div", we, [t("div", he, [t("div", Se, [e[42] || (e[42] = t("label", { class: "form-label required" }, "Supplier", -1)), b(t("select", { "onUpdate:modelValue": e[3] || (e[3] = a => l.value.SupplierID = a), class: "form-select form-select-lg", required: "", disabled: y.value === "edit" }, [e[41] || (e[41] = t("option", { value: "", disabled: "" }, "Select supplier", -1)), (i(!0), n(tt, null, et(st.value, a => (i(), n("option", { key: a.SupplierID, value: a.SupplierID }, o(a.Name), 9, Ie))), 128))], 8, xe), [[Z, l.value.SupplierID]]), c.value.SupplierID ? (i(), n("div", De, o(c.value.SupplierID), 1)) : g("", !0)]), t("div", _e, [e[43] || (e[43] = t("label", { class: "form-label required" }, "Invoice Number", -1)), b(t("input", { "onUpdate:modelValue": e[4] || (e[4] = a => l.value.InvoiceNumber = a), type: "text", class: "form-control form-control-lg", required: "" }, null, 512), [[w, l.value.InvoiceNumber]]), c.value.InvoiceNumber ? (i(), n("div", ke, o(c.value.InvoiceNumber), 1)) : g("", !0)]), t("div", Ae, [e[44] || (e[44] = t("label", { class: "form-label required" }, "Invoice Date", -1)), b(t("input", { "onUpdate:modelValue": e[5] || (e[5] = a => l.value.InvoiceDate = a), type: "date", class: "form-control form-control-lg", required: "" }, null, 512), [[w, l.value.InvoiceDate]]), c.value.InvoiceDate ? (i(), n("div", Ce, o(c.value.InvoiceDate), 1)) : g("", !0)]), t("div", Pe, [e[45] || (e[45] = t("label", { class: "form-label required" }, "Due Date", -1)), b(t("input", { "onUpdate:modelValue": e[6] || (e[6] = a => l.value.DueDate = a), type: "date", class: "form-control form-control-lg", required: "" }, null, 512), [[w, l.value.DueDate]]), c.value.DueDate ? (i(), n("div", Ne, o(c.value.DueDate), 1)) : g("", !0)]), t("div", Oe, [e[46] || (e[46] = t("label", { class: "form-label required" }, "Total Amount (UGX)", -1)), b(t("input", { "onUpdate:modelValue": e[7] || (e[7] = a => l.value.TotalAmount = a), type: "number", step: "0.01", min: "0", class: "form-control form-control-lg", required: "", onInput: K }, null, 544), [[w, l.value.TotalAmount]]), c.value.TotalAmount ? (i(), n("div", Te, o(c.value.TotalAmount), 1)) : g("", !0)]), t("div", Ue, [e[47] || (e[47] = t("label", { class: "form-label" }, "Description", -1)), b(t("textarea", { "onUpdate:modelValue": e[8] || (e[8] = a => l.value.Description = a), rows: "2", class: "form-control form-control-lg" }, null, 512), [[w, l.value.Description]])]), y.value === "edit" ? (i(), n("div", Be, [e[48] || (e[48] = t("label", { class: "form-label" }, "Paid Amount (UGX)", -1)), b(t("input", { "onUpdate:modelValue": e[9] || (e[9] = a => l.value.PaidAmount = a), type: "number", step: "0.01", min: "0", max: l.value.TotalAmount, class: "form-control form-control-lg", onInput: K }, null, 40, qe), [[w, l.value.PaidAmount]])])) : g("", !0), t("div", Me, [t("div", Ve, [e[49] || (e[49] = v(" Outstanding: ")), t("span", Ge, "UGX " + o(S(l.value.OutstandingAmount)), 1)])])])]), t("div", Le, [t("button", { class: "btn btn-light", type: "button", onClick: C }, "Cancel"), t("button", { class: "btn btn-primary", disabled: T.value }, [T.value ? (i(), n("span", Re, e[50] || (e[50] = [v("Please wait... "), t("span", { class: "spinner-border spinner-border-sm" }, null, -1)]))) : (i(), n("span", je, o(y.value === "edit" ? "Update" : "Create") + " Invoice", 1))], 8, Xe)])], 32)) : (i(), n("div", $e, [t("div", Ee, [t("h3", Je, [e[51] || (e[51] = t("i", { class: "ki-duotone ki-bill text-primary fs-2 me-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)), v(" Invoice Details - " + o(p.value.InvoiceNumber), 1)]), t("button", { class: "btn btn-icon btn-light btn-sm", onClick: C }, e[52] || (e[52] = [t("i", { class: "ki-duotone ki-cross fs-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)]))]), t("div", Fe, [t("div", He, [t("div", ze, [t("div", Ye, o(Y(p.value.SupplierID)), 1), t("div", We, " Invoice Number: " + o(p.value.InvoiceNumber), 1)]), t("div", Ke, [e[53] || (e[53] = t("span", { class: "fw-semibold text-gray-700" }, "Invoice Date:", -1)), t("span", Qe, o(G(p.value.InvoiceDate)), 1)]), t("div", Ze, [e[54] || (e[54] = t("span", { class: "fw-semibold text-gray-700" }, "Due Date:", -1)), t("span", { class: N([lt(p.value), "fs-7"]) }, o(G(p.value.DueDate)), 3)]), t("div", ts, [e[55] || (e[55] = t("span", { class: "fw-semibold text-gray-700" }, "Total:", -1)), t("span", es, "UGX " + o(S(p.value.TotalAmount)), 1)]), t("div", ss, [e[56] || (e[56] = t("span", { class: "fw-semibold text-gray-700" }, "Paid:", -1)), t("span", as, "UGX " + o(S(p.value.PaidAmount)), 1)]), t("div", os, [e[57] || (e[57] = t("span", { class: "fw-semibold text-gray-700" }, "Outstanding:", -1)), t("span", ls, "UGX " + o(S(p.value.OutstandingAmount)), 1)]), t("div", ns, [e[58] || (e[58] = t("span", { class: "fw-semibold text-gray-700" }, "Description:", -1)), t("span", is, o(p.value.Description || "-"), 1)]), t("div", ds, [e[59] || (e[59] = t("span", { class: "fw-semibold text-gray-700" }, "Status:", -1)), t("span", { class: N(["badge", ot(p.value.Status)]) }, o(p.value.Status), 3)])])]), t("div", rs, [t("button", { class: "btn btn-light", onClick: C }, "Close"), p.value.Status === "Outstanding" || p.value.Status === "Overdue" ? (i(), n("button", { key: 0, class: "btn btn-light-success", onClick: e[10] || (e[10] = a => vt(p.value)) }, " Process Payment ")) : g("", !0)])]))])])])) : g("", !0), H.value ? (i(), n("div", { key: 1, class: "modal fade show d-block", tabindex: "-1", style: { background: "rgba(0, 0, 0, 0.5)" }, onClick: j(L, ["self"]) }, [t("div", us, [t("div", cs, [t("form", { onSubmit: j(pt, ["prevent"]), novalidate: "" }, [t("div", { class: "modal-header bg-success" }, [e[61] || (e[61] = t("h3", { class: "modal-title text-white fw-bold" }, [t("i", { class: "ki-duotone ki-wallet text-white fs-2 me-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })]), v(" Process Supplier Payment ")], -1)), t("button", { class: "btn btn-icon btn-light btn-sm", onClick: L }, e[60] || (e[60] = [t("i", { class: "ki-duotone ki-cross fs-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)]))]), t("div", vs, [t("div", ps, [t("div", ms, [e[62] || (e[62] = t("label", { class: "form-label required" }, "Amount (UGX)", -1)), b(t("input", { "onUpdate:modelValue": e[11] || (e[11] = a => m.value.amount = a), type: "number", min: "1", max: P.value.OutstandingAmount, class: "form-control form-control-lg", required: "" }, null, 8, fs), [[w, m.value.amount]])]), t("div", bs, [e[64] || (e[64] = t("label", { class: "form-label required" }, "Payment Method", -1)), b(t("select", { "onUpdate:modelValue": e[12] || (e[12] = a => m.value.method = a), class: "form-select form-select-lg", required: "" }, e[63] || (e[63] = [t("option", { value: "Bank Transfer" }, "Bank Transfer", -1), t("option", { value: "Cash" }, "Cash", -1), t("option", { value: "Check" }, "Check", -1), t("option", { value: "Mobile Money" }, "Mobile Money", -1)]), 512), [[Z, m.value.method]])]), t("div", gs, [e[65] || (e[65] = t("label", { class: "form-label" }, "Reference (Bank/Receipt)", -1)), b(t("input", { "onUpdate:modelValue": e[13] || (e[13] = a => m.value.ref = a), type: "text", class: "form-control form-control-lg", placeholder: "Optional" }, null, 512), [[w, m.value.ref]])]), t("div", ys, [e[66] || (e[66] = t("label", { class: "form-label" }, "Notes", -1)), b(t("textarea", { "onUpdate:modelValue": e[14] || (e[14] = a => m.value.notes = a), rows: "2", class: "form-control form-control-lg" }, null, 512), [[w, m.value.notes]])])])]), t("div", ws, [t("button", { class: "btn btn-light", type: "button", onClick: L }, "Cancel"), t("button", { class: "btn btn-success", disabled: U.value }, [U.value ? (i(), n("span", xs, e[67] || (e[67] = [v("Please wait... "), t("span", { class: "spinner-border spinner-border-sm" }, null, -1)]))) : (i(), n("span", Ss, "Submit Payment"))], 8, hs)])], 32)])])])) : g("", !0)])) : (i(), n("div", ht, [e[17] || (e[17] = t("i", { class: "ki-duotone ki-warning-2 fs-1 text-warning me-3" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)), t("div", null, [e[16] || (e[16] = t("span", { class: "fw-bold fs-5 text-warning" }, "Select a Station to Manage Supplier Invoices", -1)), t("div", St, [b(t("select", { "onUpdate:modelValue": e[0] || (e[0] = a => r.value = a), class: "form-select form-select-lg form-select-solid w-100 mt-2", onChange: Q }, [e[15] || (e[15] = t("option", { value: "", disabled: "", selected: "" }, "Select Station", -1)), (i(!0), n(tt, null, et(R.value, a => (i(), n("option", { key: a.StationID, value: a.StationID }, o(a.StationName) + " (" + o(a.Location) + ") ", 9, xt))), 128))], 544), [[Z, r.value]])])])]))]) } } }, As = bt(Ds, [["__scopeId", "data-v-1d3bc737"]]); export { As as default };
