import{_ as Nt,r as v,c as ot,s as $t,o as Et,b as h,e as B,g as y,d as t,w as tt,m as jt,F as P,h as T,f as F,t as o,n as k,v as dt,S as V,k as Qt,i as g,j as Ot}from"./index-BJk99QVQ.js";import{C as A,r as Yt}from"./chart-DUfl3Dpl.js";const Jt={class:"d-flex flex-column gap-7 p-5"},Wt={key:0,class:"d-flex flex-column gap-7"},Ht={class:"card card-flush"},qt={class:"card-body"},Zt={class:"row g-5"},Gt={class:"col-12"},Kt=["disabled"],Xt=["value"],ta={key:0,class:"col-12"},aa=["disabled"],ea={key:0},sa={key:1},na={key:1,class:"d-flex flex-column gap-7"},la={class:"card card-flush bg-gradient-primary"},ia={class:"card-body p-6"},oa={class:"d-flex align-items-center justify-content-between flex-wrap gap-3"},da={class:"d-flex align-items-center"},ra={class:"fw-bold fs-2x text-white mb-1"},ca={class:"text-white opacity-75 fs-5 mb-0"},ua={class:"d-flex gap-3"},pa={key:0,class:"card card-flush border-primary"},va={class:"card-body"},ha={class:"mb-8"},ga={class:"row g-3"},ma=["onClick"],fa={class:"fw-bold fs-7"},ba={class:"row g-5"},ya={class:"col-12 col-md-5"},wa=["max"],ka={class:"col-12 col-md-5"},Da=["min","max"],_a={class:"col-12 col-md-2 d-flex align-items-end"},xa=["disabled"],Ca={class:"text-center mt-6"},Sa={class:"row g-5"},Fa={class:"col-12 col-md-3"},Aa={class:"card card-flush bg-light-danger h-100"},Ra={class:"card-body text-center p-6"},Ia={class:"fw-bold fs-2x text-gray-900"},La={class:"badge badge-light-danger mt-2"},Ma={class:"col-12 col-md-3"},Va={class:"card card-flush bg-light-success h-100"},Ba={class:"card-body text-center p-6"},Pa={class:"fw-bold fs-2x text-gray-900"},Ta={class:"badge badge-light-success mt-2"},za={class:"col-12 col-md-3"},Ua={class:"card card-flush bg-light-warning h-100"},Na={class:"card-body text-center p-6"},$a={class:"fw-bold fs-2x text-gray-900"},Ea={class:"badge badge-light-warning mt-2"},ja={class:"col-12 col-md-3"},Qa={class:"card card-flush bg-light-info h-100"},Oa={class:"card-body text-center p-6"},Ya={class:"fw-bold fs-2x text-gray-900"},Ja={class:"row g-5"},Wa={class:"col-12 col-lg-6"},Ha={class:"card card-flush h-100"},qa={class:"card-header"},Za={class:"badge badge-light-primary"},Ga={class:"card-body"},Ka={class:"col-12 col-lg-6"},Xa={class:"card card-flush h-100"},te={class:"card-body"},ae={class:"row g-5"},ee={class:"col-12 col-lg-6"},se={class:"card card-flush h-100"},ne={class:"card-header"},le={class:"badge badge-light-info"},ie={class:"card-body"},oe={class:"col-12 col-lg-6"},de={class:"card card-flush h-100"},re={class:"card-header"},ce={class:"badge badge-light-warning"},ue={class:"card-body"},pe={class:"card card-flush"},ve={class:"card-header"},he={class:"badge badge-light-primary"},ge={class:"card-body"},me={class:"card card-flush"},fe={class:"card-header"},be={class:"badge badge-light-success"},ye={class:"card-body"},we={key:0,class:"text-center p-8"},ke={key:1,class:"row g-5"},De={class:"card-body p-6"},_e={class:"d-flex align-items-start gap-4"},xe={class:"flex-grow-1"},Ce={class:"fw-bold text-gray-900 mb-2"},Se={class:"text-gray-700 mb-3"},Fe={class:"card card-flush"},Ae={class:"card-body"},Re={class:"table-responsive"},Ie={class:"table align-middle table-row-dashed fs-6 gy-3"},Le={class:"fw-semibold text-gray-600"},Me={class:"d-flex align-items-center"},Ve={class:"fw-bold text-gray-900"},Be={class:"d-flex align-items-center"},Pe={class:"progress h-6px w-100px me-3"},Te={class:"fw-bold fs-7"},ze={class:"fw-bold"},R="https://backend.cloudfuelstationmis.com/api/records/v1",Ue={__name:"CreditTransactionAuditView",setup(Ne){A.register(...Yt);const x=v(!1),m=v(""),z=v([]),U=v([]),w=v([]),at=v([]),_=v([]),rt=v([]),I=v(!1),r=v(""),c=v(""),L=v("last30days"),C=v(!1),N=v(null),$=v(null),E=v(null),j=v(null),Q=v(null);let O=null,Y=null,J=null,W=null,H=null;const S=localStorage.getItem("jwt")||"eyJ0eXAiOiJKV1QiLCJhbGciOiJFZERTQSJ9.eyJzdWIiOiJkMDc1QVZVSVNCcW9HN3dvZFV0MVZ3PT0iLCJpYXQiOjE3NTAyNDc4ODgsImV4cCI6MTc1MDI1MTQ4OCwiZW1haWwiOiJhZG1pbkBsb2NhbGhvc3QiLCJjc3JmX3Rva2VuIjoiOWdWQmpzU0MzN1NBTmVhU3pCelQifQ.i-Lj_KsB-TXZ1vgsu4CPEdICamdOznhKDh42Jx7oi4F29K5voeBER5bBycrnQ0uK7-G45F-18SibATxo_F3rBQ",D=v({riskScore:0,paymentVelocity:0,creditUtilization:0,recommendations:[],cashflowForecast:[],supplierRanking:[]}),et=[{value:"today",label:"Today",icon:"calendar-2"},{value:"yesterday",label:"Yesterday",icon:"calendar"},{value:"thisweek",label:"This Week",icon:"calendar-8"},{value:"lastweek",label:"Last Week",icon:"calendar-8"},{value:"thismonth",label:"This Month",icon:"calendar-tick"},{value:"lastmonth",label:"Last Month",icon:"calendar-tick"},{value:"last30days",label:"Last 30 Days",icon:"calendar-search"},{value:"last90days",label:"Last 90 Days",icon:"calendar-search"},{value:"thisquarter",label:"This Quarter",icon:"chart-pie-4"},{value:"lastquarter",label:"Last Quarter",icon:"chart-pie-4"},{value:"thisyear",label:"This Year",icon:"calendar-add"},{value:"lastyear",label:"Last Year",icon:"calendar-add"},{value:"custom",label:"Custom Range",icon:"calendar-edit"}],ct=s=>({danger:"border-danger",warning:"border-warning",info:"border-info",success:"border-success"})[s]||"",ut=s=>({danger:"ki-danger text-danger",warning:"ki-warning text-warning",info:"ki-information text-info",success:"ki-check-circle text-success"})[s]||"",pt=s=>({danger:"btn-light-danger",warning:"btn-light-warning",info:"btn-light-info",success:"btn-light-success"})[s]||"",vt=s=>s<3?"badge-success":s>=3&&s<7?"badge-warning":"badge-light",ht=s=>s>=70?"bg-success":s>=40?"bg-warning":"bg-danger",gt=s=>({Low:"badge-light-success",Medium:"badge-light-warning",High:"badge-light-danger"})[s]||"badge-light",mt=s=>({Normal:"badge-light-success","Near Limit":"badge-light-warning","Over Limit":"badge-light-danger"})[s]||"badge-light",ft=s=>new Intl.NumberFormat("en-UG",{style:"currency",currency:"UGX",minimumFractionDigits:0,maximumFractionDigits:0}).format(s||0),q=s=>{const a=new Date,e=new Date(a.getFullYear(),a.getMonth(),a.getDate());switch(s){case"today":r.value=d(e),c.value=d(e);break;case"yesterday":const n=new Date(e);n.setDate(n.getDate()-1),r.value=d(n),c.value=d(n);break;case"thisweek":const l=new Date(e);l.setDate(e.getDate()-e.getDay()),r.value=d(l),c.value=d(e);break;case"lastweek":const i=new Date(e);i.setDate(e.getDate()-e.getDay()-1);const u=new Date(i);u.setDate(i.getDate()-6),r.value=d(u),c.value=d(i);break;case"thismonth":const p=new Date(e.getFullYear(),e.getMonth(),1);r.value=d(p),c.value=d(e);break;case"lastmonth":const b=new Date(e.getFullYear(),e.getMonth()-1,1),M=new Date(e.getFullYear(),e.getMonth(),0);r.value=d(b),c.value=d(M);break;case"last30days":const st=new Date(e);st.setDate(e.getDate()-30),r.value=d(st),c.value=d(e);break;case"last90days":const nt=new Date(e);nt.setDate(e.getDate()-90),r.value=d(nt),c.value=d(e);break;case"thisquarter":const Mt=Math.floor(e.getMonth()/3),Vt=new Date(e.getFullYear(),Mt*3,1);r.value=d(Vt),c.value=d(e);break;case"lastquarter":const X=Math.floor(e.getMonth()/3)-1,lt=X<0?e.getFullYear()-1:e.getFullYear(),it=X<0?3:X,Bt=new Date(lt,it*3,1),Pt=new Date(lt,it*3+3,0);r.value=d(Bt),c.value=d(Pt);break;case"thisyear":const Tt=new Date(e.getFullYear(),0,1);r.value=d(Tt),c.value=d(e);break;case"lastyear":const zt=new Date(e.getFullYear()-1,0,1),Ut=new Date(e.getFullYear()-1,11,31);r.value=d(zt),c.value=d(Ut);break}s!=="custom"&&(L.value=s,I.value&&G())},d=s=>s.toISOString().split("T")[0],bt=()=>{if(!r.value||!c.value){V.fire({title:"Invalid Date Range",text:"Please select both start and end dates",icon:"warning",confirmButtonColor:"#FFA800"});return}if(new Date(r.value)>new Date(c.value)){V.fire({title:"Invalid Date Range",text:"Start date cannot be after end date",icon:"warning",confirmButtonColor:"#FFA800"});return}L.value="custom",G(),C.value=!1},f=ot(()=>{const s=et.find(a=>a.value===L.value);return s&&L.value!=="custom"?s.label:r.value&&c.value?`${new Date(r.value).toLocaleDateString()} - ${new Date(c.value).toLocaleDateString()}`:"Last 30 Days"}),Z=(s,a)=>{if(!r.value||!c.value)return s;const e=new Date(r.value),n=new Date(c.value);return n.setHours(23,59,59,999),s.filter(l=>{if(!l[a])return!1;const i=new Date(l[a]);return i>=e&&i<=n})},yt=async()=>{x.value=!0;try{const s=await fetch(`${R}/Stations`,{method:"GET",headers:{Authorization:`Bearer ${S}`,"Content-Type":"application/json"}});if(!s.ok)throw new Error(`Failed to fetch stations: ${s.status}`);const a=await s.json();z.value=a.records||[]}catch(s){console.error("Error fetching stations:",s),V.fire({title:"Error!",text:"Failed to load stations",icon:"error",confirmButtonColor:"#f1416c"})}finally{x.value=!1}},G=async()=>{if(m.value){x.value=!0;try{const s=await fetch(`${R}/Suppliers`,{headers:{Authorization:`Bearer ${S}`}});if(s.ok){const i=await s.json();U.value=i.records||[]}const a=await fetch(`${R}/SupplierCreditAccounts`,{headers:{Authorization:`Bearer ${S}`}});if(a.ok){const u=(await a.json()).records||[];w.value=u.map(p=>{const b=U.value.find(M=>M.SupplierID===p.SupplierID);return{...p,SupplierName:(b==null?void 0:b.Name)||"Unknown Supplier",CreditStatus:wt(p)}}).filter(p=>!m.value||p.StationID==m.value)}const e=await fetch(`${R}/SupplierInvoices`,{headers:{Authorization:`Bearer ${S}`}});if(e.ok){const u=(await e.json()).records||[];at.value=Z(u.filter(p=>!m.value||p.StationID==m.value),"InvoiceDate")}const n=await fetch(`${R}/SupplierPayments`,{headers:{Authorization:`Bearer ${S}`}});if(n.ok){const u=(await n.json()).records||[];_.value=Z(u.filter(p=>!m.value||p.StationID==m.value),"PaymentDate")}const l=await fetch(`${R}/SupplierCreditTransactions`,{headers:{Authorization:`Bearer ${S}`}});if(l.ok){const u=(await l.json()).records||[];rt.value=Z(u.filter(p=>!m.value||p.StationID==m.value),"CreatedAt")}xt(),I.value=!0,await Qt(),Ct(),V.fire({title:"Success!",text:`Credit data loaded for ${f.value}`,icon:"success",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1})}catch(s){console.error("Error fetching credit data:",s),V.fire({title:"Error!",text:`Failed to load credit data: ${s.message}`,icon:"error",confirmButtonColor:"#f1416c"})}finally{x.value=!1}}},wt=s=>{const a=parseFloat(s.CreditLimit)||0,e=parseFloat(s.CurrentBalance)||0;return e>a?"Over Limit":e>a*.9?"Near Limit":"Normal"},K=s=>{const a=parseFloat(s.CreditLimit)||0,e=parseFloat(s.CurrentBalance)||0,l=(a>0?e/a:0)*100;return Math.min(100,Math.max(0,l))},kt=()=>{if(_.value.length===0)return 50;const s=_.value.sort((l,i)=>new Date(i.PaymentDate)-new Date(l.PaymentDate));if(s.length<2)return 50;const a=[];for(let l=1;l<Math.min(s.length,10);l++){const i=new Date(s[l-1].PaymentDate),u=new Date(s[l].PaymentDate);a.push((i-u)/(1e3*60*60*24))}const e=a.reduce((l,i)=>l+i,0)/a.length,n=Math.max(0,100-e*2);return Math.min(100,n)},Dt=()=>{const s=[],a=_.value.length>0?_.value.reduce((n,l)=>n+parseFloat(l.PaymentAmount||0),0)/_.value.length*30:0,e=new Date;for(let n=0;n<6;n++){const l=new Date(e);l.setMonth(l.getMonth()+n);const i=l.getMonth()>=9?1.2:l.getMonth()<=2?.8:1,u=a*i;s.push({month:l.toLocaleDateString("en-US",{month:"short",year:"numeric"}),projected:Math.round(u),confidence:Math.max(60,90-n*5)})}return s},_t=()=>U.value.map(s=>{const a=w.value.find(b=>b.SupplierID===s.SupplierID);if(!a)return null;const e=K(a),l=_.value.filter(b=>b.SupplierID===s.SupplierID).reduce((b,M)=>b+parseFloat(M.PaymentAmount||0),0),i=Math.min(100,l/1e5*100),u=100-e,p=i*.4+u*.6;return{name:s.Name||"Unknown Supplier",strategicValue:Math.round(p),creditLimit:parseFloat(a.CreditLimit)||0,periodVolume:l,riskLevel:e<30?"Low":e<60?"Medium":"High",status:a.CreditStatus||"Unknown"}}).filter(Boolean).sort((s,a)=>a.strategicValue-s.strategicValue),xt=()=>{if(w.value.length===0){D.value={riskScore:0,paymentVelocity:0,creditUtilization:0,recommendations:[],cashflowForecast:[],supplierRanking:[]};return}const s=w.value.reduce((u,p)=>u+parseFloat(p.CreditLimit||0),0),a=w.value.reduce((u,p)=>u+parseFloat(p.CurrentBalance||0),0),e=w.value.reduce((u,p)=>u+K(p),0)/w.value.length,n=s>0?a/s*100:0,l=kt(),i=[];n>80&&i.push({type:"warning",title:"High Credit Utilization",message:`Credit utilization at ${n.toFixed(1)}% for selected period.`,action:"Review Credit Policies"}),e>70&&i.push({type:"danger",title:"Elevated Risk Profile",message:`Average risk score ${e.toFixed(1)}% during ${f.value}.`,action:"Conduct Risk Assessment"}),l<40&&i.push({type:"info",title:"Slow Payment Velocity",message:`Payment velocity ${l.toFixed(1)}% for selected period.`,action:"Optimize Payment Terms"}),D.value={riskScore:Math.round(e),paymentVelocity:Math.round(l),creditUtilization:Math.round(n),recommendations:i,cashflowForecast:Dt(),supplierRanking:_t()}},Ct=()=>{St(),Ft(),At(),Rt(),It()},St=()=>{if(!N.value)return;const s={Low:0,Medium:0,High:0};w.value.forEach(e=>{const n=K(e);n<30?s.Low++:n<60?s.Medium++:s.High++});const a=N.value.getContext("2d");O&&O.destroy(),O=new A(a,{type:"doughnut",data:{labels:["Low Risk","Medium Risk","High Risk"],datasets:[{data:[s.Low,s.Medium,s.High],backgroundColor:["#1BC5BD","#FFA800","#F64E60"],borderWidth:0}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom",labels:{padding:20,usePointStyle:!0}}}}})},Ft=()=>{if(!$.value)return;const s=w.value.slice(0,8).map(e=>({supplier:(e.SupplierName||"Unknown").substring(0,12),utilization:parseFloat(e.CreditLimit)>0?parseFloat(e.CurrentBalance)/parseFloat(e.CreditLimit)*100:0})).sort((e,n)=>n.utilization-e.utilization),a=$.value.getContext("2d");Y&&Y.destroy(),Y=new A(a,{type:"bar",data:{labels:s.map(e=>e.supplier),datasets:[{label:"Utilization %",data:s.map(e=>e.utilization),backgroundColor:"#FFA800",borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0,max:100}}}})},At=()=>{if(!E.value)return;const s={};_.value.forEach(n=>{if(n.PaymentDate){const l=new Date(n.PaymentDate).toLocaleDateString("en-US",{month:"short",day:"numeric"});s[l]=(s[l]||0)+parseFloat(n.PaymentAmount||0)}});const a=Object.entries(s).slice(-10).map(([n,l])=>({day:n,amount:Math.round(l)})),e=E.value.getContext("2d");J&&J.destroy(),J=new A(e,{type:"line",data:{labels:a.map(n=>n.day),datasets:[{label:"Payment Amount",data:a.map(n=>n.amount),borderColor:"#1BC5BD",backgroundColor:"rgba(27, 197, 189, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}}})},Rt=()=>{if(!j.value)return;const s={Current:0,"1-30 Days":0,"31-60 Days":0,"60+ Days":0},a=new Date;at.value.forEach(l=>{if(l.InvoiceDate){const i=Math.floor((a-new Date(l.InvoiceDate))/864e5);i<=0?s.Current++:i<=30?s["1-30 Days"]++:i<=60?s["31-60 Days"]++:s["60+ Days"]++}});const e=Object.entries(s).map(([l,i])=>({age:l,count:i})),n=j.value.getContext("2d");W&&W.destroy(),W=new A(n,{type:"bar",data:{labels:e.map(l=>l.age),datasets:[{label:"Invoice Count",data:e.map(l=>l.count),backgroundColor:"#8950FC",borderRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}})},It=()=>{if(!Q.value)return;const s=D.value.cashflowForecast,a=Q.value.getContext("2d");H&&H.destroy(),H=new A(a,{type:"line",data:{labels:s.map(e=>e.month),datasets:[{label:"Projected Amount",data:s.map(e=>e.projected),borderColor:"#3699FF",backgroundColor:"rgba(54, 153, 255, 0.1)",fill:!0,tension:.4},{label:"Confidence Level",data:s.map(e=>e.confidence),borderColor:"#8950FC",borderDash:[5,5],fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}})};$t(m,s=>{s?q("last30days"):I.value=!1});const Lt=ot(()=>{const s=z.value.find(a=>a.StationID&&a.StationID.toString()===m.value);return(s==null?void 0:s.StationName)||""});return Et(()=>{q("last30days"),yt()}),(s,a)=>(g(),h("div",Jt,[I.value?B("",!0):(g(),h("div",Wt,[a[10]||(a[10]=y('<div class="card card-flush bg-light-primary" data-v-dda9e69d><div class="card-body text-center p-8" data-v-dda9e69d><i class="ki-duotone ki-bank fs-4x text-primary mb-5" data-v-dda9e69d><span class="path1" data-v-dda9e69d></span><span class="path2" data-v-dda9e69d></span></i><h1 class="fw-bold fs-2x text-gray-900 mb-3" data-v-dda9e69d>Supplier Credit Analytics</h1><p class="fs-5 text-gray-700 mb-0" data-v-dda9e69d> AI-powered credit monitoring with advanced date filtering </p></div></div>',1)),t("div",Ht,[a[9]||(a[9]=y('<div class="card-header" data-v-dda9e69d><h3 class="card-title fw-bold text-gray-900" data-v-dda9e69d><i class="ki-duotone ki-geolocation fs-2 text-primary me-3" data-v-dda9e69d><span class="path1" data-v-dda9e69d></span><span class="path2" data-v-dda9e69d></span></i> Select Station for Analysis </h3></div>',1)),t("div",qt,[t("div",Zt,[t("div",Gt,[a[6]||(a[6]=t("label",{class:"form-label required fs-4 fw-bold text-gray-900"},"Station Location",-1)),tt(t("select",{"onUpdate:modelValue":a[0]||(a[0]=e=>m.value=e),class:"form-select form-select-lg form-select-solid",disabled:x.value},[a[5]||(a[5]=t("option",{value:""},"Choose a station to analyze...",-1)),(g(!0),h(P,null,T(z.value,e=>(g(),h("option",{key:e.StationID,value:e.StationID},o(e.StationName)+" - "+o(e.Location),9,Xt))),128))],8,Kt),[[jt,m.value]])]),m.value?(g(),h("div",ta,[t("button",{onClick:G,class:"btn btn-lg btn-light-success w-100",disabled:x.value},[x.value?(g(),h("span",sa,a[8]||(a[8]=[t("span",{class:"spinner-border spinner-border-sm me-3"},null,-1),F(" Loading credit data... ")]))):(g(),h("span",ea,a[7]||(a[7]=[t("i",{class:"ki-duotone ki-chart-line-up fs-2 me-3"},[t("span",{class:"path1"}),t("span",{class:"path2"})],-1),F(" Launch Credit Analytics Dashboard ")])))],8,aa)])):B("",!0)])])])])),I.value?(g(),h("div",na,[t("div",la,[t("div",ia,[t("div",oa,[t("div",da,[a[11]||(a[11]=t("i",{class:"ki-duotone ki-chart-pie-3 fs-3x text-white me-4"},[t("span",{class:"path1"}),t("span",{class:"path2"}),t("span",{class:"path3"})],-1)),t("div",null,[t("h1",ra,o(Lt.value),1),t("p",ca,"Period: "+o(f.value),1)])]),t("div",ua,[t("button",{onClick:a[1]||(a[1]=e=>C.value=!C.value),class:k(["btn btn-light-primary",{active:C.value}])},a[12]||(a[12]=[t("i",{class:"ki-duotone ki-calendar-edit fs-2 me-2"},[t("span",{class:"path1"}),t("span",{class:"path2"})],-1),F(" Date Filters ")]),2)])])])]),C.value?(g(),h("div",pa,[a[21]||(a[21]=y('<div class="card-header bg-light-primary" data-v-dda9e69d><h3 class="card-title fw-bold text-primary" data-v-dda9e69d><i class="ki-duotone ki-calendar-search fs-2 me-3" data-v-dda9e69d><span class="path1" data-v-dda9e69d></span><span class="path2" data-v-dda9e69d></span><span class="path3" data-v-dda9e69d></span></i> Advanced Date Filtering </h3></div>',1)),t("div",va,[t("div",ha,[a[14]||(a[14]=t("label",{class:"form-label fw-bold text-gray-900 mb-4"},"Quick Date Ranges",-1)),t("div",ga,[(g(!0),h(P,null,T(et.slice(0,-1),e=>(g(),h("div",{key:e.value,class:"col-6 col-md-4 col-lg-3"},[t("button",{onClick:n=>q(e.value),class:k(["btn w-100 btn-outline btn-outline-primary",{"btn-primary text-white":L.value===e.value}])},[t("i",{class:k(["ki-duotone fs-2 mb-2",`ki-${e.icon}`])},a[13]||(a[13]=[t("span",{class:"path1"},null,-1),t("span",{class:"path2"},null,-1),t("span",{class:"path3"},null,-1)]),2),t("div",fa,o(e.label),1)],10,ma)]))),128))])]),a[20]||(a[20]=t("div",{class:"separator my-5"},null,-1)),t("div",ba,[a[18]||(a[18]=y('<div class="col-12" data-v-dda9e69d><label class="form-label fw-bold text-gray-900" data-v-dda9e69d><i class="ki-duotone ki-calendar-edit fs-2 text-primary me-2" data-v-dda9e69d><span class="path1" data-v-dda9e69d></span><span class="path2" data-v-dda9e69d></span></i> Custom Date Range </label></div>',1)),t("div",ya,[a[15]||(a[15]=t("label",{class:"form-label required"},"From Date",-1)),tt(t("input",{"onUpdate:modelValue":a[2]||(a[2]=e=>r.value=e),type:"date",class:"form-control form-control-lg form-control-solid",max:c.value},null,8,wa),[[dt,r.value]])]),t("div",ka,[a[16]||(a[16]=t("label",{class:"form-label required"},"To Date",-1)),tt(t("input",{"onUpdate:modelValue":a[3]||(a[3]=e=>c.value=e),type:"date",class:"form-control form-control-lg form-control-solid",min:r.value,max:d(new Date)},null,8,Da),[[dt,c.value]])]),t("div",_a,[t("button",{onClick:bt,class:"btn btn-lg btn-success w-100",disabled:!r.value||!c.value},a[17]||(a[17]=[t("i",{class:"ki-duotone ki-check fs-2"},[t("span",{class:"path1"}),t("span",{class:"path2"})],-1),F(" Apply ")]),8,xa)])]),t("div",Ca,[t("button",{onClick:a[4]||(a[4]=e=>C.value=!1),class:"btn btn-light-primary"},a[19]||(a[19]=[t("i",{class:"ki-duotone ki-up fs-2 me-2"},[t("span",{class:"path1"}),t("span",{class:"path2"})],-1),F(" Hide Date Filters ")]))])])])):B("",!0),t("div",Sa,[t("div",Fa,[t("div",Aa,[t("div",Ra,[a[22]||(a[22]=t("i",{class:"ki-duotone ki-shield-cross fs-4x text-danger mb-4"},[t("span",{class:"path1"}),t("span",{class:"path2"})],-1)),t("h3",Ia,o(D.value.riskScore)+"%",1),a[23]||(a[23]=t("p",{class:"text-gray-700 fs-6 mb-0"},"AI Risk Score",-1)),t("div",La,o(f.value),1)])])]),t("div",Ma,[t("div",Va,[t("div",Ba,[a[24]||(a[24]=t("i",{class:"ki-duotone ki-rocket fs-4x text-success mb-4"},[t("span",{class:"path1"}),t("span",{class:"path2"}),t("span",{class:"path3"})],-1)),t("h3",Pa,o(D.value.paymentVelocity)+"%",1),a[25]||(a[25]=t("p",{class:"text-gray-700 fs-6 mb-0"},"Payment Velocity",-1)),t("div",Ta,o(f.value),1)])])]),t("div",za,[t("div",Ua,[t("div",Na,[a[26]||(a[26]=t("i",{class:"ki-duotone ki-percentage fs-4x text-warning mb-4"},[t("span",{class:"path1"}),t("span",{class:"path2"})],-1)),t("h3",$a,o(D.value.creditUtilization)+"%",1),a[27]||(a[27]=t("p",{class:"text-gray-700 fs-6 mb-0"},"Credit Utilization",-1)),t("div",Ea,o(f.value),1)])])]),t("div",ja,[t("div",Qa,[t("div",Oa,[a[28]||(a[28]=t("i",{class:"ki-duotone ki-people fs-4x text-info mb-4"},[t("span",{class:"path1"}),t("span",{class:"path2"}),t("span",{class:"path3"})],-1)),t("h3",Ya,o(w.value.length),1),a[29]||(a[29]=t("p",{class:"text-gray-700 fs-6 mb-0"},"Active Suppliers",-1)),a[30]||(a[30]=t("div",{class:"badge badge-light-info mt-2"},"Total",-1))])])])]),t("div",Ja,[t("div",Wa,[t("div",Ha,[t("div",qa,[a[31]||(a[31]=t("h3",{class:"card-title fw-bold text-gray-900"},[t("i",{class:"ki-duotone ki-chart-pie-simple fs-2 text-primary me-3"},[t("span",{class:"path1"}),t("span",{class:"path2"})]),F(" Risk Distribution Analysis ")],-1)),t("div",Za,o(f.value),1)]),t("div",Ga,[t("canvas",{ref_key:"riskDistributionChart",ref:N,width:"400",height:"300"},null,512)])])]),t("div",Ka,[t("div",Xa,[a[32]||(a[32]=y('<div class="card-header" data-v-dda9e69d><h3 class="card-title fw-bold text-gray-900" data-v-dda9e69d><i class="ki-duotone ki-chart-line-up fs-2 text-success me-3" data-v-dda9e69d><span class="path1" data-v-dda9e69d></span><span class="path2" data-v-dda9e69d></span></i> Credit Utilization by Supplier </h3><div class="badge badge-light-success" data-v-dda9e69d>Top 8 Suppliers</div></div>',1)),t("div",te,[t("canvas",{ref_key:"creditUtilizationChart",ref:$,width:"400",height:"300"},null,512)])])])]),t("div",ae,[t("div",ee,[t("div",se,[t("div",ne,[a[33]||(a[33]=y('<h3 class="card-title fw-bold text-gray-900" data-v-dda9e69d><i class="ki-duotone ki-chart-line fs-2 text-info me-3" data-v-dda9e69d><span class="path1" data-v-dda9e69d></span><span class="path2" data-v-dda9e69d></span><span class="path3" data-v-dda9e69d></span></i> Payment Trends Analysis </h3>',1)),t("div",le,o(f.value),1)]),t("div",ie,[t("canvas",{ref_key:"paymentTrendChart",ref:E,width:"400",height:"300"},null,512)])])]),t("div",oe,[t("div",de,[t("div",re,[a[34]||(a[34]=y('<h3 class="card-title fw-bold text-gray-900" data-v-dda9e69d><i class="ki-duotone ki-calendar-8 fs-2 text-warning me-3" data-v-dda9e69d><span class="path1" data-v-dda9e69d></span><span class="path2" data-v-dda9e69d></span><span class="path3" data-v-dda9e69d></span></i> Invoice Age Distribution </h3>',1)),t("div",ce,o(f.value),1)]),t("div",ue,[t("canvas",{ref_key:"invoiceAgeChart",ref:j,width:"400",height:"300"},null,512)])])])]),t("div",pe,[t("div",ve,[a[35]||(a[35]=y('<h3 class="card-title fw-bold text-gray-900" data-v-dda9e69d><i class="ki-duotone ki-graph-up fs-2 text-primary me-3" data-v-dda9e69d><span class="path1" data-v-dda9e69d></span><span class="path2" data-v-dda9e69d></span><span class="path3" data-v-dda9e69d></span></i> AI Cash Flow Forecast </h3>',1)),t("div",he,"Based on "+o(f.value)+" patterns",1)]),t("div",ge,[t("canvas",{ref_key:"cashflowForecastChart",ref:Q,width:"400",height:"400"},null,512)])]),t("div",me,[t("div",fe,[a[36]||(a[36]=y('<h3 class="card-title fw-bold text-gray-900" data-v-dda9e69d><i class="ki-duotone ki-brain fs-2 text-success me-3" data-v-dda9e69d><span class="path1" data-v-dda9e69d></span><span class="path2" data-v-dda9e69d></span><span class="path3" data-v-dda9e69d></span></i> AI Recommendations &amp; Insights </h3>',1)),t("div",be,o(f.value),1)]),t("div",ye,[D.value.recommendations.length===0?(g(),h("div",we,a[37]||(a[37]=[y('<i class="ki-duotone ki-check-circle fs-4x text-success mb-4" data-v-dda9e69d><span class="path1" data-v-dda9e69d></span><span class="path2" data-v-dda9e69d></span></i><h4 class="fw-bold text-gray-900 mb-3" data-v-dda9e69d>All Systems Optimal</h4><p class="text-gray-700" data-v-dda9e69d> No critical issues detected for the selected period. Keep monitoring! </p>',3)]))):(g(),h("div",ke,[(g(!0),h(P,null,T(D.value.recommendations,(e,n)=>(g(),h("div",{key:n,class:"col-12 col-lg-6"},[t("div",{class:k(["card card-flush h-100",ct(e.type)])},[t("div",De,[t("div",_e,[t("i",{class:k(["ki-duotone fs-3x",ut(e.type)])},a[38]||(a[38]=[t("span",{class:"path1"},null,-1),t("span",{class:"path2"},null,-1)]),2),t("div",xe,[t("h5",Ce,o(e.title),1),t("p",Se,o(e.message),1),t("button",{class:k(["btn btn-sm",pt(e.type)])},o(e.action),3)])])])],2)]))),128))]))])]),t("div",Fe,[a[40]||(a[40]=y('<div class="card-header" data-v-dda9e69d><h3 class="card-title fw-bold text-gray-900" data-v-dda9e69d><i class="ki-duotone ki-medal-star fs-2 text-warning me-3" data-v-dda9e69d><span class="path1" data-v-dda9e69d></span><span class="path2" data-v-dda9e69d></span><span class="path3" data-v-dda9e69d></span></i> Strategic Supplier Ranking </h3><div class="badge badge-light-warning" data-v-dda9e69d>Period Volume Analysis</div></div>',1)),t("div",Ae,[t("div",Re,[t("table",Ie,[a[39]||(a[39]=t("thead",null,[t("tr",{class:"text-start text-gray-400 fw-bold fs-7 text-uppercase gs-0"},[t("th",{class:"min-w-125px"},"Rank"),t("th",{class:"min-w-200px"},"Supplier"),t("th",{class:"min-w-100px"},"Strategic Value"),t("th",{class:"min-w-100px"},"Risk Level"),t("th",{class:"min-w-125px"},"Period Volume"),t("th",{class:"min-w-100px"},"Status")])],-1)),t("tbody",Le,[(g(!0),h(P,null,T(D.value.supplierRanking.slice(0,10),(e,n)=>(g(),h("tr",{key:n},[t("td",null,[t("div",Me,[t("div",{class:k(["badge badge-circle badge-lg me-3",vt(n)])},o(n+1),3)])]),t("td",null,[t("div",Ve,o(e.name),1)]),t("td",null,[t("div",Be,[t("div",Pe,[t("div",{class:k(["progress-bar",ht(e.strategicValue)]),style:Ot({width:e.strategicValue+"%"})},null,6)]),t("span",Te,o(e.strategicValue)+"%",1)])]),t("td",null,[t("span",{class:k(["badge",gt(e.riskLevel)])},o(e.riskLevel),3)]),t("td",null,[t("span",ze,o(ft(e.periodVolume)),1)]),t("td",null,[t("span",{class:k(["badge",mt(e.status)])},o(e.status),3)])]))),128))])])])])])])):B("",!0)]))}},je=Nt(Ue,[["__scopeId","data-v-dda9e69d"]]);export{je as default};
