import{_ as jt,r as C,a as dt,c as P,o as Vt,S as O,k as ut,b as f,d as s,g as r,f as R,t as l,n as y,w as S,y as G,F as st,h as at,x as Ut,e as L,m as et,v as W,i as v}from"./index-BJk99QVQ.js";import{i as ft}from"./index-Bn9PLWWT.js";const Ot={class:"d-flex flex-column gap-7"},Rt={class:"card card-flush shadow-sm"},Lt={class:"card-header border-0 pt-7"},Mt={class:"card-toolbar"},Qt={class:"d-flex align-items-center gap-3"},$t={class:"badge badge-light-primary fs-7 px-4 py-2"},Et={class:"row g-6 g-xl-9"},Bt={class:"col-6 col-lg-3"},Ht={class:"card card-flush h-100 shadow-sm"},Jt={class:"card-body d-flex flex-column justify-content-between"},qt={class:"d-flex align-items-center mb-4"},Gt={class:"flex-grow-1"},Wt={class:"fs-2hx fw-bold text-gray-800"},zt={class:"col-6 col-lg-3"},Yt={class:"card card-flush h-100 shadow-sm"},Kt={class:"card-body d-flex flex-column justify-content-between"},Xt={class:"d-flex align-items-center mb-4"},Zt={class:"flex-grow-1"},ts={class:"fs-2hx fw-bold text-gray-800"},ss={class:"col-6 col-lg-3"},as={class:"card card-flush h-100 shadow-sm"},es={class:"card-body d-flex flex-column justify-content-between"},os={class:"d-flex align-items-center mb-4"},ns={class:"flex-grow-1"},ls={class:"fs-2hx fw-bold text-gray-800"},is={class:"col-6 col-lg-3"},cs={class:"card card-flush h-100 shadow-sm"},rs={class:"card-body d-flex flex-column justify-content-between"},ds={class:"d-flex align-items-center mb-4"},us={class:"flex-grow-1"},fs={class:"fs-2hx fw-bold text-gray-800"},vs={class:"card card-flush shadow-sm"},ps={class:"card-body p-0"},ms={class:"nav nav-stretch nav-pills nav-pills-custom border-transparent fs-5 fw-bold"},gs={class:"nav-item"},ys={class:"nav-item"},hs={class:"nav-item"},bs={class:"nav-item"},xs={class:"tab-content"},ws={class:"row g-6"},ks={class:"col-12"},Cs={class:"card card-flush shadow-sm"},Ss={class:"card-header border-0 pt-6"},Is={class:"card-toolbar"},Ds=["disabled"],_s={class:"card-body"},Ps={key:0,class:"text-center py-20"},Ts={key:1,class:"text-center py-20"},Fs={key:2,class:"row g-6"},Ns={class:"card card-bordered h-100 shadow-sm hover-elevate-up"},As={class:"card-body text-center position-relative"},js={class:"position-absolute top-0 end-0 m-4"},Vs={class:"card-title mb-3 text-gray-800"},Us={class:"fs-1 fw-bold text-gray-900 mb-3"},Os={class:"mb-4"},Rs={class:"fs-4 fw-bold text-success"},Ls={class:"mb-4"},Ms={class:"text-muted fs-7"},Qs={class:"row g-6"},$s={class:"col-12 col-xl-8"},Es={class:"card card-flush shadow-sm"},Bs={class:"card-body"},Hs={class:"mb-8"},Js=["value"],qs={key:0,class:"invalid-feedback"},Gs={key:0,class:"alert alert-dismissible bg-light-info border border-info mb-8"},Ws={class:"d-flex align-items-center"},zs={class:"flex-grow-1"},Ys={class:"row"},Ks={class:"col-6"},Xs={class:"fs-5 fw-bold text-gray-800"},Zs={class:"col-6"},ta={class:"fs-5 fw-bold text-success"},sa={class:"mb-8"},aa={class:"row g-6"},ea={class:"col-12 col-md-6"},oa={key:0,class:"invalid-feedback"},na={class:"col-12 col-md-6"},la={class:"input-group input-group-lg input-group-solid"},ia={key:0,class:"invalid-feedback"},ca={class:"mb-8"},ra={class:"row g-6"},da={class:"col-12"},ua={key:0,class:"invalid-feedback"},fa={class:"col-12 col-md-6"},va={class:"col-12 col-md-6"},pa={key:1,class:"alert alert-dismissible bg-light-primary border border-primary mb-8"},ma={class:"row text-center g-4"},ga={class:"col-3"},ya={class:"fs-5 fw-bold text-gray-800"},ha={class:"fs-7 text-success"},ba={class:"col-3"},xa={class:"col-3"},wa={class:"fs-5 fw-bold text-gray-800"},ka={class:"fs-7 text-primary"},Ca={class:"col-3"},Sa={class:"fs-7 text-muted"},Ia={class:"text-center"},Da=["disabled"],_a={key:0,class:"spinner-border spinner-border-sm me-3"},Pa={key:1,class:"ki-duotone ki-check fs-2 me-3"},Ta={class:"col-12 col-xl-4"},Fa={class:"card card-flush shadow-sm h-100"},Na={class:"card-body"},Aa={class:"d-grid gap-4"},ja={class:"row g-6"},Va={class:"col-12"},Ua={class:"card card-flush shadow-sm"},Oa={class:"card-body"},Ra={key:0,class:"text-center py-20"},La={key:1,class:"table-responsive"},Ma={class:"table table-rounded table-hover table-striped border gy-7 gs-7"},Qa={class:"fw-bold text-gray-800"},$a={class:"fs-7 text-muted"},Ea={class:"d-flex align-items-center"},Ba={class:"fw-bold text-gray-800"},Ha={class:"badge badge-light-primary"},Ja={class:"text-end fw-bold"},qa={class:"text-end"},Ga={class:"text-end fw-bold"},Wa={class:"text-end"},za={class:"text-gray-800"},Ya={key:0,class:"fs-7 text-muted"},Ka={class:"row g-6"},Xa={class:"col-12 col-xl-8"},Za={class:"card card-flush shadow-sm h-100"},te={class:"card-body"},se={class:"col-12 col-xl-4"},ae={class:"card card-flush shadow-sm h-100"},ee={class:"card-body"},oe={class:"d-flex flex-column gap-6"},ne={class:"d-flex align-items-center justify-content-between"},le={class:"d-flex align-items-center"},ie={class:"fs-5 fw-bold text-gray-800"},ce={class:"d-flex align-items-center justify-content-between"},re={class:"d-flex align-items-center"},de={class:"fs-5 fw-bold text-gray-800"},ue={class:"d-flex align-items-center justify-content-between"},fe={class:"d-flex align-items-center"},ve={class:"d-flex align-items-center justify-content-between"},pe={class:"d-flex align-items-center"},me={class:"fs-5 fw-bold text-gray-800"},ge={class:"col-12"},ye={class:"card card-flush shadow-sm"},he={class:"card-body"},be="https://backend.cloudfuelstationmis.com/api/records/v1",xe={__name:"InventoryAdjustement",setup(we){const vt=()=>{try{return JSON.parse(localStorage.getItem("kigrama_user_data")||"{}")}catch{return{}}},pt=()=>localStorage.getItem("kigrama_auth_token")||"",ot=C(vt()),mt=C(pt()),b=C("current"),T=C(!1),V=C([]),M=C([]),F=C([]),I=C([]),B=C([]),z=C(null),Y=C(null),o=dt({ProductID:"",ChangeType:"",QuantityChange:"",ReasonForChange:"",Notes:"",BatchNumber:"",MeasurementMethod:"Manual Count"}),u=dt({}),N=P(()=>ot.value.user||{}),gt=P(()=>ot.value.stations||[]),nt=P(()=>gt.value[0]||null),k=P(()=>{var a;return((a=nt.value)==null?void 0:a.StationID)||null}),x=P(()=>o.ProductID?V.value.find(a=>a.ProductID==o.ProductID):null),Q=P(()=>{if(!F.value.length)return M.value;const a=F.value.map(t=>t.ProductID);return M.value.filter(t=>!a.includes(t.ProductID))}),U=P(()=>{if(!F.value.length)return V.value;const a=F.value.map(t=>t.ProductID);return V.value.filter(t=>!a.includes(t.ProductID))}),yt=P(()=>{var a;return o.ProductID&&o.ChangeType&&o.QuantityChange&&((a=o.ReasonForChange)==null?void 0:a.length)>=10}),ht=P(()=>{const a=U.value.length,t=U.value.reduce((i,c)=>i+parseFloat(c.CurrentStock||0),0),n=U.value.filter(i=>parseFloat(i.CurrentStock||0)<100).length,e=I.value.filter(i=>new Date(i.ChangeDate)>new Date(Date.now()-7*24*60*60*1e3)).length;return{totalProducts:a,totalStock:t,lowStockItems:n,recentAdjustments:e,lastUpdate:new Date().toLocaleString()}}),A=P(()=>{const a=new Date(Date.now()-2592e6),t=I.value.filter(p=>new Date(p.ChangeDate)>a),n=t.filter(p=>parseFloat(p.TotalValue||0)>0).reduce((p,h)=>p+parseFloat(h.TotalValue||0),0),e=t.filter(p=>parseFloat(p.TotalValue||0)<0).reduce((p,h)=>p+parseFloat(h.TotalValue||0),0),i=U.value.reduce((p,h)=>{const $=Q.value.find(w=>w.ProductID===h.ProductID),q=parseFloat(($==null?void 0:$.UnitPrice)||0),_=parseFloat(h.CurrentStock||0);return p+q*_},0),c=n+e,d=n+e,g=i>0?(Math.abs(e)/i*100).toFixed(2):0;return{totalInventoryValue:i,adjustmentImpact:c,totalGains:n,totalLosses:e,netImpact:d,lossRatio:g}}),D=async(a,t={})=>{try{const n=await fetch(`${be}${a}`,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${mt.value}`,...t.headers},...t});if(!n.ok){let c="Unknown error";try{c=await n.text()}catch{c=`HTTP ${n.status} ${n.statusText}`}throw new Error(`API Error: ${n.status} ${n.statusText} - ${c}`)}const e=n.headers.get("content-length"),i=n.headers.get("content-type");if(e==="0"||n.status===204)return{};if(i&&i.includes("application/json"))try{const c=await n.text();return c.trim()?JSON.parse(c):{}}catch(c){return console.warn("Failed to parse JSON response:",c),{}}return{}}catch(n){throw console.error("API Error:",n),n}},bt=a=>{var d;const t=Math.abs(parseFloat(a.QuantityChange||0)),n=t*parseFloat(Z()),e={largeQuantityAdjustment:t>1e3,highValueAdjustment:n>5e5,offHoursActivity:new Date().getHours()<6||new Date().getHours()>22,emptyOrVagueReason:!((d=a.ReasonForChange)!=null&&d.trim())||a.ReasonForChange.length<10,frequentAdjustments:It(),unusualPattern:t>5e3},i=Object.values(e).filter(Boolean).length,c=Math.min(i*15,100);return{riskScore:c,riskLevel:c>=75?"CRITICAL":c>=50?"HIGH":c>=25?"MEDIUM":"LOW",flags:Object.keys(e).filter(g=>e[g]),isSuspicious:i>0,severity:c>=75?"Critical":c>=50?"High":c>=25?"Medium":"Low"}},H=async(a,t,n=null)=>{var i;const e=new Date().toISOString();try{await D("/AuditLogs",{method:"POST",body:JSON.stringify({TableName:t.tableName||"StationInventory",RecordID:((i=t.recordId)==null?void 0:i.toString())||null,Action:a,OldValues:JSON.stringify(t.oldValues||{}),NewValues:JSON.stringify(t.newValues||{}),UserID:N.value.id,IPAddress:"client_ip_placeholder",UserAgent:navigator.userAgent,Timestamp:e,AdditionalInfo:JSON.stringify({stationId:k.value,productId:t.productId,details:t.details||{}})})})}catch(c){console.error("Failed to log to AuditLogs:",c)}if(n!=null&&n.isSuspicious)try{await D("/FraudDetectionLogs",{method:"POST",body:JSON.stringify({DetectionRuleID:null,TransactionID:null,StationID:k.value,UserID:N.value.id,RiskScore:n.riskScore.toString(),Severity:n.severity,FraudType:"Inventory Adjustment",Description:`Suspicious inventory adjustment: ${n.flags.join(", ")}`,DetectedAt:e,Status:"Open",ResolvedBy:null,ResolvedAt:null,Notes:`Product: ${t.productName}, Change: ${t.quantityChange}, Reason: ${t.reason}`,CreatedAt:e,UpdatedAt:e})})}catch(c){console.error("Failed to log to FraudDetectionLogs:",c)}},xt=async()=>{if(k.value)try{const a=await D(`/Tanks?StationID=${k.value}`);F.value=a.records||[],console.log("Loaded station tanks:",F.value.length),await H("VIEW_STATION_TANKS",{tableName:"Tanks",details:{recordCount:F.value.length}})}catch(a){console.error("Failed to load station tanks:",a),F.value=[]}},K=async()=>{if(!k.value){O.fire({title:"No Station Assigned",text:"You are not assigned to any station",icon:"warning",confirmButtonColor:"#f1416c"});return}T.value=!0;try{const a=await D(`/StationInventory?StationID=${k.value}`);V.value=a.records||[],console.log("Loaded station inventory:",V.value.length),await H("VIEW_STATION_INVENTORY",{tableName:"StationInventory",details:{recordCount:V.value.length}})}catch(a){console.error("Failed to load station inventory:",a),V.value=[],O.fire({title:"Load Failed",text:"Failed to load station inventory data",icon:"error",confirmButtonColor:"#f1416c"})}finally{T.value=!1}},wt=async()=>{try{const a=await D("/users");B.value=a.records||[],console.log("Loaded users:",B.value.length)}catch(a){console.error("Failed to load users:",a),B.value=[]}},kt=async()=>{try{const a=await D("/Products");M.value=a.records||[],console.log("Loaded products:",M.value.length)}catch(a){console.error("Failed to load products:",a),M.value=[]}},X=async()=>{if(k.value)try{const a=await D(`/InventoryHistory?StationID=${k.value}&limit=100`);I.value=(a.records||[]).sort((t,n)=>new Date(n.ChangeDate)-new Date(t.ChangeDate)),console.log("Loaded adjustment history:",I.value.length),await H("VIEW_ADJUSTMENT_HISTORY",{tableName:"InventoryHistory",details:{recordCount:I.value.length}})}catch(a){console.error("Failed to load adjustment history:",a),I.value=[]}},Ct=()=>{var t;Object.keys(u).forEach(n=>{u[n]=""});let a=!0;return o.ProductID||(u.ProductID="Product selection is required",a=!1),o.ChangeType||(u.ChangeType="Adjustment type is required",a=!1),!o.QuantityChange||o.QuantityChange==="0"?(u.QuantityChange="Quantity change is required and cannot be zero",a=!1):isNaN(parseFloat(o.QuantityChange))&&(u.QuantityChange="Quantity change must be a valid number",a=!1),(t=o.ReasonForChange)!=null&&t.trim()?o.ReasonForChange.trim().length<10&&(u.ReasonForChange="Reason must be at least 10 characters",a=!1):(u.ReasonForChange="Reason is required",a=!1),a},St=async()=>{var e,i,c;if(!Ct())return;const a=parseFloat(o.QuantityChange),t=parseFloat(((e=x.value)==null?void 0:e.CurrentStock)||0),n=t+a;if(n<0){O.fire({title:"Invalid Adjustment",text:"Adjustment would result in negative stock. Please check your values.",icon:"error",confirmButtonColor:"#f1416c"});return}T.value=!0,console.log("Starting adjustment creation with data:",{productId:o.ProductID,changeType:o.ChangeType,quantityChange:a,newStock:n,stationId:k.value});try{const d=Q.value.find(w=>w.ProductID==o.ProductID),g=parseFloat((d==null?void 0:d.UnitPrice)||0),p=a*g,h=new Date().toISOString(),$=bt({...o,QuantityChange:a,totalValue:p}),q={StationID:k.value,ProductID:parseInt(o.ProductID),TankID:null,PumpID:null,TransactionID:null,TransferID:null,ChangeDate:h,ChangeType:o.ChangeType,PreviousQuantity:t.toString(),QuantityChange:a.toString(),NewQuantity:n.toString(),UnitPrice:g.toString(),TotalValue:p.toString(),ReasonForChange:o.ReasonForChange,AdjustmentCategory:o.ChangeType,BatchNumber:o.BatchNumber||null,ExpiryDate:null,QualityCheck:"Passed",MeasurementMethod:o.MeasurementMethod,MeasurementDetails:o.Notes||null,AuthorizedBy:(i=N.value.id)==null?void 0:i.toString(),RecordedBy:(c=N.value.id)==null?void 0:c.toString(),VerifiedBy:null,Notes:o.Notes||null,AdditionalProperties:JSON.stringify({fraudRisk:$.riskLevel,userAgent:navigator.userAgent,clientTimestamp:h}),CreatedAt:h};let _={};try{console.log("Creating inventory history with data:",q),_=await D("/InventoryHistory",{method:"POST",body:JSON.stringify(q)}),console.log("History creation response:",_)}catch(w){console.error("Failed to create inventory history:",w)}try{if(x.value){console.log("Updating existing inventory record:",x.value.InventoryID);const w=await D(`/StationInventory/${x.value.InventoryID}`,{method:"PATCH",body:JSON.stringify({CurrentStock:n.toString(),LastUpdated:h})});console.log("Inventory update response:",w)}else{console.log("Creating new inventory record for product:",o.ProductID);const w=await D("/StationInventory",{method:"POST",body:JSON.stringify({StationID:k.value,ProductID:parseInt(o.ProductID),CurrentStock:n.toString(),LastUpdated:h})});console.log("Inventory creation response:",w)}}catch(w){throw console.error("Failed to update station inventory:",w),new Error("Failed to update inventory record")}await H("CREATE_INVENTORY_ADJUSTMENT",{tableName:"InventoryHistory",recordId:(_==null?void 0:_.id)||(_==null?void 0:_.HistoryID)||null,productId:o.ProductID,productName:d==null?void 0:d.Name,quantityChange:a.toString(),reason:o.ReasonForChange,notes:o.Notes,oldValues:{CurrentStock:t},newValues:{CurrentStock:n},details:{changeType:o.ChangeType,measurementMethod:o.MeasurementMethod,batchNumber:o.BatchNumber,totalValue:p}},$),await O.fire({title:"Adjustment Created!",text:`${d==null?void 0:d.Name} stock adjusted by ${a>=0?"+":""}${a} units`,icon:"success",toast:!0,position:"top-end",timer:3e3,showConfirmButton:!1}),Object.assign(o,{ProductID:"",ChangeType:"",QuantityChange:"",ReasonForChange:"",Notes:"",BatchNumber:"",MeasurementMethod:"Manual Count"}),Object.assign(u,{});try{await Promise.all([K(),X()]),ut(()=>{lt()}),b.value="history"}catch(w){console.error("Failed to refresh data after adjustment:",w),O.fire({title:"Refresh Warning",text:"Adjustment created successfully, but failed to refresh display. Please refresh manually.",icon:"warning",confirmButtonColor:"#3699ff"})}}catch(d){console.error("Adjustment creation error:",d);let g="Failed to create inventory adjustment";d.message.includes("Failed to update inventory record")?g="Failed to update inventory record. Please try again.":d.message.includes("API Error: 401")?g="Authentication failed. Please login again.":d.message.includes("API Error: 403")?g="Access denied. You may not have permission to make adjustments.":d.message.includes("API Error: 500")?g="Server error. Please contact support if this continues.":d.message&&(g=d.message),await O.fire({title:"Adjustment Failed",text:g,icon:"error",confirmButtonColor:"#f1416c"})}finally{T.value=!1}},lt=()=>{if(z.value){const a=ft(z.value),t=[],n=[];for(let i=29;i>=0;i--){const c=new Date(Date.now()-i*24*60*60*1e3);t.push(c.toISOString().split("T")[0]);const g=I.value.filter(p=>p.ChangeDate&&p.ChangeDate.split("T")[0]===c.toISOString().split("T")[0]).reduce((p,h)=>p+parseFloat(h.TotalValue||0),0);n.push(g)}const e={title:{text:"Daily Financial Impact",left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"axis",formatter:function(i){const c=i[0].value;return`${i[0].name}<br/>Impact: ${m(c)}`}},xAxis:{type:"category",data:t,axisLabel:{formatter:function(i){return new Date(i).toLocaleDateString("en-US",{month:"short",day:"numeric"})}}},yAxis:{type:"value",axisLabel:{formatter:function(i){return m(i)}}},series:[{data:n,type:"line",smooth:!0,areaStyle:{color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:"rgba(54, 153, 255, 0.3)"},{offset:1,color:"rgba(54, 153, 255, 0.05)"}]}},lineStyle:{color:"#3699ff",width:3},itemStyle:{color:"#3699ff"}}]};a.setOption(e)}if(Y.value){const a=ft(Y.value),t=Q.value.map(e=>{const i=U.value.find(g=>g.ProductID===e.ProductID),d=parseFloat((i==null?void 0:i.CurrentStock)||0)*parseFloat(e.UnitPrice||0);return{name:e.Name,value:d}}).filter(e=>e.value>0),n={title:{text:"Inventory Value by Product",left:"center",textStyle:{fontSize:16,fontWeight:"bold"}},tooltip:{trigger:"item",formatter:function(e){return`${e.name}<br/>Value: ${m(e.value)}<br/>Percentage: ${e.percent}%`}},series:[{type:"pie",radius:["40%","70%"],data:t,emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};a.setOption(n)}},it=a=>{const t=M.value.find(n=>n.ProductID===a);return(t==null?void 0:t.Name)||"Unknown Product"},Z=()=>{if(!o.ProductID)return 0;const a=Q.value.find(t=>t.ProductID==o.ProductID);return parseFloat((a==null?void 0:a.UnitPrice)||0)},It=()=>I.value.filter(t=>t.ProductID==o.ProductID&&new Date(t.ChangeDate)>new Date(Date.now()-864e5)).length>=3,ct=()=>!x.value||!o.QuantityChange?0:parseFloat(x.value.CurrentStock)+parseFloat(o.QuantityChange),tt=a=>{const t=Q.value.find(i=>i.ProductID===a.ProductID),n=parseFloat((t==null?void 0:t.UnitPrice)||0),e=parseFloat(a.CurrentStock||0);return n*e},E=()=>{if(!o.QuantityChange)return 0;const a=Z();return parseFloat(o.QuantityChange)*a},Dt=()=>{if(!x.value||!o.QuantityChange)return 0;const a=ct(),t=Z();return a*t},_t=()=>{u.ProductID=""},J=(a,t)=>{o.ChangeType=a,o.ReasonForChange=t,u.ChangeType="",u.ReasonForChange=""},Pt=a=>{const t=parseFloat(a||0);return t>500?"Optimal":t>100?"Low":"Critical"},rt=a=>{const t=parseFloat(a||0);return t>500?"badge-success":t>100?"badge-warning":"badge-danger"},Tt=a=>{if(!a)return"Unknown User";if(N.value.id&&N.value.id==a)return N.value.name||N.value.email||`User #${a}`;const t=B.value.find(n=>n.id==a);return t?t.name||t.email||t.username||`User #${a}`:`User #${a}`},j=a=>parseFloat(a||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}),Ft=a=>a?new Date(a).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",Nt=a=>a?new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",At=a=>a?new Date(a).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A",m=a=>new Intl.NumberFormat("en-UG",{style:"currency",currency:"UGX",minimumFractionDigits:0}).format(a||0);return Vt(async()=>{if(!k.value){O.fire({title:"Station Required",text:"You must be assigned to a station to manage inventory",icon:"warning",confirmButtonColor:"#f1416c"});return}await xt(),await Promise.all([wt(),kt(),K(),X()]),ut(()=>{lt()})}),(a,t)=>{var n;return v(),f("div",Ot,[s("div",Rt,[s("div",Lt,[t[17]||(t[17]=r('<div class="card-title" data-v-c32c4ff0><div class="d-flex align-items-center" data-v-c32c4ff0><div class="symbol symbol-50px me-4" data-v-c32c4ff0><div class="symbol-label bg-light-primary" data-v-c32c4ff0><i class="ki-duotone ki-cube-2 fs-2hx text-primary" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span><span class="path3" data-v-c32c4ff0></span></i></div></div><div data-v-c32c4ff0><h1 class="fw-bold text-gray-900 mb-1" data-v-c32c4ff0>Non-Fuel Inventory Management</h1><div class="text-muted fs-6" data-v-c32c4ff0> Station-level inventory control for lubricants, gas, and other products </div></div></div></div>',1)),s("div",Mt,[s("div",Qt,[s("div",$t,[t[15]||(t[15]=s("i",{class:"ki-duotone ki-geolocation fs-6 me-1"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)),R(" "+l(((n=nt.value)==null?void 0:n.Name)||"No Station Selected"),1)]),t[16]||(t[16]=s("div",{class:"badge badge-light-success fs-7 px-4 py-2"},[s("i",{class:"ki-duotone ki-check-circle fs-6 me-1"},[s("span",{class:"path1"}),s("span",{class:"path2"})]),R(" Online ")],-1))])])])]),t[93]||(t[93]=r('<div class="alert alert-dismissible bg-light-info border border-info d-flex align-items-center" data-v-c32c4ff0><div class="symbol symbol-40px me-4" data-v-c32c4ff0><div class="symbol-label bg-info" data-v-c32c4ff0><i class="ki-duotone ki-information-5 fs-2 text-white" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span><span class="path3" data-v-c32c4ff0></span></i></div></div><div class="flex-grow-1" data-v-c32c4ff0><h6 class="mb-1 text-gray-800" data-v-c32c4ff0>Non-Fuel Products Only</h6><div class="text-gray-700" data-v-c32c4ff0> This view manages lubricants, gas cylinders, and other non-fuel products. Fuel products (petrol, diesel, kerosene) are managed separately through the fuel management system. </div></div></div>',1)),s("div",Et,[s("div",Bt,[s("div",Ht,[s("div",Jt,[s("div",qt,[t[19]||(t[19]=r('<div class="symbol symbol-40px me-3" data-v-c32c4ff0><div class="symbol-label bg-light-success" data-v-c32c4ff0><i class="ki-duotone ki-arrow-up fs-1 text-success" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></div></div>',1)),s("div",Gt,[s("div",Wt,l(m(A.value.totalInventoryValue)),1),t[18]||(t[18]=s("div",{class:"fs-7 text-muted"},"Total Inventory Value",-1))])]),t[20]||(t[20]=s("div",{class:"progress h-6px bg-light-success"},[s("div",{class:"progress-bar bg-success",style:{width:"85%"}})],-1))])])]),s("div",zt,[s("div",Yt,[s("div",Kt,[s("div",Xt,[t[22]||(t[22]=r('<div class="symbol symbol-40px me-3" data-v-c32c4ff0><div class="symbol-label bg-light-warning" data-v-c32c4ff0><i class="ki-duotone ki-chart-line-up fs-1 text-warning" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></div></div>',1)),s("div",Zt,[s("div",ts,l(m(Math.abs(A.value.adjustmentImpact))),1),t[21]||(t[21]=s("div",{class:"fs-7 text-muted"},"30-Day Adjustment Impact",-1))])]),t[23]||(t[23]=s("div",{class:"progress h-6px bg-light-warning"},[s("div",{class:"progress-bar bg-warning",style:{width:"65%"}})],-1))])])]),s("div",ss,[s("div",as,[s("div",es,[s("div",os,[t[25]||(t[25]=r('<div class="symbol symbol-40px me-3" data-v-c32c4ff0><div class="symbol-label bg-light-danger" data-v-c32c4ff0><i class="ki-duotone ki-arrow-down fs-1 text-danger" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></div></div>',1)),s("div",ns,[s("div",ls,l(m(A.value.totalLosses)),1),t[24]||(t[24]=s("div",{class:"fs-7 text-muted"},"Total Losses (30 Days)",-1))])]),t[26]||(t[26]=s("div",{class:"progress h-6px bg-light-danger"},[s("div",{class:"progress-bar bg-danger",style:{width:"25%"}})],-1))])])]),s("div",is,[s("div",cs,[s("div",rs,[s("div",ds,[t[28]||(t[28]=r('<div class="symbol symbol-40px me-3" data-v-c32c4ff0><div class="symbol-label bg-light-info" data-v-c32c4ff0><i class="ki-duotone ki-abstract-39 fs-1 text-info" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></div></div>',1)),s("div",us,[s("div",fs,l(ht.value.totalProducts),1),t[27]||(t[27]=s("div",{class:"fs-7 text-muted"},"Non-Fuel Products",-1))])]),t[29]||(t[29]=s("div",{class:"progress h-6px bg-light-info"},[s("div",{class:"progress-bar bg-info",style:{width:"95%"}})],-1))])])])]),s("div",vs,[s("div",ps,[s("ul",ms,[s("li",gs,[s("a",{class:y(["nav-link text-center py-4 px-6",{active:b.value==="current"}]),onClick:t[0]||(t[0]=e=>b.value="current"),href:"#"},t[30]||(t[30]=[r('<span class="nav-icon mb-3" data-v-c32c4ff0><i class="ki-duotone ki-element-7 fs-2hx" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></span><span class="nav-text" data-v-c32c4ff0>Non-Fuel Stock</span>',2)]),2)]),s("li",ys,[s("a",{class:y(["nav-link text-center py-4 px-6",{active:b.value==="adjust"}]),onClick:t[1]||(t[1]=e=>b.value="adjust"),href:"#"},t[31]||(t[31]=[r('<span class="nav-icon mb-3" data-v-c32c4ff0><i class="ki-duotone ki-pencil fs-2hx" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></span><span class="nav-text" data-v-c32c4ff0>Make Adjustment</span>',2)]),2)]),s("li",hs,[s("a",{class:y(["nav-link text-center py-4 px-6",{active:b.value==="history"}]),onClick:t[2]||(t[2]=e=>b.value="history"),href:"#"},t[32]||(t[32]=[r('<span class="nav-icon mb-3" data-v-c32c4ff0><i class="ki-duotone ki-time fs-2hx" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></span><span class="nav-text" data-v-c32c4ff0>History</span>',2)]),2)]),s("li",bs,[s("a",{class:y(["nav-link text-center py-4 px-6",{active:b.value==="analytics"}]),onClick:t[3]||(t[3]=e=>b.value="analytics"),href:"#"},t[33]||(t[33]=[r('<span class="nav-icon mb-3" data-v-c32c4ff0><i class="ki-duotone ki-chart-pie fs-2hx" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span><span class="path3" data-v-c32c4ff0></span></i></span><span class="nav-text" data-v-c32c4ff0>Analytics</span>',2)]),2)])])])]),s("div",xs,[S(s("div",ws,[s("div",ks,[s("div",Cs,[s("div",Ss,[t[35]||(t[35]=s("h3",{class:"card-title fw-bold text-gray-900"},"Non-Fuel Station Inventory",-1)),s("div",Is,[s("button",{class:"btn btn-sm btn-light-primary",onClick:K,disabled:T.value},t[34]||(t[34]=[s("i",{class:"ki-duotone ki-arrows-circle fs-2"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1),R(" Refresh Data ")]),8,Ds)])]),s("div",_s,[T.value?(v(),f("div",Ps,t[36]||(t[36]=[s("div",{class:"spinner-border spinner-border-lg text-primary",role:"status"},null,-1),s("div",{class:"mt-5 fs-6 text-muted"},"Loading inventory data...",-1)]))):U.value.length?(v(),f("div",Fs,[(v(!0),f(st,null,at(U.value,e=>(v(),f("div",{key:e.InventoryID,class:"col-12 col-md-6 col-xl-4"},[s("div",Ns,[s("div",As,[s("div",js,[s("div",{class:y(["badge badge-circle badge-lg",rt(e.CurrentStock)])},t[38]||(t[38]=[s("i",{class:"ki-duotone ki-abstract-39 fs-4"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)]),2)]),t[42]||(t[42]=r('<div class="symbol symbol-75px mx-auto mb-5" data-v-c32c4ff0><div class="symbol-label bg-light-primary" data-v-c32c4ff0><i class="ki-duotone ki-abstract-39 fs-2x text-primary" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></div></div>',1)),s("h5",Vs,l(it(e.ProductID)),1),s("div",Us,[R(l(j(e.CurrentStock))+" ",1),t[39]||(t[39]=s("span",{class:"fs-6 text-muted"},"units",-1))]),s("div",Os,[t[40]||(t[40]=s("div",{class:"fs-6 text-muted"},"Current Value",-1)),s("div",Rs,l(m(tt(e))),1)]),s("div",Ls,[s("span",{class:y(["badge badge-lg",rt(e.CurrentStock)])},l(Pt(e.CurrentStock)),3)]),s("div",Ms,[t[41]||(t[41]=s("i",{class:"ki-duotone ki-time fs-6 me-1"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)),R(" Updated: "+l(Ft(e.LastUpdated)),1)])])])]))),128))])):(v(),f("div",Ts,t[37]||(t[37]=[r('<div class="symbol symbol-100px mx-auto mb-7" data-v-c32c4ff0><div class="symbol-label bg-light-warning" data-v-c32c4ff0><i class="ki-duotone ki-information fs-3x text-warning" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span><span class="path3" data-v-c32c4ff0></span></i></div></div><h4 class="text-muted" data-v-c32c4ff0>No non-fuel inventory records found</h4><p class="text-muted" data-v-c32c4ff0> This view shows only non-fuel products. Fuel products are managed separately. </p>',3)])))])])])],512),[[G,b.value==="current"]]),S(s("div",Qs,[s("div",$s,[s("div",Es,[t[68]||(t[68]=s("div",{class:"card-header border-0 pt-6"},[s("h3",{class:"card-title fw-bold text-gray-900"},"Create Inventory Adjustment"),s("div",{class:"card-toolbar"},[s("span",{class:"badge badge-light-info"},"Step-by-Step Process")])],-1)),s("div",Bs,[s("form",{onSubmit:Ut(St,["prevent"]),novalidate:""},[s("div",Hs,[t[44]||(t[44]=r('<div class="d-flex align-items-center mb-4" data-v-c32c4ff0><div class="symbol symbol-30px me-3" data-v-c32c4ff0><div class="symbol-label bg-primary" data-v-c32c4ff0><span class="text-white fw-bold fs-6" data-v-c32c4ff0>1</span></div></div><h5 class="mb-0 text-gray-800" data-v-c32c4ff0>Select Product</h5></div>',1)),S(s("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.ProductID=e),class:y(["form-select form-select-lg form-select-solid",{"is-invalid":u.ProductID}]),onChange:_t},[t[43]||(t[43]=s("option",{value:""},"Choose a non-fuel product to adjust...",-1)),(v(!0),f(st,null,at(Q.value,e=>(v(),f("option",{key:e.ProductID,value:e.ProductID},l(e.Name)+" - "+l(e.ProductType)+" ("+l(m(e.UnitPrice))+"/unit) ",9,Js))),128))],34),[[et,o.ProductID]]),u.ProductID?(v(),f("div",qs,l(u.ProductID),1)):L("",!0)]),x.value?(v(),f("div",Gs,[s("div",Ws,[t[48]||(t[48]=r('<div class="symbol symbol-50px me-4" data-v-c32c4ff0><div class="symbol-label bg-info" data-v-c32c4ff0><i class="ki-duotone ki-information-5 fs-2 text-white" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span><span class="path3" data-v-c32c4ff0></span></i></div></div>',1)),s("div",zs,[t[47]||(t[47]=s("h6",{class:"mb-1 text-gray-800"},"Current Stock Information",-1)),s("div",Ys,[s("div",Ks,[t[45]||(t[45]=s("div",{class:"fs-7 text-muted"},"Current Stock",-1)),s("div",Xs,l(j(x.value.CurrentStock))+" units ",1)]),s("div",Zs,[t[46]||(t[46]=s("div",{class:"fs-7 text-muted"},"Current Value",-1)),s("div",ta,l(m(tt(x.value))),1)])])])])])):L("",!0),s("div",sa,[t[55]||(t[55]=r('<div class="d-flex align-items-center mb-4" data-v-c32c4ff0><div class="symbol symbol-30px me-3" data-v-c32c4ff0><div class="symbol-label bg-warning" data-v-c32c4ff0><span class="text-white fw-bold fs-6" data-v-c32c4ff0>2</span></div></div><h5 class="mb-0 text-gray-800" data-v-c32c4ff0>Adjustment Details</h5></div>',1)),s("div",aa,[s("div",ea,[t[50]||(t[50]=s("label",{class:"required form-label fw-semibold"},"Adjustment Type",-1)),S(s("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>o.ChangeType=e),class:y(["form-select form-select-lg form-select-solid",{"is-invalid":u.ChangeType}])},t[49]||(t[49]=[r('<option value="" data-v-c32c4ff0>Select adjustment type...</option><option value="Physical Count" data-v-c32c4ff0>Physical Count Adjustment</option><option value="Loss Adjustment" data-v-c32c4ff0>Loss/Shrinkage</option><option value="Found Inventory" data-v-c32c4ff0>Found Inventory</option><option value="Quality Control" data-v-c32c4ff0>Quality Control</option><option value="Transfer Correction" data-v-c32c4ff0>Transfer Correction</option><option value="System Correction" data-v-c32c4ff0>System Correction</option><option value="Delivery" data-v-c32c4ff0>Delivery Received</option><option value="Other" data-v-c32c4ff0>Other</option>',9)]),2),[[et,o.ChangeType]]),u.ChangeType?(v(),f("div",oa,l(u.ChangeType),1)):L("",!0)]),s("div",na,[t[53]||(t[53]=s("label",{class:"required form-label fw-semibold"},"Quantity Change",-1)),s("div",la,[t[51]||(t[51]=s("span",{class:"input-group-text"},"±",-1)),S(s("input",{"onUpdate:modelValue":t[6]||(t[6]=e=>o.QuantityChange=e),type:"number",step:"0.01",class:y(["form-control form-control-lg form-control-solid",{"is-invalid":u.QuantityChange}]),placeholder:"Enter adjustment amount"},null,2),[[W,o.QuantityChange]]),t[52]||(t[52]=s("span",{class:"input-group-text"},"units",-1))]),u.QuantityChange?(v(),f("div",ia,l(u.QuantityChange),1)):L("",!0),t[54]||(t[54]=s("div",{class:"form-text"},"Use negative numbers for stock reductions",-1))])])]),s("div",ca,[t[61]||(t[61]=r('<div class="d-flex align-items-center mb-4" data-v-c32c4ff0><div class="symbol symbol-30px me-3" data-v-c32c4ff0><div class="symbol-label bg-success" data-v-c32c4ff0><span class="text-white fw-bold fs-6" data-v-c32c4ff0>3</span></div></div><h5 class="mb-0 text-gray-800" data-v-c32c4ff0>Documentation &amp; Details</h5></div>',1)),s("div",ra,[s("div",da,[t[56]||(t[56]=s("label",{class:"required form-label fw-semibold"},"Reason for Adjustment",-1)),S(s("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>o.ReasonForChange=e),type:"text",class:y(["form-control form-control-lg form-control-solid",{"is-invalid":u.ReasonForChange}]),placeholder:"Provide a detailed explanation for this adjustment"},null,2),[[W,o.ReasonForChange]]),u.ReasonForChange?(v(),f("div",ua,l(u.ReasonForChange),1)):L("",!0)]),s("div",fa,[t[57]||(t[57]=s("label",{class:"form-label fw-semibold"},"Additional Notes",-1)),S(s("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>o.Notes=e),class:"form-control form-control-solid",rows:"4",placeholder:"Any additional observations, batch numbers, or supporting information..."},null,512),[[W,o.Notes]])]),s("div",va,[t[59]||(t[59]=s("label",{class:"form-label fw-semibold"},"Batch Number",-1)),S(s("input",{"onUpdate:modelValue":t[9]||(t[9]=e=>o.BatchNumber=e),type:"text",class:"form-control form-control-lg form-control-solid",placeholder:"Optional batch or lot number"},null,512),[[W,o.BatchNumber]]),t[60]||(t[60]=s("label",{class:"form-label fw-semibold mt-4"},"Measurement Method",-1)),S(s("select",{"onUpdate:modelValue":t[10]||(t[10]=e=>o.MeasurementMethod=e),class:"form-select form-select-solid"},t[58]||(t[58]=[r('<option value="Manual Count" data-v-c32c4ff0>Manual Count</option><option value="Tank Dipping" data-v-c32c4ff0>Tank Dipping</option><option value="Meter Reading" data-v-c32c4ff0>Meter Reading</option><option value="Electronic Gauge" data-v-c32c4ff0>Electronic Gauge</option><option value="Calculated" data-v-c32c4ff0>Calculated</option><option value="System Generated" data-v-c32c4ff0>System Generated</option>',6)]),512),[[et,o.MeasurementMethod]])])])]),x.value&&o.QuantityChange?(v(),f("div",pa,[t[66]||(t[66]=r('<div class="d-flex align-items-center mb-4" data-v-c32c4ff0><div class="symbol symbol-40px me-3" data-v-c32c4ff0><div class="symbol-label bg-primary" data-v-c32c4ff0><i class="ki-duotone ki-chart-pie fs-2 text-white" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span><span class="path3" data-v-c32c4ff0></span></i></div></div><h6 class="mb-0 text-gray-800" data-v-c32c4ff0>Financial Impact Preview</h6></div>',1)),s("div",ma,[s("div",ga,[t[62]||(t[62]=s("div",{class:"fs-7 text-muted"},"Current Stock",-1)),s("div",ya,l(j(x.value.CurrentStock)),1),s("div",ha,l(m(tt(x.value))),1)]),s("div",ba,[t[63]||(t[63]=s("div",{class:"fs-7 text-muted"},"Adjustment",-1)),s("div",{class:y(["fs-5 fw-bold",parseFloat(o.QuantityChange)>=0?"text-success":"text-danger"])},l(parseFloat(o.QuantityChange)>=0?"+":"")+l(j(o.QuantityChange)),3),s("div",{class:y(["fs-7",parseFloat(o.QuantityChange)>=0?"text-success":"text-danger"])},l(m(E())),3)]),s("div",xa,[t[64]||(t[64]=s("div",{class:"fs-7 text-muted"},"New Stock",-1)),s("div",wa,l(j(ct())),1),s("div",ka,l(m(Dt())),1)]),s("div",Ca,[t[65]||(t[65]=s("div",{class:"fs-7 text-muted"},"Net Impact",-1)),s("div",{class:y(["fs-5 fw-bold",E()>=0?"text-success":"text-danger"])},l(E()>=0?"+":"")+l(m(E())),3),s("div",Sa,l(E()>=0?"Value Added":"Value Lost"),1)])])])):L("",!0),s("div",Ia,[s("button",{type:"submit",class:"btn btn-primary btn-lg px-12",disabled:T.value||!yt.value},[T.value?(v(),f("span",_a)):(v(),f("i",Pa,t[67]||(t[67]=[s("span",{class:"path1"},null,-1),s("span",{class:"path2"},null,-1)]))),R(" "+l(T.value?"Processing Adjustment...":"Create Adjustment"),1)],8,Da)])],32)])])]),s("div",Ta,[s("div",Fa,[t[73]||(t[73]=s("div",{class:"card-header border-0 pt-6"},[s("h3",{class:"card-title fw-bold text-gray-900"},"Quick Actions")],-1)),s("div",Na,[s("div",Aa,[s("button",{class:"btn btn-light-success btn-lg text-start",onClick:t[11]||(t[11]=e=>J("Physical Count","Monthly physical stock count verification"))},t[69]||(t[69]=[r('<div class="d-flex align-items-center" data-v-c32c4ff0><div class="symbol symbol-40px me-4" data-v-c32c4ff0><div class="symbol-label bg-success" data-v-c32c4ff0><i class="ki-duotone ki-search-list fs-2 text-white" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span><span class="path3" data-v-c32c4ff0></span></i></div></div><div data-v-c32c4ff0><div class="fw-bold" data-v-c32c4ff0>Physical Count</div><div class="fs-7 text-muted" data-v-c32c4ff0>Stock verification</div></div></div>',1)])),s("button",{class:"btn btn-light-warning btn-lg text-start",onClick:t[12]||(t[12]=e=>J("Loss Adjustment","Stock loss due to evaporation or spillage"))},t[70]||(t[70]=[r('<div class="d-flex align-items-center" data-v-c32c4ff0><div class="symbol symbol-40px me-4" data-v-c32c4ff0><div class="symbol-label bg-warning" data-v-c32c4ff0><i class="ki-duotone ki-arrow-down fs-2 text-white" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></div></div><div data-v-c32c4ff0><div class="fw-bold" data-v-c32c4ff0>Record Loss</div><div class="fs-7 text-muted" data-v-c32c4ff0>Evaporation, spillage</div></div></div>',1)])),s("button",{class:"btn btn-light-info btn-lg text-start",onClick:t[13]||(t[13]=e=>J("Delivery","Stock replenishment from supplier delivery"))},t[71]||(t[71]=[r('<div class="d-flex align-items-center" data-v-c32c4ff0><div class="symbol symbol-40px me-4" data-v-c32c4ff0><div class="symbol-label bg-info" data-v-c32c4ff0><i class="ki-duotone ki-truck fs-2 text-white" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span><span class="path3" data-v-c32c4ff0></span><span class="path4" data-v-c32c4ff0></span></i></div></div><div data-v-c32c4ff0><div class="fw-bold" data-v-c32c4ff0>New Delivery</div><div class="fs-7 text-muted" data-v-c32c4ff0>Supplier replenishment</div></div></div>',1)])),s("button",{class:"btn btn-light-primary btn-lg text-start",onClick:t[14]||(t[14]=e=>J("Transfer Correction","Correction for inter-station transfer discrepancy"))},t[72]||(t[72]=[r('<div class="d-flex align-items-center" data-v-c32c4ff0><div class="symbol symbol-40px me-4" data-v-c32c4ff0><div class="symbol-label bg-primary" data-v-c32c4ff0><i class="ki-duotone ki-arrows-loop fs-2 text-white" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></div></div><div data-v-c32c4ff0><div class="fw-bold" data-v-c32c4ff0>Transfer Fix</div><div class="fs-7 text-muted" data-v-c32c4ff0>Discrepancy correction</div></div></div>',1)]))])])])])],512),[[G,b.value==="adjust"]]),S(s("div",ja,[s("div",Va,[s("div",Ua,[s("div",{class:"card-header border-0 pt-6"},[t[75]||(t[75]=s("h3",{class:"card-title fw-bold text-gray-900"},"Adjustment History",-1)),s("div",{class:"card-toolbar"},[s("button",{class:"btn btn-sm btn-light-primary",onClick:X},t[74]||(t[74]=[s("i",{class:"ki-duotone ki-arrows-circle fs-2"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1),R(" Refresh ")]))])]),s("div",Oa,[I.value.length?(v(),f("div",La,[s("table",Ma,[t[78]||(t[78]=s("thead",{class:"bg-light"},[s("tr",{class:"fw-semibold fs-6 text-gray-800 border-bottom-2 border-gray-200"},[s("th",{class:"min-w-150px"},"Date & Time"),s("th",{class:"min-w-150px"},"Product"),s("th",{class:"min-w-100px"},"Type"),s("th",{class:"min-w-100px text-end"},"Previous Stock"),s("th",{class:"min-w-100px text-end"},"Change"),s("th",{class:"min-w-100px text-end"},"New Stock"),s("th",{class:"min-w-120px text-end"},"Financial Impact"),s("th",{class:"min-w-200px"},"Reason"),s("th",{class:"min-w-100px"},"User")])],-1)),s("tbody",null,[(v(!0),f(st,null,at(I.value,e=>(v(),f("tr",{key:e.HistoryID,class:"hover-bg-light"},[s("td",null,[s("div",Qa,l(Nt(e.ChangeDate)),1),s("div",$a,l(At(e.ChangeDate)),1)]),s("td",null,[s("div",Ea,[t[77]||(t[77]=r('<div class="symbol symbol-30px me-3" data-v-c32c4ff0><div class="symbol-label bg-light-primary" data-v-c32c4ff0><i class="ki-duotone ki-abstract-39 fs-6 text-primary" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></div></div>',1)),s("div",Ba,l(it(e.ProductID)),1)])]),s("td",null,[s("span",Ha,l(e.ChangeType),1)]),s("td",Ja,l(j(e.PreviousQuantity)),1),s("td",qa,[s("span",{class:y(["fw-bold",parseFloat(e.QuantityChange)>=0?"text-success":"text-danger"])},l(parseFloat(e.QuantityChange)>=0?"+":"")+l(j(e.QuantityChange)),3)]),s("td",Ga,l(j(e.NewQuantity)),1),s("td",Wa,[s("span",{class:y(["fw-bold",parseFloat(e.TotalValue||0)>=0?"text-success":"text-danger"])},l(m(e.TotalValue||0)),3)]),s("td",null,[s("div",za,l(e.ReasonForChange||"N/A"),1),e.Notes?(v(),f("div",Ya,l(e.Notes),1)):L("",!0)]),s("td",null,l(Tt(e.RecordedBy)),1)]))),128))])])])):(v(),f("div",Ra,t[76]||(t[76]=[r('<div class="symbol symbol-100px mx-auto mb-7" data-v-c32c4ff0><div class="symbol-label bg-light-info" data-v-c32c4ff0><i class="ki-duotone ki-file-deleted fs-3x text-info" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></div></div><h4 class="text-muted" data-v-c32c4ff0>No adjustment history found</h4><p class="text-muted" data-v-c32c4ff0> Your adjustment history will appear here once you make adjustments. </p>',3)])))])])])],512),[[G,b.value==="history"]]),S(s("div",Ka,[s("div",Xa,[s("div",Za,[t[79]||(t[79]=s("div",{class:"card-header border-0 pt-6"},[s("h3",{class:"card-title fw-bold text-gray-900"},"Financial Impact Trends"),s("div",{class:"card-toolbar"},[s("span",{class:"badge badge-light-info"},"30-Day Overview")])],-1)),s("div",te,[s("div",{ref_key:"financialChart",ref:z,style:{width:"100%",height:"400px"}},null,512)])])]),s("div",se,[s("div",ae,[t[91]||(t[91]=s("div",{class:"card-header border-0 pt-6"},[s("h3",{class:"card-title fw-bold text-gray-900"},"Key Metrics")],-1)),s("div",ee,[s("div",oe,[s("div",ne,[s("div",le,[t[81]||(t[81]=r('<div class="symbol symbol-40px me-3" data-v-c32c4ff0><div class="symbol-label bg-light-success" data-v-c32c4ff0><i class="ki-duotone ki-arrow-up fs-2 text-success" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></div></div>',1)),s("div",null,[t[80]||(t[80]=s("div",{class:"fs-6 text-muted"},"Total Gains",-1)),s("div",ie,l(m(A.value.totalGains)),1)])])]),t[88]||(t[88]=s("div",{class:"separator"},null,-1)),s("div",ce,[s("div",re,[t[83]||(t[83]=r('<div class="symbol symbol-40px me-3" data-v-c32c4ff0><div class="symbol-label bg-light-danger" data-v-c32c4ff0><i class="ki-duotone ki-arrow-down fs-2 text-danger" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></div></div>',1)),s("div",null,[t[82]||(t[82]=s("div",{class:"fs-6 text-muted"},"Total Losses",-1)),s("div",de,l(m(Math.abs(A.value.totalLosses))),1)])])]),t[89]||(t[89]=s("div",{class:"separator"},null,-1)),s("div",ue,[s("div",fe,[t[85]||(t[85]=r('<div class="symbol symbol-40px me-3" data-v-c32c4ff0><div class="symbol-label bg-light-primary" data-v-c32c4ff0><i class="ki-duotone ki-chart-line-up fs-2 text-primary" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></div></div>',1)),s("div",null,[t[84]||(t[84]=s("div",{class:"fs-6 text-muted"},"Net Impact",-1)),s("div",{class:y(["fs-5 fw-bold",A.value.netImpact>=0?"text-success":"text-danger"])},l(m(A.value.netImpact)),3)])])]),t[90]||(t[90]=s("div",{class:"separator"},null,-1)),s("div",ve,[s("div",pe,[t[87]||(t[87]=r('<div class="symbol symbol-40px me-3" data-v-c32c4ff0><div class="symbol-label bg-light-warning" data-v-c32c4ff0><i class="ki-duotone ki-percentage fs-2 text-warning" data-v-c32c4ff0><span class="path1" data-v-c32c4ff0></span><span class="path2" data-v-c32c4ff0></span></i></div></div>',1)),s("div",null,[t[86]||(t[86]=s("div",{class:"fs-6 text-muted"},"Loss Ratio",-1)),s("div",me,l(A.value.lossRatio)+"%",1)])])])])])])]),s("div",ge,[s("div",ye,[t[92]||(t[92]=s("div",{class:"card-header border-0 pt-6"},[s("h3",{class:"card-title fw-bold text-gray-900"},"Product Performance Overview")],-1)),s("div",he,[s("div",{ref_key:"productChart",ref:Y,style:{width:"100%",height:"300px"}},null,512)])])])],512),[[G,b.value==="analytics"]])])])}}},Se=jt(xe,[["__scopeId","data-v-c32c4ff0"]]);export{Se as default};
