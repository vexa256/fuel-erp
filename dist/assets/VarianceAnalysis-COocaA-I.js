import { _ as Vt, r as d, c as x, o as ct, S, d as u, e as t, g as G, f as O, t as o, w as I, j as bt, F as E, k as L, v as yt, i as H, x as J, h as r, p as f } from "./index-Fk_fMhvq.js"; const Ot = { class: "d-flex flex-column gap-5" }, Et = { class: "card card-flush bg-gradient-primary" }, Lt = { class: "card-body p-6" }, Ft = { class: "d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-4" }, Mt = { class: "d-flex align-items-center gap-4" }, Bt = { class: "text-dark opacity-75 mb-0 fs-6" }, Ut = { class: "d-flex gap-2" }, Gt = ["disabled"], Ht = { class: "card card-flush" }, jt = { class: "card-body py-4" }, Yt = { class: "row g-3 align-items-end" }, zt = { key: 0, class: "col-12 col-md-auto" }, Wt = ["value"], Kt = { class: "col-12 col-md-auto" }, qt = { key: 1, class: "col-12 col-md-auto" }, Jt = { key: 2, class: "col-12 col-md-auto" }, Qt = { key: 0, class: "card card-flush bg-light-danger" }, Xt = { class: "card-body py-4 px-6" }, Zt = { class: "d-flex align-items-center gap-3" }, ts = { class: "flex-grow-1" }, ss = { class: "fw-bold text-danger mb-1" }, as = { class: "text-gray-700 mb-0" }, es = { class: "card card-flush" }, ls = { class: "card-body p-4" }, os = { class: "row g-3" }, ns = ["onClick"], is = { key: 0, class: "path3" }, cs = { class: "text-center" }, rs = { class: "fw-bold fs-6 mb-1" }, ds = { class: "fs-7 opacity-75" }, us = { class: "card card-flush" }, fs = { class: "card-body" }, vs = { class: "row g-4 mb-6" }, gs = { class: "card-body p-4" }, ps = { class: "d-flex align-items-center justify-content-between mb-3" }, hs = { class: "fw-bold text-gray-900 mb-0" }, ms = { class: "row g-2" }, bs = { class: "col-6" }, ys = { class: "fs-7 text-gray-600 fw-semibold" }, xs = { class: "fw-bold text-gray-900" }, _s = { class: "col-6" }, ws = { class: "fw-bold text-gray-900" }, Ss = { class: "col-12 mt-3" }, ks = { class: "row g-4" }, Ds = { class: "card card-flush bg-light h-100" }, Is = { class: "card-body p-4" }, Cs = { class: "d-flex align-items-center justify-content-between mb-3" }, Ts = { class: "d-flex align-items-center gap-2" }, As = { class: "fw-bold text-gray-900" }, Ps = { class: "row g-2" }, $s = { class: "col-6" }, Ns = { class: "fw-bold text-gray-900" }, Rs = { class: "col-6" }, Vs = { class: "fw-bold text-success" }, Os = { class: "col-12 mt-2" }, Es = { class: "card-body" }, Ls = { class: "row g-4 mb-6" }, Fs = { class: "col-6 col-md-3" }, Ms = { class: "card card-flush bg-light-success h-100" }, Bs = { class: "card-body p-4 text-center" }, Us = { class: "fw-bold fs-2 text-gray-900 mb-1" }, Gs = { class: "col-6 col-md-3" }, Hs = { class: "card card-flush bg-light-primary h-100" }, js = { class: "card-body p-4 text-center" }, Ys = { class: "fw-bold fs-2 text-gray-900 mb-1" }, zs = { class: "col-6 col-md-3" }, Ws = { class: "card-body p-4 text-center" }, Ks = { class: "fw-bold fs-2 text-gray-900 mb-1" }, qs = { class: "col-6 col-md-3" }, Js = { class: "card card-flush bg-light-info h-100" }, Qs = { class: "card-body p-4 text-center" }, Xs = { class: "fw-bold fs-2 text-gray-900 mb-1" }, Zs = { class: "row g-4" }, ta = { class: "card card-flush bg-light h-100" }, sa = { class: "card-body p-4" }, aa = { class: "d-flex align-items-center justify-content-between mb-3" }, ea = { class: "fw-bold text-gray-900" }, la = { class: "fs-7 text-gray-600" }, oa = { class: "row g-2" }, na = { class: "col-6" }, ia = { class: "fw-bold text-gray-900" }, ca = { class: "col-6" }, ra = { class: "fw-bold text-gray-900" }, da = { class: "col-12 mt-2" }, ua = { class: "card-body" }, fa = { class: "row g-4 mb-6" }, va = { class: "col-6 col-md-3" }, ga = { class: "card-body p-4 text-center" }, pa = { class: "fw-bold fs-2 text-gray-900 mb-1" }, ha = { class: "col-6 col-md-3" }, ma = { class: "card-body p-4 text-center" }, ba = { class: "fw-bold fs-2 text-gray-900 mb-1" }, ya = { class: "col-6 col-md-3" }, xa = { class: "card card-flush bg-light-info" }, _a = { class: "card-body p-4 text-center" }, wa = { class: "fw-bold fs-2 text-gray-900 mb-1" }, Sa = { class: "col-6 col-md-3" }, ka = { class: "card-body p-4 text-center" }, Da = { class: "fw-bold fs-2 text-gray-900 mb-1" }, Ia = { key: 0, class: "text-center py-10" }, Ca = { key: 1 }, Ta = { class: "row g-4" }, Aa = { class: "card card-flush bg-light-danger" }, Pa = { class: "card-body p-4" }, $a = { class: "d-flex align-items-start gap-3" }, Na = { class: "flex-grow-1" }, Ra = { class: "fw-bold text-danger mb-1" }, Va = { class: "text-gray-700 mb-2" }, Oa = { class: "d-flex align-items-center gap-3" }, Ea = { class: "badge badge-light-danger fw-bold" }, La = { class: "text-gray-600 fs-7" }, Fa = { class: "card-body" }, Ma = { class: "row g-4" }, Ba = { class: "col-6 col-md-4 col-lg-3" }, Ua = { class: "card card-flush bg-light-success h-100" }, Ga = { class: "card-body p-4 text-center" }, Ha = { class: "fw-bold fs-2 text-gray-900 mb-1" }, ja = { class: "col-6 col-md-4 col-lg-3" }, Ya = { class: "card card-flush bg-light-primary h-100" }, za = { class: "card-body p-4 text-center" }, Wa = { class: "fw-bold fs-2 text-gray-900 mb-1" }, Ka = { class: "col-6 col-md-4 col-lg-3" }, qa = { class: "card card-flush bg-light-warning h-100" }, Ja = { class: "card-body p-4 text-center" }, Qa = { class: "fw-bold fs-2 text-gray-900 mb-1" }, Xa = { class: "col-6 col-md-4 col-lg-3" }, Za = { class: "card card-flush bg-light-info h-100" }, te = { class: "card-body p-4 text-center" }, se = { class: "fw-bold fs-2 text-gray-900 mb-1" }, ae = { class: "col-6 col-md-4 col-lg-3" }, ee = { class: "card card-flush bg-light-success h-100" }, le = { class: "card-body p-4 text-center" }, oe = { class: "fw-bold fs-2 text-gray-900 mb-1" }, ne = { class: "col-6 col-md-4 col-lg-3" }, ie = { class: "card-body p-4 text-center" }, ce = { class: "fw-bold fs-2 text-gray-900 mb-1" }, re = { class: "col-6 col-md-4 col-lg-3" }, de = { class: "card-body p-4 text-center" }, ue = { class: "fw-bold fs-2 text-gray-900 mb-1" }, fe = { class: "col-6 col-md-4 col-lg-3" }, ve = { class: "card-body p-4 text-center" }, ge = { class: "fw-bold fs-2 text-gray-900 mb-1" }, pe = { class: "card card-flush" }, he = { class: "card-body py-4" }, me = { class: "d-flex justify-content-between align-items-center" }, be = ["disabled"], ye = { class: "d-flex gap-2" }, xe = ["disabled"], _e = { key: 1, class: "overlay overlay-block rounded" }, we = { class: "overlay-wrapper" }, Se = { class: "overlay-layer bg-dark bg-opacity-50 d-flex align-items-center justify-content-center" }, ke = { class: "d-flex flex-column align-items-center" }, De = { class: "text-white fw-semibold fs-5" }, Ie = "https://backend.cloudfuelstationmis.com/api/records/v1", Ce = {
  __name: "VarianceAnalysis", setup(Te) {
    const xt = () => { try { const a = localStorage.getItem("kigrama_user_data"); return a ? JSON.parse(a) : null } catch (a) { return console.error("Error parsing auth data:", a), null } }, _t = () => localStorage.getItem("kigrama_auth_token") || "", j = d(!1), rt = d("Loading intelligence..."), F = d(xt()), g = d(null), C = d(null), p = d(1), T = d("TODAY"), M = d(""), B = d(""), dt = d(!1), Q = d([]), X = d([]), ut = d([]), Z = d([]), tt = d([]), st = d([]), at = d([]), ft = d([]), vt = d([]), A = d([]); d([]); const K = d([]), P = d([{ id: 1, title: "Fuel Intelligence", icon: "oil-barrel", color: "primary", description: "Variance & Performance" }, { id: 2, title: "Financial Intelligence", icon: "chart-pie-simple", color: "success", description: "Reconciliation & P&L" }, { id: 3, title: "Risk Intelligence", icon: "security-user", color: "danger", description: "Fraud & Compliance" }, { id: 4, title: "Executive Summary", icon: "chart-line-up", color: "warning", description: "Critical KPIs" }]), h = (a, s = 0) => { if (a == null || a === "") return s; const l = parseFloat(a); return isNaN(l) ? s : l }, c = (a, s = 0) => { if (a == null || a === "") return s; const l = parseInt(a); return isNaN(l) ? s : l }, $ = x(() => { const a = new Date().toISOString().split("T")[0]; return st.value.filter(s => { var n; if (!s || !((n = g.value) != null && n.StationID)) return !1; const l = s.TransactionDate; return l ? l.startsWith(a) && c(s.StationID) === c(g.value.StationID) : !1 }) }), et = x(() => $.value.reduce((a, s) => a + h(s.TotalAmount), 0)), wt = x(() => $.value.reduce((a, s) => a + h(s.Quantity), 0)), gt = x(() => $.value.length === 0 ? 0 : et.value / $.value.length), k = x(() => { var l; if (!((l = g.value) != null && l.StationID)) return []; const a = Z.value.filter(n => c(n.StationID) === c(g.value.StationID)), s = at.value.filter(n => c(n.StationID) === c(g.value.StationID)); return a.map(n => { const e = X.value.find(U => c(U.ProductID) === c(n.ProductID)), i = s.find(U => c(U.ProductID) === c(n.ProductID)); if (!e || !i) return null; const v = h(n.CurrentLevel), b = h(i.CurrentStock), N = v - b, R = b > 0 ? N / b * 100 : 0; let V = "NORMAL"; return Math.abs(R) > 10 ? V = "CRITICAL" : Math.abs(R) > 5 ? V = "WARNING" : Math.abs(R) > 2 && (V = "ATTENTION"), { ProductID: c(n.ProductID), TankID: c(n.TankID), TankNumber: n.TankNumber || `T${n.TankID}`, ProductName: e.Name, TankCapacity: h(n.Capacity), PhysicalReading: v, BookStock: b, Variance: N, VariancePercentage: parseFloat(R.toFixed(2)), Status: V, LastUpdated: n.UpdatedAt || new Date().toISOString() } }).filter(n => n !== null).sort((n, e) => Math.abs(e.VariancePercentage) - Math.abs(n.VariancePercentage)) }), Y = x(() => k.value.reduce((a, s) => a + Math.abs(s.Variance), 0)), St = x(() => tt.value.filter(a => { var s; return c(a.StationID) === c((s = g.value) == null ? void 0 : s.StationID) }).map(a => { const s = $.value.filter(v => c(v.PumpID) === c(a.PumpID)), l = s.reduce((v, b) => v + h(b.Quantity), 0), n = s.reduce((v, b) => v + h(b.TotalAmount), 0), e = ft.value.filter(v => c(v.PumpID) === c(a.PumpID)).slice(-7); let i = 99.5; if (e.length > 0) { const v = e.reduce((b, N) => b + Math.abs(h(N.Variance)), 0) / e.length; i = Math.max(95, 100 - v / 100) } return { ...a, DailySales: l, DailyRevenue: n, AccuracyPercent: i.toFixed(1), TransactionCount: s.length } }).sort((a, s) => s.DailySales - a.DailySales)), z = x(() => vt.value.filter(a => { var s; return c(a.StationID) === c((s = g.value) == null ? void 0 : s.StationID) }).map(a => { const s = h(a.OpeningBalance) + h(a.CashSales) - h(a.CashPayouts), l = h(a.ActualCash) || h(a.ClosingBalance), n = l - s; return { ...a, ExpectedCash: s, ActualCash: l, Variance: n.toFixed(2), VariancePercent: s > 0 ? (n / s * 100).toFixed(2) : "0.00" } }).sort((a, s) => new Date(s.ShiftDate) - new Date(a.ShiftDate))), y = x(() => z.value.reduce((a, s) => a + Math.abs(h(s.Variance)), 0)), m = x(() => { const a = []; return k.value.forEach(s => { s.Status === "CRITICAL" && a.push({ id: `fuel-${s.ProductID}`, type: "FUEL_VARIANCE", title: `${s.ProductName} Critical Variance`, message: `${s.VariancePercentage}% variance detected in Tank ${s.TankNumber}`, severity: "HIGH", timestamp: new Date().toISOString() }) }), y.value > 5e4 && a.push({ id: "cash-variance", type: "CASH_VARIANCE", title: "Cash Reconciliation Issue", message: `${_(y.value)} total variance detected across ${z.value.length} drawers`, severity: "HIGH", timestamp: new Date().toISOString() }), A.value.forEach(s => { s.RiskLevel === "HIGH" && a.push({ id: `fraud-${s.FraudLogID}`, type: "SECURITY", title: s.RuleName || "Security Alert", message: s.Description || "Suspicious activity detected", severity: "HIGH", timestamp: s.DetectedAt || s.CreatedAt }) }), a.sort((s, l) => new Date(l.timestamp) - new Date(s.timestamp)) }), pt = x(() => { let a = 100; const s = k.value.length > 0 ? k.value.reduce((e, i) => e + Math.abs(i.VariancePercentage), 0) / k.value.length : 0; a -= Math.min(s * 2, 25), a -= Math.min(A.value.length * 5, 20); const l = z.value.reduce((e, i) => e + i.ExpectedCash, 0), n = l > 0 ? y.value / l * 100 : 0; return a -= Math.min(n, 15), Math.max(0, Math.round(a)) }), lt = x(() => k.value.filter(a => a.Status === "CRITICAL" || a.Status === "WARNING").length), w = async (a, s = {}) => { const e = { ...{ headers: { "Content-Type": "application/json", Authorization: `Bearer ${_t()}` } }, ...s }; try { const i = await fetch(`${Ie}${a}`, e); if (!i.ok) { if (i.status === 401) throw localStorage.removeItem("kigrama_auth_token"), localStorage.removeItem("kigrama_user_data"), window.location.href = "/login", new Error("Session expired. Please login again."); const b = await i.json().catch(() => ({})); throw new Error(b.message || `API Error: ${i.status} - ${i.statusText}`) } const v = await i.json(); return v.records || v } catch (i) { throw console.error(`API Request failed for ${a}:`, i), i } }, kt = async () => { var a; if ((a = g.value) != null && a.StationID) try { const s = g.value.StationID, l = Dt(), [n, e, i, v, b, N, R, V, U, mt] = await Promise.allSettled([w("/Stations"), w("/Products"), w("/users"), w("/Tanks"), w("/Pumps"), w(`/Transactions${l ? "?" + l : ""}`), w("/StationInventory"), w(`/DailyReadings${l ? "?" + l : ""}`), w(`/CashDrawers${l ? "?" + l : ""}`), w(`/FraudDetectionLogs${l ? "?" + l : ""}`)]); n.status === "fulfilled" && (Q.value = n.value || []), e.status === "fulfilled" && (X.value = e.value || []), i.status === "fulfilled" && (ut.value = i.value || []), v.status === "fulfilled" && (Z.value = v.value || []), b.status === "fulfilled" && (tt.value = b.value || []), N.status === "fulfilled" && (st.value = N.value || []), R.status === "fulfilled" && (at.value = R.value || []), V.status === "fulfilled" && (ft.value = V.value || []), U.status === "fulfilled" && (vt.value = U.value || []), mt.status === "fulfilled" && (A.value = mt.value || []), console.log("âœ… Data fetched successfully:", { stations: Q.value.length, products: X.value.length, tanks: Z.value.length, pumps: tt.value.length, transactions: st.value.length, stationInventory: at.value.length, fraudLogs: A.value.length }) } catch (s) { throw console.error("Error fetching critical data:", s), s } }, Dt = () => { const a = new Date; let s, l; switch (T.value) { case "TODAY": s = new Date(a.setHours(0, 0, 0, 0)).toISOString().split("T")[0], l = new Date().toISOString().split("T")[0]; break; case "YESTERDAY": const n = new Date(a); n.setDate(n.getDate() - 1), s = n.toISOString().split("T")[0], l = n.toISOString().split("T")[0]; break; case "WEEK": const e = new Date(a); e.setDate(a.getDate() - a.getDay()), s = e.toISOString().split("T")[0], l = new Date().toISOString().split("T")[0]; break; case "MONTH": s = new Date(a.getFullYear(), a.getMonth(), 1).toISOString().split("T")[0], l = new Date().toISOString().split("T")[0]; break; case "CUSTOM": if (M.value && B.value) s = M.value, l = B.value; else return ""; break; default: return "" }return `TransactionDate>=${s}&TransactionDate<=${l}` }, _ = a => new Intl.NumberFormat("en-UG", { style: "currency", currency: "UGX", minimumFractionDigits: 0 }).format(h(a)), D = a => new Intl.NumberFormat("en-UG").format(h(a)), It = a => { if (!a) return "N/A"; try { return new Date(a).toLocaleDateString("en-GB") } catch { return "Invalid Date" } }, ht = a => { if (!a) return "N/A"; try { return new Date(a).toLocaleString("en-GB") } catch { return "Invalid Date" } }, Ct = a => { const s = ut.value.find(l => c(l.id) === c(a)); return s ? s.name || s.email : `User ${a}` }, q = async a => { p.value !== a && (p.value = a, S.fire({ title: "Loading Intelligence...", text: `Preparing ${P.value[a - 1].title} analytics`, allowOutsideClick: !1, showConfirmButton: !1, timer: 1e3, willOpen: () => { S.showLoading() } })) }, Tt = () => { p.value < P.value.length && q(p.value + 1) }, At = () => { p.value > 1 && q(p.value - 1) }, Pt = async () => { var a; if (C.value && C.value !== ((a = g.value) == null ? void 0 : a.StationID)) { const s = Q.value.find(l => c(l.StationID) === c(C.value)); s && (g.value = s, await W()) } }, ot = async () => { T.value !== "CUSTOM" && (M.value = "", B.value = ""), await W() }, W = async () => { j.value = !0, rt.value = `Loading ${P.value[p.value - 1].title} data...`; try { await kt(), console.log("âœ… Critical intelligence data loaded successfully") } catch (a) { console.error("Error loading data:", a), S.fire({ title: "Data Loading Error", text: "Could not load intelligence data. Please check your connection and try again.", icon: "error", confirmButtonColor: "#f1416c" }) } finally { j.value = !1 } }, $t = async () => { await W(), S.fire({ title: "Data Refreshed!", text: "Intelligence data has been updated successfully", icon: "success", toast: !0, position: "top-end", timer: 2e3, showConfirmButton: !1 }) }, Nt = async () => {
      const a = P.value[p.value - 1]; S.fire({ title: "Exporting Report...", text: `Generating ${a.title} report`, allowOutsideClick: !1, showConfirmButton: !1, willOpen: () => { S.showLoading() } }), setTimeout(() => {
        var s; S.fire({
          title: "Report Generated!", html: `
        <div class="text-start">
          <p class="mb-2"><strong>Report:</strong> ${a.title}</p>
          <p class="mb-2"><strong>Station:</strong> ${(s = g.value) == null ? void 0 : s.StationName}</p>
          <p class="mb-2"><strong>Period:</strong> ${T.value}</p>
          <p class="mb-0"><strong>Generated:</strong> ${ht(new Date().toISOString())}</p>
        </div>
      `, icon: "success", confirmButtonColor: "#3699ff"
        })
      }, 2e3)
    }, Rt = async () => {
      if (m.value.length === 0) { S.fire({ title: "No Critical Alerts", text: "All systems are operating within normal parameters.", icon: "info", confirmButtonColor: "#3699ff" }); return } const a = m.value.map(l => `â€¢ <strong>${l.type}:</strong> ${l.message}`).join("<br>"); (await S.fire({
        title: "Critical Alerts Investigation", html: `
      <div class="text-start">
        <p class="fw-bold mb-3">${m.value.length} alerts require immediate attention:</p>
        <div class="text-gray-700">${a}</div>
      </div>
    `, icon: "warning", confirmButtonText: "Investigate All", confirmButtonColor: "#f1416c", showCancelButton: !0, cancelButtonText: "Dismiss"
      })).isConfirmed && q(3)
    }; ct(async () => { var a, s, l, n, e; console.log("ðŸš€ Critical Intelligence Center - Initializing..."); try { if (!((a = F.value) != null && a.user)) { console.error("âŒ No authenticated user found"), window.location.href = "/login"; return } if (console.log("ðŸ‘¤ Authenticated user:", F.value.user.name || F.value.user.email), ((l = (s = F.value) == null ? void 0 : s.stations) == null ? void 0 : l.length) > 0) K.value = F.value.stations, g.value = F.value.stations[0], C.value = c((n = g.value) == null ? void 0 : n.StationID); else { const v = { StationID: 501, StationName: "Kigrama Kampala Central", Location: "Plot 123, Kampala Road, Kampala", Status: "Active" }; K.value = [v], g.value = v, C.value = c(v.StationID) } const i = new Date; B.value = i.toISOString().split("T")[0], M.value = new Date(i.getTime() - 7 * 24 * 60 * 60 * 1e3).toISOString().split("T")[0], await W(), dt.value = !0, console.log("âœ… Critical Intelligence Center - Initialization Complete"), console.log("ðŸ“Š Active Station:", (e = g.value) == null ? void 0 : e.StationName), console.log("ðŸ“ˆ Current Step:", p.value), console.log("âš ï¸ Critical Alerts:", m.value.length), console.log("ðŸ“ˆ Fuel Variances:", k.value.length), console.log("ðŸ’° Cash Drawers:", z.value.length) } catch (i) { console.error("âŒ Initialization failed:", i), S.fire({ title: "Initialization Error", text: "Could not initialize the intelligence center. Please refresh and try again.", icon: "error", confirmButtonColor: "#f1416c" }) } }); let nt = null; ct(() => { nt = setInterval(async () => { dt.value && !j.value && (console.log("ðŸ”„ Auto-refreshing critical intelligence data..."), await W()) }, 5 * 60 * 1e3) }); const it = () => { nt && clearInterval(nt) }; return ct(() => (window.addEventListener("beforeunload", it), () => { it(), window.removeEventListener("beforeunload", it) })), (a, s) => { var l, n; return f(), u("div", Ot, [t("div", Et, [t("div", Lt, [t("div", Ft, [t("div", Mt, [s[5] || (s[5] = O('<div class="symbol symbol-60px symbol-circle" data-v-7f16f2e4><div class="symbol-label bg-white" data-v-7f16f2e4><i class="ki-duotone ki-chart-pie-4 fs-2x text-primary" data-v-7f16f2e4><span class="path1" data-v-7f16f2e4></span><span class="path2" data-v-7f16f2e4></span><span class="path3" data-v-7f16f2e4></span></i></div></div>', 1)), t("div", null, [s[4] || (s[4] = t("h1", { class: "fw-bold fs-2 mb-1 text-dark" }, "Critical Variance Intelligence Center", -1)), t("p", Bt, o(((l = g.value) == null ? void 0 : l.StationName) || "Loading Station..."), 1)])]), t("div", Ut, [t("button", { class: "btn btn-light btn-sm", onClick: $t, disabled: j.value }, s[6] || (s[6] = [t("i", { class: "ki-duotone ki-arrows-circle fs-3" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1), t("span", { class: "d-none d-md-inline ms-2" }, "Refresh", -1)]), 8, Gt), t("button", { class: "btn btn-warning btn-sm", onClick: Nt }, s[7] || (s[7] = [t("i", { class: "ki-duotone ki-document-down fs-3" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1), t("span", { class: "d-none d-md-inline ms-2" }, "Export", -1)]))])])])]), t("div", Ht, [t("div", jt, [t("div", Yt, [K.value.length > 1 ? (f(), u("div", zt, [s[8] || (s[8] = t("label", { class: "form-label fw-bold fs-7 text-gray-600 mb-2" }, "STATION", -1)), I(t("select", { "onUpdate:modelValue": s[0] || (s[0] = e => C.value = e), onChange: Pt, class: "form-select form-select-lg" }, [(f(!0), u(E, null, L(K.value, e => (f(), u("option", { key: e.StationID, value: e.StationID }, o(e.StationName), 9, Wt))), 128))], 544), [[bt, C.value]])])) : G("", !0), t("div", Kt, [s[10] || (s[10] = t("label", { class: "form-label fw-bold fs-7 text-gray-600 mb-2" }, "ANALYSIS PERIOD", -1)), I(t("select", { "onUpdate:modelValue": s[1] || (s[1] = e => T.value = e), onChange: ot, class: "form-select form-select-lg" }, s[9] || (s[9] = [O('<option value="TODAY" data-v-7f16f2e4>Today</option><option value="YESTERDAY" data-v-7f16f2e4>Yesterday</option><option value="WEEK" data-v-7f16f2e4>This Week</option><option value="MONTH" data-v-7f16f2e4>This Month</option><option value="CUSTOM" data-v-7f16f2e4>Custom Range</option>', 5)]), 544), [[bt, T.value]])]), T.value === "CUSTOM" ? (f(), u("div", qt, [s[11] || (s[11] = t("label", { class: "form-label fw-bold fs-7 text-gray-600 mb-2" }, "FROM DATE", -1)), I(t("input", { "onUpdate:modelValue": s[2] || (s[2] = e => M.value = e), onChange: ot, type: "date", class: "form-control form-control-lg" }, null, 544), [[yt, M.value]])])) : G("", !0), T.value === "CUSTOM" ? (f(), u("div", Jt, [s[12] || (s[12] = t("label", { class: "form-label fw-bold fs-7 text-gray-600 mb-2" }, "TO DATE", -1)), I(t("input", { "onUpdate:modelValue": s[3] || (s[3] = e => B.value = e), onChange: ot, type: "date", class: "form-control form-control-lg" }, null, 544), [[yt, B.value]])])) : G("", !0)])])]), m.value.length > 0 ? (f(), u("div", Qt, [t("div", Xt, [t("div", Zt, [s[14] || (s[14] = t("i", { class: "ki-duotone ki-information-5 fs-2x text-danger" }, [t("span", { class: "path1" }), t("span", { class: "path2" }), t("span", { class: "path3" })], -1)), t("div", ts, [t("h4", ss, o(m.value.length) + " Critical Alert" + o(m.value.length > 1 ? "s" : ""), 1), t("p", as, o(((n = m.value[0]) == null ? void 0 : n.message) || "Immediate attention required"), 1)]), t("button", { class: "btn btn-danger btn-sm", onClick: Rt }, s[13] || (s[13] = [t("i", { class: "ki-duotone ki-eye fs-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" }), t("span", { class: "path3" })], -1), H(" Investigate ")]))])])])) : G("", !0), t("div", es, [t("div", ls, [t("div", os, [(f(!0), u(E, null, L(P.value, e => (f(), u("div", { key: e.id, class: "col-6 col-md-3" }, [t("button", { class: r(["btn w-100 h-100 d-flex flex-column align-items-center gap-3 p-4", p.value === e.id ? `btn-${e.color}` : `btn-light-${e.color}`]), onClick: i => q(e.id) }, [t("i", { class: r(`ki-duotone ki-${e.icon} fs-2x text-${e.color}`) }, [s[15] || (s[15] = t("span", { class: "path1" }, null, -1)), s[16] || (s[16] = t("span", { class: "path2" }, null, -1)), e.icon === "security-user" ? (f(), u("span", is)) : G("", !0)], 2), t("div", cs, [t("div", rs, o(e.title), 1), t("div", ds, o(e.description), 1)])], 10, ns)]))), 128))])])]), t("div", us, [I(t("div", fs, [s[23] || (s[23] = t("h3", { class: "card-title fw-bold mb-6" }, [t("i", { class: "ki-duotone ki-oil-barrel fs-2 me-2 text-primary" }, [t("span", { class: "path1" }), t("span", { class: "path2" })]), H(" Fuel Variance & Performance Intelligence ")], -1)), t("div", vs, [(f(!0), u(E, null, L(k.value.slice(0, 6), e => (f(), u("div", { key: e.ProductID, class: "col-12 col-md-6 col-lg-4" }, [t("div", { class: r(["card card-flush h-100", `bg-light-${e.Status === "CRITICAL" ? "danger" : e.Status === "WARNING" ? "warning" : "success"}`]) }, [t("div", gs, [t("div", ps, [t("h5", hs, o(e.ProductName), 1), t("span", { class: r(`badge badge-light-${e.Status === "CRITICAL" ? "danger" : e.Status === "WARNING" ? "warning" : "success"}`) }, o(e.Status), 3)]), t("div", ms, [t("div", bs, [t("div", ys, "Tank " + o(e.TankNumber), 1), t("div", xs, o(D(e.PhysicalReading)) + "L ", 1)]), t("div", _s, [s[17] || (s[17] = t("div", { class: "fs-7 text-gray-600 fw-semibold" }, "Book Stock", -1)), t("div", ws, o(D(e.BookStock)) + "L", 1)]), t("div", Ss, [s[18] || (s[18] = t("div", { class: "fs-7 text-gray-600 fw-semibold" }, "Variance", -1)), t("div", { class: r(`fw-bold text-${e.Variance > 0 ? "success" : e.Variance < 0 ? "danger" : "gray-700"}`) }, o(e.Variance > 0 ? "+" : "") + o(D(e.Variance)) + "L (" + o(e.VariancePercentage) + "%) ", 3)])])])], 2)]))), 128))]), s[24] || (s[24] = t("h4", { class: "fw-bold text-gray-900 mb-4" }, "Pump Performance Today", -1)), t("div", ks, [(f(!0), u(E, null, L(St.value.slice(0, 6), e => (f(), u("div", { key: e.PumpID, class: "col-12 col-md-6 col-lg-4" }, [t("div", Ds, [t("div", Is, [t("div", Cs, [t("div", Ts, [s[19] || (s[19] = O('<div class="symbol symbol-30px" data-v-7f16f2e4><div class="symbol-label bg-light-primary" data-v-7f16f2e4><i class="ki-duotone ki-gasoline-pump fs-4 text-primary" data-v-7f16f2e4><span class="path1" data-v-7f16f2e4></span><span class="path2" data-v-7f16f2e4></span><span class="path3" data-v-7f16f2e4></span></i></div></div>', 1)), t("div", As, o(e.PumpName), 1)]), t("span", { class: r(`badge badge-light-${e.Status === "Active" ? "success" : "warning"}`) }, o(e.Status), 3)]), t("div", Ps, [t("div", $s, [s[20] || (s[20] = t("div", { class: "fs-7 text-gray-600 fw-semibold" }, "Sales", -1)), t("div", Ns, o(D(e.DailySales)) + "L", 1)]), t("div", Rs, [s[21] || (s[21] = t("div", { class: "fs-7 text-gray-600 fw-semibold" }, "Revenue", -1)), t("div", Vs, o(_(e.DailyRevenue)), 1)]), t("div", Os, [s[22] || (s[22] = t("div", { class: "fs-7 text-gray-600 fw-semibold" }, "Accuracy", -1)), t("div", { class: r(`fw-bold text-${e.AccuracyPercent > 99 ? "success" : e.AccuracyPercent > 98 ? "warning" : "danger"}`) }, o(e.AccuracyPercent) + "% ", 3)])])])])]))), 128))])], 512), [[J, p.value === 1]]), I(t("div", Es, [s[36] || (s[36] = t("h3", { class: "card-title fw-bold mb-6" }, [t("i", { class: "ki-duotone ki-chart-pie-simple fs-2 me-2 text-success" }, [t("span", { class: "path1" }), t("span", { class: "path2" })]), H(" Financial Reconciliation Intelligence ")], -1)), t("div", Ls, [t("div", Fs, [t("div", Ms, [t("div", Bs, [s[25] || (s[25] = t("i", { class: "ki-duotone ki-dollar fs-3x text-success mb-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" }), t("span", { class: "path3" })], -1)), t("h4", Us, o(_(et.value)), 1), s[26] || (s[26] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Total Sales Today", -1))])])]), t("div", Gs, [t("div", Hs, [t("div", js, [s[27] || (s[27] = O('<i class="ki-duotone ki-chart-simple fs-3x text-primary mb-2" data-v-7f16f2e4><span class="path1" data-v-7f16f2e4></span><span class="path2" data-v-7f16f2e4></span><span class="path3" data-v-7f16f2e4></span><span class="path4" data-v-7f16f2e4></span></i>', 1)), t("h4", Ys, o(D($.value.length)), 1), s[28] || (s[28] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Transactions Today", -1))])])]), t("div", zs, [t("div", { class: r(["card card-flush", `bg-light-${y.value > 5e4 ? "danger" : y.value > 2e4 ? "warning" : "success"}`]) }, [t("div", Ws, [t("i", { class: r(["ki-duotone ki-wallet fs-3x mb-2", `text-${y.value > 5e4 ? "danger" : y.value > 2e4 ? "warning" : "success"}`]) }, s[29] || (s[29] = [t("span", { class: "path1" }, null, -1), t("span", { class: "path2" }, null, -1), t("span", { class: "path3" }, null, -1), t("span", { class: "path4" }, null, -1)]), 2), t("h4", Ks, o(_(y.value)), 1), s[30] || (s[30] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Cash Variance", -1))])], 2)]), t("div", qs, [t("div", Js, [t("div", Qs, [s[31] || (s[31] = t("i", { class: "ki-duotone ki-calculator fs-3x text-info mb-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" }), t("span", { class: "path3" })], -1)), t("h4", Xs, o(_(gt.value)), 1), s[32] || (s[32] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Average Transaction", -1))])])])]), s[37] || (s[37] = t("h4", { class: "fw-bold text-gray-900 mb-4" }, "Cash Drawer Reconciliation", -1)), t("div", Zs, [(f(!0), u(E, null, L(z.value.slice(0, 6), e => (f(), u("div", { key: e.DrawerID, class: "col-12 col-md-6" }, [t("div", ta, [t("div", sa, [t("div", aa, [t("div", null, [t("div", ea, o(It(e.ShiftDate)), 1), t("div", la, o(e.ShiftType) + " â€¢ " + o(Ct(e.AttendantID)), 1)]), t("span", { class: r(`badge badge-light-${e.Status === "Closed" ? "success" : e.Status === "Open" ? "warning" : "info"}`) }, o(e.Status), 3)]), t("div", oa, [t("div", na, [s[33] || (s[33] = t("div", { class: "fs-7 text-gray-600 fw-semibold" }, "Expected", -1)), t("div", ia, o(_(e.ExpectedCash)), 1)]), t("div", ca, [s[34] || (s[34] = t("div", { class: "fs-7 text-gray-600 fw-semibold" }, "Actual", -1)), t("div", ra, o(_(e.ActualCash)), 1)]), t("div", da, [s[35] || (s[35] = t("div", { class: "fs-7 text-gray-600 fw-semibold" }, "Variance", -1)), t("div", { class: r(`fw-bold text-${parseFloat(e.Variance) > 0 ? "success" : parseFloat(e.Variance) < 0 ? "danger" : "gray-700"}`) }, o(parseFloat(e.Variance) > 0 ? "+" : "") + o(_(e.Variance)), 3)])])])])]))), 128))])], 512), [[J, p.value === 2]]), I(t("div", ua, [s[49] || (s[49] = O('<h3 class="card-title fw-bold mb-6" data-v-7f16f2e4><i class="ki-duotone ki-security-user fs-2 me-2 text-danger" data-v-7f16f2e4><span class="path1" data-v-7f16f2e4></span><span class="path2" data-v-7f16f2e4></span><span class="path3" data-v-7f16f2e4></span></i> Risk &amp; Compliance Intelligence </h3>', 1)), t("div", fa, [t("div", va, [t("div", { class: r(["card card-flush", `bg-light-${m.value.length > 0 ? "danger" : "success"}`]) }, [t("div", ga, [t("i", { class: r(["ki-duotone ki-information-5 fs-3x mb-2", `text-${m.value.length > 0 ? "danger" : "success"}`]) }, s[38] || (s[38] = [t("span", { class: "path1" }, null, -1), t("span", { class: "path2" }, null, -1), t("span", { class: "path3" }, null, -1)]), 2), t("h4", pa, o(m.value.length), 1), s[39] || (s[39] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Critical Alerts", -1))])], 2)]), t("div", ha, [t("div", { class: r(["card card-flush", `bg-light-${A.value.length > 0 ? "warning" : "success"}`]) }, [t("div", ma, [t("i", { class: r(["ki-duotone ki-shield-search fs-3x mb-2", `text-${A.value.length > 0 ? "warning" : "success"}`]) }, s[40] || (s[40] = [t("span", { class: "path1" }, null, -1), t("span", { class: "path2" }, null, -1)]), 2), t("h4", ba, o(A.value.length), 1), s[41] || (s[41] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Fraud Detections", -1))])], 2)]), t("div", ya, [t("div", xa, [t("div", _a, [s[42] || (s[42] = t("i", { class: "ki-duotone ki-shield-tick fs-3x text-info mb-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)), t("h4", wa, o(pt.value) + "%", 1), s[43] || (s[43] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Compliance Score", -1))])])]), t("div", Sa, [t("div", { class: r(["card card-flush", `bg-light-${lt.value > 0 ? "danger" : "success"}`]) }, [t("div", ka, [t("i", { class: r(["ki-duotone ki-chart-line-down fs-3x mb-2", `text-${lt.value > 0 ? "danger" : "success"}`]) }, s[44] || (s[44] = [t("span", { class: "path1" }, null, -1), t("span", { class: "path2" }, null, -1)]), 2), t("h4", Da, o(lt.value), 1), s[45] || (s[45] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "High Risk Variances", -1))])], 2)])]), m.value.length === 0 ? (f(), u("div", Ia, s[46] || (s[46] = [O('<i class="ki-duotone ki-shield-tick fs-5x text-success mb-4" data-v-7f16f2e4><span class="path1" data-v-7f16f2e4></span><span class="path2" data-v-7f16f2e4></span></i><h4 class="fw-bold text-success mb-2" data-v-7f16f2e4>All Systems Secure</h4><p class="text-gray-600" data-v-7f16f2e4> No critical security alerts detected. Operations are within secure parameters. </p>', 3)]))) : (f(), u("div", Ca, [s[48] || (s[48] = t("h4", { class: "fw-bold text-gray-900 mb-4" }, "Active Critical Alerts", -1)), t("div", Ta, [(f(!0), u(E, null, L(m.value, e => (f(), u("div", { key: e.id, class: "col-12" }, [t("div", Aa, [t("div", Pa, [t("div", $a, [s[47] || (s[47] = t("i", { class: "ki-duotone ki-information-5 fs-2x text-danger" }, [t("span", { class: "path1" }), t("span", { class: "path2" }), t("span", { class: "path3" })], -1)), t("div", Na, [t("h5", Ra, o(e.title), 1), t("p", Va, o(e.message), 1), t("div", Oa, [t("span", Ea, o(e.severity), 1), t("span", La, o(ht(e.timestamp)), 1)])])])])])]))), 128))])]))], 512), [[J, p.value === 3]]), I(t("div", Fa, [s[66] || (s[66] = t("h3", { class: "card-title fw-bold mb-6" }, [t("i", { class: "ki-duotone ki-chart-line-up fs-2 me-2 text-warning" }, [t("span", { class: "path1" }), t("span", { class: "path2" })]), H(" Executive Intelligence Dashboard ")], -1)), t("div", Ma, [t("div", Ba, [t("div", Ua, [t("div", Ga, [s[50] || (s[50] = t("i", { class: "ki-duotone ki-dollar fs-3x text-success mb-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" }), t("span", { class: "path3" })], -1)), t("h3", Ha, o(_(et.value)), 1), s[51] || (s[51] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Total Sales", -1))])])]), t("div", ja, [t("div", Ya, [t("div", za, [s[52] || (s[52] = O('<i class="ki-duotone ki-chart-simple fs-3x text-primary mb-2" data-v-7f16f2e4><span class="path1" data-v-7f16f2e4></span><span class="path2" data-v-7f16f2e4></span><span class="path3" data-v-7f16f2e4></span><span class="path4" data-v-7f16f2e4></span></i>', 1)), t("h3", Wa, o(D($.value.length)), 1), s[53] || (s[53] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Transactions", -1))])])]), t("div", Ka, [t("div", qa, [t("div", Ja, [s[54] || (s[54] = t("i", { class: "ki-duotone ki-oil-barrel fs-3x text-warning mb-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)), t("h3", Qa, o(D(wt.value)), 1), s[55] || (s[55] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Fuel Dispensed (L)", -1))])])]), t("div", Xa, [t("div", Za, [t("div", te, [s[56] || (s[56] = t("i", { class: "ki-duotone ki-shield-tick fs-3x text-info mb-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)), t("h3", se, o(pt.value) + "%", 1), s[57] || (s[57] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Compliance Score", -1))])])]), t("div", ae, [t("div", ee, [t("div", le, [s[58] || (s[58] = t("i", { class: "ki-duotone ki-calculator fs-3x text-success mb-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" }), t("span", { class: "path3" })], -1)), t("h3", oe, o(_(gt.value)), 1), s[59] || (s[59] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Average Transaction", -1))])])]), t("div", ne, [t("div", { class: r(["card card-flush", `bg-light-${Y.value > 1e3 ? "danger" : Y.value > 500 ? "warning" : "success"}`]) }, [t("div", ie, [t("i", { class: r(["ki-duotone ki-chart-line-down fs-3x mb-2", `text-${Y.value > 1e3 ? "danger" : Y.value > 500 ? "warning" : "success"}`]) }, s[60] || (s[60] = [t("span", { class: "path1" }, null, -1), t("span", { class: "path2" }, null, -1)]), 2), t("h3", ce, o(D(Y.value)), 1), s[61] || (s[61] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Fuel Variance (L)", -1))])], 2)]), t("div", re, [t("div", { class: r(["card card-flush", `bg-light-${y.value > 5e4 ? "danger" : y.value > 2e4 ? "warning" : "success"}`]) }, [t("div", de, [t("i", { class: r(["ki-duotone ki-wallet fs-3x mb-2", `text-${y.value > 5e4 ? "danger" : y.value > 2e4 ? "warning" : "success"}`]) }, s[62] || (s[62] = [t("span", { class: "path1" }, null, -1), t("span", { class: "path2" }, null, -1), t("span", { class: "path3" }, null, -1), t("span", { class: "path4" }, null, -1)]), 2), t("h3", ue, o(_(y.value)), 1), s[63] || (s[63] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Cash Variance", -1))])], 2)]), t("div", fe, [t("div", { class: r(["card card-flush", `bg-light-${m.value.length > 0 ? "danger" : "success"}`]) }, [t("div", ve, [t("i", { class: r(["ki-duotone ki-information-5 fs-3x mb-2", `text-${m.value.length > 0 ? "danger" : "success"}`]) }, s[64] || (s[64] = [t("span", { class: "path1" }, null, -1), t("span", { class: "path2" }, null, -1), t("span", { class: "path3" }, null, -1)]), 2), t("h3", ge, o(m.value.length), 1), s[65] || (s[65] = t("p", { class: "text-gray-600 fw-semibold mb-0 fs-7" }, "Critical Alerts", -1))])], 2)])])], 512), [[J, p.value === 4]])]), t("div", pe, [t("div", he, [t("div", me, [t("button", { class: "btn btn-light-primary", disabled: p.value === 1, onClick: At }, s[67] || (s[67] = [t("i", { class: "ki-duotone ki-arrow-left fs-3 me-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1), H(" Previous ")]), 8, be), t("div", ye, [(f(!0), u(E, null, L(P.value, e => (f(), u("div", { key: e.id, class: r(["rounded-circle", p.value === e.id ? "bg-primary" : "bg-light-primary"]), style: { width: "12px", height: "12px" } }, null, 2))), 128))]), t("button", { class: "btn btn-light-primary", disabled: p.value === P.value.length, onClick: Tt }, s[68] || (s[68] = [H(" Next "), t("i", { class: "ki-duotone ki-arrow-right fs-3 ms-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)]), 8, xe)])])]), j.value ? (f(), u("div", _e, [t("div", we, [t("div", Se, [t("div", ke, [s[69] || (s[69] = t("div", { class: "spinner-border text-white mb-3", style: { width: "3rem", height: "3rem" }, role: "status" }, [t("span", { class: "visually-hidden" }, "Loading...")], -1)), t("p", De, o(rt.value), 1)])])])])) : G("", !0)]) }
  }
}, Pe = Vt(Ce, [["__scopeId", "data-v-7f16f2e4"]]); export { Pe as default };
