import{_ as Vs,r as d,c as x,o as cs,S,b as u,d as s,e as G,g as O,t as n,w as I,m as bs,F as E,h as L,v as ys,f as H,y as J,n as r,i as f}from"./index-BJk99QVQ.js";const Os={class:"d-flex flex-column gap-5"},Es={class:"card card-flush bg-gradient-primary"},Ls={class:"card-body p-6"},Fs={class:"d-flex flex-column flex-md-row justify-content-between align-items-start align-items-md-center gap-4"},Ms={class:"d-flex align-items-center gap-4"},Bs={class:"text-dark opacity-75 mb-0 fs-6"},Us={class:"d-flex gap-2"},Gs=["disabled"],Hs={class:"card card-flush"},Ys={class:"card-body py-4"},js={class:"row g-3 align-items-end"},zs={key:0,class:"col-12 col-md-auto"},Ws=["value"],Ks={class:"col-12 col-md-auto"},qs={key:1,class:"col-12 col-md-auto"},Js={key:2,class:"col-12 col-md-auto"},Qs={key:0,class:"card card-flush bg-light-danger"},Xs={class:"card-body py-4 px-6"},Zs={class:"d-flex align-items-center gap-3"},st={class:"flex-grow-1"},tt={class:"fw-bold text-danger mb-1"},at={class:"text-gray-700 mb-0"},et={class:"card card-flush"},lt={class:"card-body p-4"},nt={class:"row g-3"},ot=["onClick"],it={key:0,class:"path3"},ct={class:"text-center"},rt={class:"fw-bold fs-6 mb-1"},dt={class:"fs-7 opacity-75"},ut={class:"card card-flush"},ft={class:"card-body"},vt={class:"row g-4 mb-6"},gt={class:"card-body p-4"},pt={class:"d-flex align-items-center justify-content-between mb-3"},ht={class:"fw-bold text-gray-900 mb-0"},mt={class:"row g-2"},bt={class:"col-6"},yt={class:"fs-7 text-gray-600 fw-semibold"},xt={class:"fw-bold text-gray-900"},_t={class:"col-6"},wt={class:"fw-bold text-gray-900"},St={class:"col-12 mt-3"},kt={class:"row g-4"},Dt={class:"card card-flush bg-light h-100"},It={class:"card-body p-4"},Ct={class:"d-flex align-items-center justify-content-between mb-3"},Tt={class:"d-flex align-items-center gap-2"},At={class:"fw-bold text-gray-900"},Pt={class:"row g-2"},$t={class:"col-6"},Nt={class:"fw-bold text-gray-900"},Rt={class:"col-6"},Vt={class:"fw-bold text-success"},Ot={class:"col-12 mt-2"},Et={class:"card-body"},Lt={class:"row g-4 mb-6"},Ft={class:"col-6 col-md-3"},Mt={class:"card card-flush bg-light-success h-100"},Bt={class:"card-body p-4 text-center"},Ut={class:"fw-bold fs-2 text-gray-900 mb-1"},Gt={class:"col-6 col-md-3"},Ht={class:"card card-flush bg-light-primary h-100"},Yt={class:"card-body p-4 text-center"},jt={class:"fw-bold fs-2 text-gray-900 mb-1"},zt={class:"col-6 col-md-3"},Wt={class:"card-body p-4 text-center"},Kt={class:"fw-bold fs-2 text-gray-900 mb-1"},qt={class:"col-6 col-md-3"},Jt={class:"card card-flush bg-light-info h-100"},Qt={class:"card-body p-4 text-center"},Xt={class:"fw-bold fs-2 text-gray-900 mb-1"},Zt={class:"row g-4"},sa={class:"card card-flush bg-light h-100"},ta={class:"card-body p-4"},aa={class:"d-flex align-items-center justify-content-between mb-3"},ea={class:"fw-bold text-gray-900"},la={class:"fs-7 text-gray-600"},na={class:"row g-2"},oa={class:"col-6"},ia={class:"fw-bold text-gray-900"},ca={class:"col-6"},ra={class:"fw-bold text-gray-900"},da={class:"col-12 mt-2"},ua={class:"card-body"},fa={class:"row g-4 mb-6"},va={class:"col-6 col-md-3"},ga={class:"card-body p-4 text-center"},pa={class:"fw-bold fs-2 text-gray-900 mb-1"},ha={class:"col-6 col-md-3"},ma={class:"card-body p-4 text-center"},ba={class:"fw-bold fs-2 text-gray-900 mb-1"},ya={class:"col-6 col-md-3"},xa={class:"card card-flush bg-light-info"},_a={class:"card-body p-4 text-center"},wa={class:"fw-bold fs-2 text-gray-900 mb-1"},Sa={class:"col-6 col-md-3"},ka={class:"card-body p-4 text-center"},Da={class:"fw-bold fs-2 text-gray-900 mb-1"},Ia={key:0,class:"text-center py-10"},Ca={key:1},Ta={class:"row g-4"},Aa={class:"card card-flush bg-light-danger"},Pa={class:"card-body p-4"},$a={class:"d-flex align-items-start gap-3"},Na={class:"flex-grow-1"},Ra={class:"fw-bold text-danger mb-1"},Va={class:"text-gray-700 mb-2"},Oa={class:"d-flex align-items-center gap-3"},Ea={class:"badge badge-light-danger fw-bold"},La={class:"text-gray-600 fs-7"},Fa={class:"card-body"},Ma={class:"row g-4"},Ba={class:"col-6 col-md-4 col-lg-3"},Ua={class:"card card-flush bg-light-success h-100"},Ga={class:"card-body p-4 text-center"},Ha={class:"fw-bold fs-2 text-gray-900 mb-1"},Ya={class:"col-6 col-md-4 col-lg-3"},ja={class:"card card-flush bg-light-primary h-100"},za={class:"card-body p-4 text-center"},Wa={class:"fw-bold fs-2 text-gray-900 mb-1"},Ka={class:"col-6 col-md-4 col-lg-3"},qa={class:"card card-flush bg-light-warning h-100"},Ja={class:"card-body p-4 text-center"},Qa={class:"fw-bold fs-2 text-gray-900 mb-1"},Xa={class:"col-6 col-md-4 col-lg-3"},Za={class:"card card-flush bg-light-info h-100"},se={class:"card-body p-4 text-center"},te={class:"fw-bold fs-2 text-gray-900 mb-1"},ae={class:"col-6 col-md-4 col-lg-3"},ee={class:"card card-flush bg-light-success h-100"},le={class:"card-body p-4 text-center"},ne={class:"fw-bold fs-2 text-gray-900 mb-1"},oe={class:"col-6 col-md-4 col-lg-3"},ie={class:"card-body p-4 text-center"},ce={class:"fw-bold fs-2 text-gray-900 mb-1"},re={class:"col-6 col-md-4 col-lg-3"},de={class:"card-body p-4 text-center"},ue={class:"fw-bold fs-2 text-gray-900 mb-1"},fe={class:"col-6 col-md-4 col-lg-3"},ve={class:"card-body p-4 text-center"},ge={class:"fw-bold fs-2 text-gray-900 mb-1"},pe={class:"card card-flush"},he={class:"card-body py-4"},me={class:"d-flex justify-content-between align-items-center"},be=["disabled"],ye={class:"d-flex gap-2"},xe=["disabled"],_e={key:1,class:"overlay overlay-block rounded"},we={class:"overlay-wrapper"},Se={class:"overlay-layer bg-dark bg-opacity-50 d-flex align-items-center justify-content-center"},ke={class:"d-flex flex-column align-items-center"},De={class:"text-white fw-semibold fs-5"},Ie="https://backend.cloudfuelstationmis.com/api/records/v1",Ce={__name:"VarianceAnalysis",setup(Te){const xs=()=>{try{const a=localStorage.getItem("kigrama_user_data");return a?JSON.parse(a):null}catch(a){return console.error("Error parsing auth data:",a),null}},_s=()=>localStorage.getItem("kigrama_auth_token")||"",Y=d(!1),rs=d("Loading intelligence..."),F=d(xs()),g=d(null),C=d(null),p=d(1),T=d("TODAY"),M=d(""),B=d(""),ds=d(!1),Q=d([]),X=d([]),us=d([]),Z=d([]),ss=d([]),ts=d([]),as=d([]),fs=d([]),vs=d([]),A=d([]);d([]);const K=d([]),P=d([{id:1,title:"Fuel Intelligence",icon:"oil-barrel",color:"primary",description:"Variance & Performance"},{id:2,title:"Financial Intelligence",icon:"chart-pie-simple",color:"success",description:"Reconciliation & P&L"},{id:3,title:"Risk Intelligence",icon:"security-user",color:"danger",description:"Fraud & Compliance"},{id:4,title:"Executive Summary",icon:"chart-line-up",color:"warning",description:"Critical KPIs"}]),h=(a,t=0)=>{if(a==null||a==="")return t;const l=parseFloat(a);return isNaN(l)?t:l},c=(a,t=0)=>{if(a==null||a==="")return t;const l=parseInt(a);return isNaN(l)?t:l},$=x(()=>{const a=new Date().toISOString().split("T")[0];return ts.value.filter(t=>{var o;if(!t||!((o=g.value)!=null&&o.StationID))return!1;const l=t.TransactionDate;return l?l.startsWith(a)&&c(t.StationID)===c(g.value.StationID):!1})}),es=x(()=>$.value.reduce((a,t)=>a+h(t.TotalAmount),0)),ws=x(()=>$.value.reduce((a,t)=>a+h(t.Quantity),0)),gs=x(()=>$.value.length===0?0:es.value/$.value.length),k=x(()=>{var l;if(!((l=g.value)!=null&&l.StationID))return[];const a=Z.value.filter(o=>c(o.StationID)===c(g.value.StationID)),t=as.value.filter(o=>c(o.StationID)===c(g.value.StationID));return a.map(o=>{const e=X.value.find(U=>c(U.ProductID)===c(o.ProductID)),i=t.find(U=>c(U.ProductID)===c(o.ProductID));if(!e||!i)return null;const v=h(o.CurrentLevel),b=h(i.CurrentStock),N=v-b,R=b>0?N/b*100:0;let V="NORMAL";return Math.abs(R)>10?V="CRITICAL":Math.abs(R)>5?V="WARNING":Math.abs(R)>2&&(V="ATTENTION"),{ProductID:c(o.ProductID),TankID:c(o.TankID),TankNumber:o.TankNumber||`T${o.TankID}`,ProductName:e.Name,TankCapacity:h(o.Capacity),PhysicalReading:v,BookStock:b,Variance:N,VariancePercentage:parseFloat(R.toFixed(2)),Status:V,LastUpdated:o.UpdatedAt||new Date().toISOString()}}).filter(o=>o!==null).sort((o,e)=>Math.abs(e.VariancePercentage)-Math.abs(o.VariancePercentage))}),j=x(()=>k.value.reduce((a,t)=>a+Math.abs(t.Variance),0)),Ss=x(()=>ss.value.filter(a=>{var t;return c(a.StationID)===c((t=g.value)==null?void 0:t.StationID)}).map(a=>{const t=$.value.filter(v=>c(v.PumpID)===c(a.PumpID)),l=t.reduce((v,b)=>v+h(b.Quantity),0),o=t.reduce((v,b)=>v+h(b.TotalAmount),0),e=fs.value.filter(v=>c(v.PumpID)===c(a.PumpID)).slice(-7);let i=99.5;if(e.length>0){const v=e.reduce((b,N)=>b+Math.abs(h(N.Variance)),0)/e.length;i=Math.max(95,100-v/100)}return{...a,DailySales:l,DailyRevenue:o,AccuracyPercent:i.toFixed(1),TransactionCount:t.length}}).sort((a,t)=>t.DailySales-a.DailySales)),z=x(()=>vs.value.filter(a=>{var t;return c(a.StationID)===c((t=g.value)==null?void 0:t.StationID)}).map(a=>{const t=h(a.OpeningBalance)+h(a.CashSales)-h(a.CashPayouts),l=h(a.ActualCash)||h(a.ClosingBalance),o=l-t;return{...a,ExpectedCash:t,ActualCash:l,Variance:o.toFixed(2),VariancePercent:t>0?(o/t*100).toFixed(2):"0.00"}}).sort((a,t)=>new Date(t.ShiftDate)-new Date(a.ShiftDate))),y=x(()=>z.value.reduce((a,t)=>a+Math.abs(h(t.Variance)),0)),m=x(()=>{const a=[];return k.value.forEach(t=>{t.Status==="CRITICAL"&&a.push({id:`fuel-${t.ProductID}`,type:"FUEL_VARIANCE",title:`${t.ProductName} Critical Variance`,message:`${t.VariancePercentage}% variance detected in Tank ${t.TankNumber}`,severity:"HIGH",timestamp:new Date().toISOString()})}),y.value>5e4&&a.push({id:"cash-variance",type:"CASH_VARIANCE",title:"Cash Reconciliation Issue",message:`${_(y.value)} total variance detected across ${z.value.length} drawers`,severity:"HIGH",timestamp:new Date().toISOString()}),A.value.forEach(t=>{t.RiskLevel==="HIGH"&&a.push({id:`fraud-${t.FraudLogID}`,type:"SECURITY",title:t.RuleName||"Security Alert",message:t.Description||"Suspicious activity detected",severity:"HIGH",timestamp:t.DetectedAt||t.CreatedAt})}),a.sort((t,l)=>new Date(l.timestamp)-new Date(t.timestamp))}),ps=x(()=>{let a=100;const t=k.value.length>0?k.value.reduce((e,i)=>e+Math.abs(i.VariancePercentage),0)/k.value.length:0;a-=Math.min(t*2,25),a-=Math.min(A.value.length*5,20);const l=z.value.reduce((e,i)=>e+i.ExpectedCash,0),o=l>0?y.value/l*100:0;return a-=Math.min(o,15),Math.max(0,Math.round(a))}),ls=x(()=>k.value.filter(a=>a.Status==="CRITICAL"||a.Status==="WARNING").length),w=async(a,t={})=>{const e={...{headers:{"Content-Type":"application/json",Authorization:`Bearer ${_s()}`}},...t};try{const i=await fetch(`${Ie}${a}`,e);if(!i.ok){if(i.status===401)throw localStorage.removeItem("kigrama_auth_token"),localStorage.removeItem("kigrama_user_data"),window.location.href="/login",new Error("Session expired. Please login again.");const b=await i.json().catch(()=>({}));throw new Error(b.message||`API Error: ${i.status} - ${i.statusText}`)}const v=await i.json();return v.records||v}catch(i){throw console.error(`API Request failed for ${a}:`,i),i}},ks=async()=>{var a;if((a=g.value)!=null&&a.StationID)try{const t=g.value.StationID,l=Ds(),[o,e,i,v,b,N,R,V,U,ms]=await Promise.allSettled([w("/Stations"),w("/Products"),w("/users"),w("/Tanks"),w("/Pumps"),w(`/Transactions${l?"?"+l:""}`),w("/StationInventory"),w(`/DailyReadings${l?"?"+l:""}`),w(`/CashDrawers${l?"?"+l:""}`),w(`/FraudDetectionLogs${l?"?"+l:""}`)]);o.status==="fulfilled"&&(Q.value=o.value||[]),e.status==="fulfilled"&&(X.value=e.value||[]),i.status==="fulfilled"&&(us.value=i.value||[]),v.status==="fulfilled"&&(Z.value=v.value||[]),b.status==="fulfilled"&&(ss.value=b.value||[]),N.status==="fulfilled"&&(ts.value=N.value||[]),R.status==="fulfilled"&&(as.value=R.value||[]),V.status==="fulfilled"&&(fs.value=V.value||[]),U.status==="fulfilled"&&(vs.value=U.value||[]),ms.status==="fulfilled"&&(A.value=ms.value||[]),console.log("âœ… Data fetched successfully:",{stations:Q.value.length,products:X.value.length,tanks:Z.value.length,pumps:ss.value.length,transactions:ts.value.length,stationInventory:as.value.length,fraudLogs:A.value.length})}catch(t){throw console.error("Error fetching critical data:",t),t}},Ds=()=>{const a=new Date;let t,l;switch(T.value){case"TODAY":t=new Date(a.setHours(0,0,0,0)).toISOString().split("T")[0],l=new Date().toISOString().split("T")[0];break;case"YESTERDAY":const o=new Date(a);o.setDate(o.getDate()-1),t=o.toISOString().split("T")[0],l=o.toISOString().split("T")[0];break;case"WEEK":const e=new Date(a);e.setDate(a.getDate()-a.getDay()),t=e.toISOString().split("T")[0],l=new Date().toISOString().split("T")[0];break;case"MONTH":t=new Date(a.getFullYear(),a.getMonth(),1).toISOString().split("T")[0],l=new Date().toISOString().split("T")[0];break;case"CUSTOM":if(M.value&&B.value)t=M.value,l=B.value;else return"";break;default:return""}return`TransactionDate>=${t}&TransactionDate<=${l}`},_=a=>new Intl.NumberFormat("en-UG",{style:"currency",currency:"UGX",minimumFractionDigits:0}).format(h(a)),D=a=>new Intl.NumberFormat("en-UG").format(h(a)),Is=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleDateString("en-GB")}catch{return"Invalid Date"}},hs=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleString("en-GB")}catch{return"Invalid Date"}},Cs=a=>{const t=us.value.find(l=>c(l.id)===c(a));return t?t.name||t.email:`User ${a}`},q=async a=>{p.value!==a&&(p.value=a,S.fire({title:"Loading Intelligence...",text:`Preparing ${P.value[a-1].title} analytics`,allowOutsideClick:!1,showConfirmButton:!1,timer:1e3,willOpen:()=>{S.showLoading()}}))},Ts=()=>{p.value<P.value.length&&q(p.value+1)},As=()=>{p.value>1&&q(p.value-1)},Ps=async()=>{var a;if(C.value&&C.value!==((a=g.value)==null?void 0:a.StationID)){const t=Q.value.find(l=>c(l.StationID)===c(C.value));t&&(g.value=t,await W())}},ns=async()=>{T.value!=="CUSTOM"&&(M.value="",B.value=""),await W()},W=async()=>{Y.value=!0,rs.value=`Loading ${P.value[p.value-1].title} data...`;try{await ks(),console.log("âœ… Critical intelligence data loaded successfully")}catch(a){console.error("Error loading data:",a),S.fire({title:"Data Loading Error",text:"Could not load intelligence data. Please check your connection and try again.",icon:"error",confirmButtonColor:"#f1416c"})}finally{Y.value=!1}},$s=async()=>{await W(),S.fire({title:"Data Refreshed!",text:"Intelligence data has been updated successfully",icon:"success",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1})},Ns=async()=>{const a=P.value[p.value-1];S.fire({title:"Exporting Report...",text:`Generating ${a.title} report`,allowOutsideClick:!1,showConfirmButton:!1,willOpen:()=>{S.showLoading()}}),setTimeout(()=>{var t;S.fire({title:"Report Generated!",html:`
        <div class="text-start">
          <p class="mb-2"><strong>Report:</strong> ${a.title}</p>
          <p class="mb-2"><strong>Station:</strong> ${(t=g.value)==null?void 0:t.StationName}</p>
          <p class="mb-2"><strong>Period:</strong> ${T.value}</p>
          <p class="mb-0"><strong>Generated:</strong> ${hs(new Date().toISOString())}</p>
        </div>
      `,icon:"success",confirmButtonColor:"#3699ff"})},2e3)},Rs=async()=>{if(m.value.length===0){S.fire({title:"No Critical Alerts",text:"All systems are operating within normal parameters.",icon:"info",confirmButtonColor:"#3699ff"});return}const a=m.value.map(l=>`â€¢ <strong>${l.type}:</strong> ${l.message}`).join("<br>");(await S.fire({title:"Critical Alerts Investigation",html:`
      <div class="text-start">
        <p class="fw-bold mb-3">${m.value.length} alerts require immediate attention:</p>
        <div class="text-gray-700">${a}</div>
      </div>
    `,icon:"warning",confirmButtonText:"Investigate All",confirmButtonColor:"#f1416c",showCancelButton:!0,cancelButtonText:"Dismiss"})).isConfirmed&&q(3)};cs(async()=>{var a,t,l,o,e;console.log("ðŸš€ Critical Intelligence Center - Initializing...");try{if(!((a=F.value)!=null&&a.user)){console.error("âŒ No authenticated user found"),window.location.href="/login";return}if(console.log("ðŸ‘¤ Authenticated user:",F.value.user.name||F.value.user.email),((l=(t=F.value)==null?void 0:t.stations)==null?void 0:l.length)>0)K.value=F.value.stations,g.value=F.value.stations[0],C.value=c((o=g.value)==null?void 0:o.StationID);else{const v={StationID:501,StationName:"Kigrama Kampala Central",Location:"Plot 123, Kampala Road, Kampala",Status:"Active"};K.value=[v],g.value=v,C.value=c(v.StationID)}const i=new Date;B.value=i.toISOString().split("T")[0],M.value=new Date(i.getTime()-7*24*60*60*1e3).toISOString().split("T")[0],await W(),ds.value=!0,console.log("âœ… Critical Intelligence Center - Initialization Complete"),console.log("ðŸ“Š Active Station:",(e=g.value)==null?void 0:e.StationName),console.log("ðŸ“ˆ Current Step:",p.value),console.log("âš ï¸ Critical Alerts:",m.value.length),console.log("ðŸ“ˆ Fuel Variances:",k.value.length),console.log("ðŸ’° Cash Drawers:",z.value.length)}catch(i){console.error("âŒ Initialization failed:",i),S.fire({title:"Initialization Error",text:"Could not initialize the intelligence center. Please refresh and try again.",icon:"error",confirmButtonColor:"#f1416c"})}});let os=null;cs(()=>{os=setInterval(async()=>{ds.value&&!Y.value&&(console.log("ðŸ”„ Auto-refreshing critical intelligence data..."),await W())},5*60*1e3)});const is=()=>{os&&clearInterval(os)};return cs(()=>(window.addEventListener("beforeunload",is),()=>{is(),window.removeEventListener("beforeunload",is)})),(a,t)=>{var l,o;return f(),u("div",Os,[s("div",Es,[s("div",Ls,[s("div",Fs,[s("div",Ms,[t[5]||(t[5]=O('<div class="symbol symbol-60px symbol-circle" data-v-18cb55af><div class="symbol-label bg-white" data-v-18cb55af><i class="ki-duotone ki-chart-pie-4 fs-2x text-primary" data-v-18cb55af><span class="path1" data-v-18cb55af></span><span class="path2" data-v-18cb55af></span><span class="path3" data-v-18cb55af></span></i></div></div>',1)),s("div",null,[t[4]||(t[4]=s("h1",{class:"fw-bold fs-2 mb-1 text-dark"},"Critical Variance Intelligence Center",-1)),s("p",Bs,n(((l=g.value)==null?void 0:l.StationName)||"Loading Station..."),1)])]),s("div",Us,[s("button",{class:"btn btn-light btn-sm",onClick:$s,disabled:Y.value},t[6]||(t[6]=[s("i",{class:"ki-duotone ki-arrows-circle fs-3"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1),s("span",{class:"d-none d-md-inline ms-2"},"Refresh",-1)]),8,Gs),s("button",{class:"btn btn-warning btn-sm",onClick:Ns},t[7]||(t[7]=[s("i",{class:"ki-duotone ki-document-down fs-3"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1),s("span",{class:"d-none d-md-inline ms-2"},"Export",-1)]))])])])]),s("div",Hs,[s("div",Ys,[s("div",js,[K.value.length>1?(f(),u("div",zs,[t[8]||(t[8]=s("label",{class:"form-label fw-bold fs-7 text-gray-600 mb-2"},"STATION",-1)),I(s("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>C.value=e),onChange:Ps,class:"form-select form-select-lg"},[(f(!0),u(E,null,L(K.value,e=>(f(),u("option",{key:e.StationID,value:e.StationID},n(e.StationName),9,Ws))),128))],544),[[bs,C.value]])])):G("",!0),s("div",Ks,[t[10]||(t[10]=s("label",{class:"form-label fw-bold fs-7 text-gray-600 mb-2"},"ANALYSIS PERIOD",-1)),I(s("select",{"onUpdate:modelValue":t[1]||(t[1]=e=>T.value=e),onChange:ns,class:"form-select form-select-lg"},t[9]||(t[9]=[O('<option value="TODAY" data-v-18cb55af>Today</option><option value="YESTERDAY" data-v-18cb55af>Yesterday</option><option value="WEEK" data-v-18cb55af>This Week</option><option value="MONTH" data-v-18cb55af>This Month</option><option value="CUSTOM" data-v-18cb55af>Custom Range</option>',5)]),544),[[bs,T.value]])]),T.value==="CUSTOM"?(f(),u("div",qs,[t[11]||(t[11]=s("label",{class:"form-label fw-bold fs-7 text-gray-600 mb-2"},"FROM DATE",-1)),I(s("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>M.value=e),onChange:ns,type:"date",class:"form-control form-control-lg"},null,544),[[ys,M.value]])])):G("",!0),T.value==="CUSTOM"?(f(),u("div",Js,[t[12]||(t[12]=s("label",{class:"form-label fw-bold fs-7 text-gray-600 mb-2"},"TO DATE",-1)),I(s("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>B.value=e),onChange:ns,type:"date",class:"form-control form-control-lg"},null,544),[[ys,B.value]])])):G("",!0)])])]),m.value.length>0?(f(),u("div",Qs,[s("div",Xs,[s("div",Zs,[t[14]||(t[14]=s("i",{class:"ki-duotone ki-information-5 fs-2x text-danger"},[s("span",{class:"path1"}),s("span",{class:"path2"}),s("span",{class:"path3"})],-1)),s("div",st,[s("h4",tt,n(m.value.length)+" Critical Alert"+n(m.value.length>1?"s":""),1),s("p",at,n(((o=m.value[0])==null?void 0:o.message)||"Immediate attention required"),1)]),s("button",{class:"btn btn-danger btn-sm",onClick:Rs},t[13]||(t[13]=[s("i",{class:"ki-duotone ki-eye fs-2"},[s("span",{class:"path1"}),s("span",{class:"path2"}),s("span",{class:"path3"})],-1),H(" Investigate ")]))])])])):G("",!0),s("div",et,[s("div",lt,[s("div",nt,[(f(!0),u(E,null,L(P.value,e=>(f(),u("div",{key:e.id,class:"col-6 col-md-3"},[s("button",{class:r(["btn w-100 h-100 d-flex flex-column align-items-center gap-3 p-4",p.value===e.id?`btn-${e.color}`:`btn-light-${e.color}`]),onClick:i=>q(e.id)},[s("i",{class:r(`ki-duotone ki-${e.icon} fs-2x text-${e.color}`)},[t[15]||(t[15]=s("span",{class:"path1"},null,-1)),t[16]||(t[16]=s("span",{class:"path2"},null,-1)),e.icon==="security-user"?(f(),u("span",it)):G("",!0)],2),s("div",ct,[s("div",rt,n(e.title),1),s("div",dt,n(e.description),1)])],10,ot)]))),128))])])]),s("div",ut,[I(s("div",ft,[t[23]||(t[23]=s("h3",{class:"card-title fw-bold mb-6"},[s("i",{class:"ki-duotone ki-oil-barrel fs-2 me-2 text-primary"},[s("span",{class:"path1"}),s("span",{class:"path2"})]),H(" Fuel Variance & Performance Intelligence ")],-1)),s("div",vt,[(f(!0),u(E,null,L(k.value.slice(0,6),e=>(f(),u("div",{key:e.ProductID,class:"col-12 col-md-6 col-lg-4"},[s("div",{class:r(["card card-flush h-100",`bg-light-${e.Status==="CRITICAL"?"danger":e.Status==="WARNING"?"warning":"success"}`])},[s("div",gt,[s("div",pt,[s("h5",ht,n(e.ProductName),1),s("span",{class:r(`badge badge-light-${e.Status==="CRITICAL"?"danger":e.Status==="WARNING"?"warning":"success"}`)},n(e.Status),3)]),s("div",mt,[s("div",bt,[s("div",yt,"Tank "+n(e.TankNumber),1),s("div",xt,n(D(e.PhysicalReading))+"L ",1)]),s("div",_t,[t[17]||(t[17]=s("div",{class:"fs-7 text-gray-600 fw-semibold"},"Book Stock",-1)),s("div",wt,n(D(e.BookStock))+"L",1)]),s("div",St,[t[18]||(t[18]=s("div",{class:"fs-7 text-gray-600 fw-semibold"},"Variance",-1)),s("div",{class:r(`fw-bold text-${e.Variance>0?"success":e.Variance<0?"danger":"gray-700"}`)},n(e.Variance>0?"+":"")+n(D(e.Variance))+"L ("+n(e.VariancePercentage)+"%) ",3)])])])],2)]))),128))]),t[24]||(t[24]=s("h4",{class:"fw-bold text-gray-900 mb-4"},"Pump Performance Today",-1)),s("div",kt,[(f(!0),u(E,null,L(Ss.value.slice(0,6),e=>(f(),u("div",{key:e.PumpID,class:"col-12 col-md-6 col-lg-4"},[s("div",Dt,[s("div",It,[s("div",Ct,[s("div",Tt,[t[19]||(t[19]=O('<div class="symbol symbol-30px" data-v-18cb55af><div class="symbol-label bg-light-primary" data-v-18cb55af><i class="ki-duotone ki-gasoline-pump fs-4 text-primary" data-v-18cb55af><span class="path1" data-v-18cb55af></span><span class="path2" data-v-18cb55af></span><span class="path3" data-v-18cb55af></span></i></div></div>',1)),s("div",At,n(e.PumpName),1)]),s("span",{class:r(`badge badge-light-${e.Status==="Active"?"success":"warning"}`)},n(e.Status),3)]),s("div",Pt,[s("div",$t,[t[20]||(t[20]=s("div",{class:"fs-7 text-gray-600 fw-semibold"},"Sales",-1)),s("div",Nt,n(D(e.DailySales))+"L",1)]),s("div",Rt,[t[21]||(t[21]=s("div",{class:"fs-7 text-gray-600 fw-semibold"},"Revenue",-1)),s("div",Vt,n(_(e.DailyRevenue)),1)]),s("div",Ot,[t[22]||(t[22]=s("div",{class:"fs-7 text-gray-600 fw-semibold"},"Accuracy",-1)),s("div",{class:r(`fw-bold text-${e.AccuracyPercent>99?"success":e.AccuracyPercent>98?"warning":"danger"}`)},n(e.AccuracyPercent)+"% ",3)])])])])]))),128))])],512),[[J,p.value===1]]),I(s("div",Et,[t[36]||(t[36]=s("h3",{class:"card-title fw-bold mb-6"},[s("i",{class:"ki-duotone ki-chart-pie-simple fs-2 me-2 text-success"},[s("span",{class:"path1"}),s("span",{class:"path2"})]),H(" Financial Reconciliation Intelligence ")],-1)),s("div",Lt,[s("div",Ft,[s("div",Mt,[s("div",Bt,[t[25]||(t[25]=s("i",{class:"ki-duotone ki-dollar fs-3x text-success mb-2"},[s("span",{class:"path1"}),s("span",{class:"path2"}),s("span",{class:"path3"})],-1)),s("h4",Ut,n(_(es.value)),1),t[26]||(t[26]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Total Sales Today",-1))])])]),s("div",Gt,[s("div",Ht,[s("div",Yt,[t[27]||(t[27]=O('<i class="ki-duotone ki-chart-simple fs-3x text-primary mb-2" data-v-18cb55af><span class="path1" data-v-18cb55af></span><span class="path2" data-v-18cb55af></span><span class="path3" data-v-18cb55af></span><span class="path4" data-v-18cb55af></span></i>',1)),s("h4",jt,n(D($.value.length)),1),t[28]||(t[28]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Transactions Today",-1))])])]),s("div",zt,[s("div",{class:r(["card card-flush",`bg-light-${y.value>5e4?"danger":y.value>2e4?"warning":"success"}`])},[s("div",Wt,[s("i",{class:r(["ki-duotone ki-wallet fs-3x mb-2",`text-${y.value>5e4?"danger":y.value>2e4?"warning":"success"}`])},t[29]||(t[29]=[s("span",{class:"path1"},null,-1),s("span",{class:"path2"},null,-1),s("span",{class:"path3"},null,-1),s("span",{class:"path4"},null,-1)]),2),s("h4",Kt,n(_(y.value)),1),t[30]||(t[30]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Cash Variance",-1))])],2)]),s("div",qt,[s("div",Jt,[s("div",Qt,[t[31]||(t[31]=s("i",{class:"ki-duotone ki-calculator fs-3x text-info mb-2"},[s("span",{class:"path1"}),s("span",{class:"path2"}),s("span",{class:"path3"})],-1)),s("h4",Xt,n(_(gs.value)),1),t[32]||(t[32]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Average Transaction",-1))])])])]),t[37]||(t[37]=s("h4",{class:"fw-bold text-gray-900 mb-4"},"Cash Drawer Reconciliation",-1)),s("div",Zt,[(f(!0),u(E,null,L(z.value.slice(0,6),e=>(f(),u("div",{key:e.DrawerID,class:"col-12 col-md-6"},[s("div",sa,[s("div",ta,[s("div",aa,[s("div",null,[s("div",ea,n(Is(e.ShiftDate)),1),s("div",la,n(e.ShiftType)+" â€¢ "+n(Cs(e.AttendantID)),1)]),s("span",{class:r(`badge badge-light-${e.Status==="Closed"?"success":e.Status==="Open"?"warning":"info"}`)},n(e.Status),3)]),s("div",na,[s("div",oa,[t[33]||(t[33]=s("div",{class:"fs-7 text-gray-600 fw-semibold"},"Expected",-1)),s("div",ia,n(_(e.ExpectedCash)),1)]),s("div",ca,[t[34]||(t[34]=s("div",{class:"fs-7 text-gray-600 fw-semibold"},"Actual",-1)),s("div",ra,n(_(e.ActualCash)),1)]),s("div",da,[t[35]||(t[35]=s("div",{class:"fs-7 text-gray-600 fw-semibold"},"Variance",-1)),s("div",{class:r(`fw-bold text-${parseFloat(e.Variance)>0?"success":parseFloat(e.Variance)<0?"danger":"gray-700"}`)},n(parseFloat(e.Variance)>0?"+":"")+n(_(e.Variance)),3)])])])])]))),128))])],512),[[J,p.value===2]]),I(s("div",ua,[t[49]||(t[49]=O('<h3 class="card-title fw-bold mb-6" data-v-18cb55af><i class="ki-duotone ki-security-user fs-2 me-2 text-danger" data-v-18cb55af><span class="path1" data-v-18cb55af></span><span class="path2" data-v-18cb55af></span><span class="path3" data-v-18cb55af></span></i> Risk &amp; Compliance Intelligence </h3>',1)),s("div",fa,[s("div",va,[s("div",{class:r(["card card-flush",`bg-light-${m.value.length>0?"danger":"success"}`])},[s("div",ga,[s("i",{class:r(["ki-duotone ki-information-5 fs-3x mb-2",`text-${m.value.length>0?"danger":"success"}`])},t[38]||(t[38]=[s("span",{class:"path1"},null,-1),s("span",{class:"path2"},null,-1),s("span",{class:"path3"},null,-1)]),2),s("h4",pa,n(m.value.length),1),t[39]||(t[39]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Critical Alerts",-1))])],2)]),s("div",ha,[s("div",{class:r(["card card-flush",`bg-light-${A.value.length>0?"warning":"success"}`])},[s("div",ma,[s("i",{class:r(["ki-duotone ki-shield-search fs-3x mb-2",`text-${A.value.length>0?"warning":"success"}`])},t[40]||(t[40]=[s("span",{class:"path1"},null,-1),s("span",{class:"path2"},null,-1)]),2),s("h4",ba,n(A.value.length),1),t[41]||(t[41]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Fraud Detections",-1))])],2)]),s("div",ya,[s("div",xa,[s("div",_a,[t[42]||(t[42]=s("i",{class:"ki-duotone ki-shield-tick fs-3x text-info mb-2"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)),s("h4",wa,n(ps.value)+"%",1),t[43]||(t[43]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Compliance Score",-1))])])]),s("div",Sa,[s("div",{class:r(["card card-flush",`bg-light-${ls.value>0?"danger":"success"}`])},[s("div",ka,[s("i",{class:r(["ki-duotone ki-chart-line-down fs-3x mb-2",`text-${ls.value>0?"danger":"success"}`])},t[44]||(t[44]=[s("span",{class:"path1"},null,-1),s("span",{class:"path2"},null,-1)]),2),s("h4",Da,n(ls.value),1),t[45]||(t[45]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"High Risk Variances",-1))])],2)])]),m.value.length===0?(f(),u("div",Ia,t[46]||(t[46]=[O('<i class="ki-duotone ki-shield-tick fs-5x text-success mb-4" data-v-18cb55af><span class="path1" data-v-18cb55af></span><span class="path2" data-v-18cb55af></span></i><h4 class="fw-bold text-success mb-2" data-v-18cb55af>All Systems Secure</h4><p class="text-gray-600" data-v-18cb55af> No critical security alerts detected. Operations are within secure parameters. </p>',3)]))):(f(),u("div",Ca,[t[48]||(t[48]=s("h4",{class:"fw-bold text-gray-900 mb-4"},"Active Critical Alerts",-1)),s("div",Ta,[(f(!0),u(E,null,L(m.value,e=>(f(),u("div",{key:e.id,class:"col-12"},[s("div",Aa,[s("div",Pa,[s("div",$a,[t[47]||(t[47]=s("i",{class:"ki-duotone ki-information-5 fs-2x text-danger"},[s("span",{class:"path1"}),s("span",{class:"path2"}),s("span",{class:"path3"})],-1)),s("div",Na,[s("h5",Ra,n(e.title),1),s("p",Va,n(e.message),1),s("div",Oa,[s("span",Ea,n(e.severity),1),s("span",La,n(hs(e.timestamp)),1)])])])])])]))),128))])]))],512),[[J,p.value===3]]),I(s("div",Fa,[t[66]||(t[66]=s("h3",{class:"card-title fw-bold mb-6"},[s("i",{class:"ki-duotone ki-chart-line-up fs-2 me-2 text-warning"},[s("span",{class:"path1"}),s("span",{class:"path2"})]),H(" Executive Intelligence Dashboard ")],-1)),s("div",Ma,[s("div",Ba,[s("div",Ua,[s("div",Ga,[t[50]||(t[50]=s("i",{class:"ki-duotone ki-dollar fs-3x text-success mb-2"},[s("span",{class:"path1"}),s("span",{class:"path2"}),s("span",{class:"path3"})],-1)),s("h3",Ha,n(_(es.value)),1),t[51]||(t[51]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Total Sales",-1))])])]),s("div",Ya,[s("div",ja,[s("div",za,[t[52]||(t[52]=O('<i class="ki-duotone ki-chart-simple fs-3x text-primary mb-2" data-v-18cb55af><span class="path1" data-v-18cb55af></span><span class="path2" data-v-18cb55af></span><span class="path3" data-v-18cb55af></span><span class="path4" data-v-18cb55af></span></i>',1)),s("h3",Wa,n(D($.value.length)),1),t[53]||(t[53]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Transactions",-1))])])]),s("div",Ka,[s("div",qa,[s("div",Ja,[t[54]||(t[54]=s("i",{class:"ki-duotone ki-oil-barrel fs-3x text-warning mb-2"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)),s("h3",Qa,n(D(ws.value)),1),t[55]||(t[55]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Fuel Dispensed (L)",-1))])])]),s("div",Xa,[s("div",Za,[s("div",se,[t[56]||(t[56]=s("i",{class:"ki-duotone ki-shield-tick fs-3x text-info mb-2"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)),s("h3",te,n(ps.value)+"%",1),t[57]||(t[57]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Compliance Score",-1))])])]),s("div",ae,[s("div",ee,[s("div",le,[t[58]||(t[58]=s("i",{class:"ki-duotone ki-calculator fs-3x text-success mb-2"},[s("span",{class:"path1"}),s("span",{class:"path2"}),s("span",{class:"path3"})],-1)),s("h3",ne,n(_(gs.value)),1),t[59]||(t[59]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Average Transaction",-1))])])]),s("div",oe,[s("div",{class:r(["card card-flush",`bg-light-${j.value>1e3?"danger":j.value>500?"warning":"success"}`])},[s("div",ie,[s("i",{class:r(["ki-duotone ki-chart-line-down fs-3x mb-2",`text-${j.value>1e3?"danger":j.value>500?"warning":"success"}`])},t[60]||(t[60]=[s("span",{class:"path1"},null,-1),s("span",{class:"path2"},null,-1)]),2),s("h3",ce,n(D(j.value)),1),t[61]||(t[61]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Fuel Variance (L)",-1))])],2)]),s("div",re,[s("div",{class:r(["card card-flush",`bg-light-${y.value>5e4?"danger":y.value>2e4?"warning":"success"}`])},[s("div",de,[s("i",{class:r(["ki-duotone ki-wallet fs-3x mb-2",`text-${y.value>5e4?"danger":y.value>2e4?"warning":"success"}`])},t[62]||(t[62]=[s("span",{class:"path1"},null,-1),s("span",{class:"path2"},null,-1),s("span",{class:"path3"},null,-1),s("span",{class:"path4"},null,-1)]),2),s("h3",ue,n(_(y.value)),1),t[63]||(t[63]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Cash Variance",-1))])],2)]),s("div",fe,[s("div",{class:r(["card card-flush",`bg-light-${m.value.length>0?"danger":"success"}`])},[s("div",ve,[s("i",{class:r(["ki-duotone ki-information-5 fs-3x mb-2",`text-${m.value.length>0?"danger":"success"}`])},t[64]||(t[64]=[s("span",{class:"path1"},null,-1),s("span",{class:"path2"},null,-1),s("span",{class:"path3"},null,-1)]),2),s("h3",ge,n(m.value.length),1),t[65]||(t[65]=s("p",{class:"text-gray-600 fw-semibold mb-0 fs-7"},"Critical Alerts",-1))])],2)])])],512),[[J,p.value===4]])]),s("div",pe,[s("div",he,[s("div",me,[s("button",{class:"btn btn-light-primary",disabled:p.value===1,onClick:As},t[67]||(t[67]=[s("i",{class:"ki-duotone ki-arrow-left fs-3 me-2"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1),H(" Previous ")]),8,be),s("div",ye,[(f(!0),u(E,null,L(P.value,e=>(f(),u("div",{key:e.id,class:r(["rounded-circle",p.value===e.id?"bg-primary":"bg-light-primary"]),style:{width:"12px",height:"12px"}},null,2))),128))]),s("button",{class:"btn btn-light-primary",disabled:p.value===P.value.length,onClick:Ts},t[68]||(t[68]=[H(" Next "),s("i",{class:"ki-duotone ki-arrow-right fs-3 ms-2"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)]),8,xe)])])]),Y.value?(f(),u("div",_e,[s("div",we,[s("div",Se,[s("div",ke,[t[69]||(t[69]=s("div",{class:"spinner-border text-white mb-3",style:{width:"3rem",height:"3rem"},role:"status"},[s("span",{class:"visually-hidden"},"Loading...")],-1)),s("p",De,n(rs.value),1)])])])])):G("",!0)])}}},Pe=Vs(Ce,[["__scopeId","data-v-18cb55af"]]);export{Pe as default};
