import { _ as Ft, r as H, a as G, c as $t, o as Ot, d as m, e as t, g as M, f as O, h as C, i as st, t as o, w as et, j as Mt, v as lt, F as R, k as B, y as at, S as P, p as f } from "./index-Fk_fMhvq.js"; const Nt = { class: "d-flex flex-column gap-5 p-4" }, Rt = { class: "d-flex flex-column gap-3" }, Bt = { class: "d-flex align-items-center justify-content-between" }, Et = ["disabled"], jt = { key: 0, class: "alert alert-info d-flex align-items-center border-0", style: { background: "linear-gradient(135deg, #e3f2fd 0%, #90caf9 100%)" } }, Lt = { class: "flex-grow-1" }, Ut = { class: "text-gray-800 fs-7" }, Ht = { key: 0, class: "badge badge-light-success ms-2" }, zt = { class: "card card-flush border border-gray-300" }, qt = { class: "card-body p-4" }, Vt = { class: "row g-3" }, Yt = { class: "col-12 col-md-6 col-lg-3" }, Wt = { key: 0, class: "col-12 col-md-6 col-lg-3" }, Gt = { key: 1, class: "col-12 col-md-6 col-lg-3" }, Jt = { key: 0, class: "alert alert-warning d-flex align-items-start border-0", style: { background: "linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%)" } }, Kt = { class: "flex-grow-1" }, Qt = { class: "badge bg-warning text-dark me-2" }, Xt = { class: "text-gray-800 fs-7" }, Zt = { class: "row g-4" }, ts = { class: "col-6 col-lg-3" }, ss = { class: "card card-flush h-100 border border-gray-300", style: { background: "linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%)" } }, es = { class: "card-body d-flex flex-column align-items-center text-center p-4" }, as = { class: "fw-bold fs-2 text-gray-800" }, ns = { class: "col-6 col-lg-3" }, os = { class: "card card-flush h-100 border border-gray-300", style: { background: "linear-gradient(135deg, #fff3e0 0%, #ffcc80 100%)" } }, is = { class: "card-body d-flex flex-column align-items-center text-center p-4" }, rs = { class: "fw-bold fs-2 text-gray-800" }, ls = { class: "col-6 col-lg-3" }, cs = { class: "card card-flush h-100 border border-gray-300", style: { background: "linear-gradient(135deg, #ffebee 0%, #ffab91 100%)" } }, ds = { class: "card-body d-flex flex-column align-items-center text-center p-4" }, us = { class: "fw-bold fs-2 text-gray-800" }, ps = { class: "col-6 col-lg-3" }, ms = { class: "card card-flush h-100 border border-gray-300", style: { background: "linear-gradient(135deg, #e3f2fd 0%, #90caf9 100%)" } }, fs = { class: "card-body d-flex flex-column align-items-center text-center p-4" }, gs = { class: "fw-bold fs-2 text-gray-800" }, hs = { class: "row g-4" }, ys = { class: "col-12 col-lg-6" }, vs = { class: "card card-flush h-100 border border-gray-300" }, _s = { class: "card-body pt-0" }, bs = { class: "d-flex flex-column gap-3" }, xs = { class: "flex-grow-1" }, ws = { class: "d-flex justify-content-between align-items-center" }, Ds = { class: "fw-semibold text-gray-800 fs-7" }, Cs = { class: "text-gray-600 fs-8" }, ks = { class: "progress h-6px bg-light-primary" }, Ss = { class: "col-12 col-lg-6" }, Ts = { class: "card card-flush h-100 border border-gray-300" }, Ps = { class: "card-body pt-0" }, Is = { class: "d-flex align-items-center justify-content-between mb-4" }, As = { class: "fw-bold fs-1 text-success" }, Fs = { class: "d-flex align-items-center text-success" }, $s = { class: "fw-semibold" }, Os = { class: "progress h-8px bg-light-success mb-3" }, Ms = { class: "text-gray-600 fs-7" }, Ns = { class: "card card-flush border border-gray-300" }, Rs = { class: "card-header border-0" }, Bs = { class: "nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-6 fw-bold" }, Es = { class: "nav-item" }, js = { class: "nav-item" }, Ls = { class: "nav-item" }, Us = { class: "nav-item" }, Hs = { class: "card-body" }, zs = { key: 0, class: "tab-content" }, qs = { class: "table-responsive" }, Vs = { class: "table table-rounded table-striped border gy-7 gs-7" }, Ys = { class: "d-flex align-items-center" }, Ws = { class: "symbol symbol-35px symbol-circle me-3" }, Gs = { class: "symbol-label bg-light-primary text-primary fw-bold fs-8" }, Js = { class: "d-flex flex-column" }, Ks = { class: "text-gray-800 fw-bold fs-7" }, Qs = { class: "text-gray-400 fs-8" }, Xs = { class: "text-center" }, Zs = { class: "text-center" }, te = { class: "fw-semibold fs-8 text-gray-800" }, se = { class: "text-center" }, ee = { class: "fw-semibold fs-8 text-warning" }, ae = { class: "text-center" }, ne = { class: "fw-semibold fs-8 text-orange" }, oe = { class: "text-center" }, ie = { class: "fw-semibold fs-8 text-danger" }, re = { class: "text-center" }, le = { class: "text-center" }, ce = ["onClick"], de = { key: 1, class: "tab-content" }, ue = { class: "table-responsive" }, pe = { class: "table table-rounded table-striped border gy-7 gs-7" }, me = { class: "d-flex align-items-center" }, fe = { class: "symbol symbol-35px symbol-circle me-3" }, ge = { class: "symbol-label bg-light-info text-info fw-bold fs-8" }, he = { class: "d-flex flex-column" }, ye = { class: "text-gray-800 fw-bold fs-7" }, ve = { class: "text-gray-400 fs-8" }, _e = { class: "text-center" }, be = { class: "fw-bold fs-7 text-danger" }, xe = { class: "text-center" }, we = { class: "fw-semibold fs-8 text-gray-800" }, De = { class: "text-center" }, Ce = { class: "fw-semibold fs-8 text-warning" }, ke = { class: "text-center" }, Se = { class: "fw-semibold fs-8 text-orange" }, Te = { class: "text-center" }, Pe = { class: "fw-semibold fs-8 text-danger" }, Ie = { class: "text-center" }, Ae = { class: "text-center" }, Fe = ["onClick"], $e = { key: 2, class: "tab-content" }, Oe = { class: "row g-4" }, Me = { class: "col-12 col-lg-8" }, Ne = { class: "d-flex flex-column gap-4" }, Re = { class: "d-flex align-items-start" }, Be = { class: "flex-grow-1" }, Ee = { class: "fw-bold mb-2" }, je = { class: "mb-2 fs-7" }, Le = { class: "d-flex flex-wrap gap-2 mb-2" }, Ue = { class: "badge bg-light text-gray-800" }, He = { class: "badge bg-light text-gray-800" }, ze = { class: "badge bg-light text-gray-800" }, qe = { class: "d-flex gap-2" }, Ve = ["onClick"], Ye = ["onClick"], We = { class: "col-12 col-lg-4" }, Ge = { class: "card card-flush bg-light" }, Je = { class: "card-body" }, Ke = { class: "d-flex flex-column gap-3" }, Qe = { class: "d-flex justify-content-between" }, Xe = { class: "fw-bold text-warning" }, Ze = { class: "d-flex justify-content-between" }, ta = { class: "fw-bold text-success" }, sa = { class: "d-flex justify-content-between" }, ea = { class: "fw-bold text-danger" }, aa = { class: "d-flex justify-content-between" }, na = { class: "fw-bold text-primary" }, oa = { key: 3, class: "tab-content" }, ia = { class: "row g-4" }, ra = { class: "col-12 col-lg-6" }, la = { class: "card card-flush bg-light-primary" }, ca = { class: "card-body" }, da = { class: "d-flex justify-content-between align-items-center mb-1" }, ua = { class: "text-gray-800 fw-semibold fs-7" }, pa = { class: "text-primary fw-bold" }, ma = { class: "progress h-4px bg-light" }, fa = { class: "col-12 col-lg-6" }, ga = { class: "card card-flush bg-light-success" }, ha = { class: "card-body" }, ya = { class: "d-flex align-items-start" }, va = { class: "text-gray-800 fw-semibold fs-7 mb-1" }, _a = { class: "text-gray-600 fs-8" }, ba = { class: "col-12" }, xa = { class: "card card-flush bg-light-warning" }, wa = { class: "card-body" }, Da = { class: "row g-3" }, Ca = { class: "d-flex flex-column align-items-center text-center p-3 bg-white rounded" }, ka = { class: "fw-bold fs-3 text-gray-800" }, Sa = { class: "text-gray-600 fs-7 fw-semibold" }, Ta = { class: "fs-8" }, Pa = { key: 1, class: "d-flex align-items-center justify-content-center position-fixed top-0 start-0 w-100 h-100 bg-white bg-opacity-75", style: { "z-index": "1055" } }, z = "https://backend.cloudfuelstationmis.com/api/records/v1", Ia = {
  __name: "AgingAnalysis", setup(Aa) {
    const j = localStorage.getItem("kigrama_auth_token") || "", q = H(!1), I = H("customers"), x = G({ type: "month", startDate: "", endDate: "" }), k = G({ totalOutstanding: 0, averageDaysOutstanding: 0, overdueAccounts: 0, collectionEfficiency: 0 }), L = G({ efficiency: 87, improvement: 12, collected: 245e4, target: 2816e3 }), J = G({ activeInvestigations: 7, resolvedThisMonth: 23, potentialLoss: 145e3, preventionRate: 94 }), V = H([]), Y = H([]), U = H([]), N = H([]), b = G({ riskScore: 78, alerts: [], paymentBehavior: [], recommendations: [], predictions: [] }), ct = $t(() => { const a = V.value, s = Y.value; let e = 0, n = 0, g = 0, l = 0; a.forEach(d => { e += d.Current, n += d.Days31_60, g += d.Days61_90, l += d.Days90Plus }), s.forEach(d => { e += d.Current, n += d.Days31_60, g += d.Days61_90, l += d.Days90Plus }); const i = e + n + g + l; return i === 0 ? [{ name: "On Time (0-30 days)", amount: 0, percentage: 0, color: "bg-success", progressColor: "bg-success" }, { name: "Overdue 31-60 Days", amount: 0, percentage: 0, color: "bg-warning", progressColor: "bg-warning" }, { name: "Overdue 61-90 Days", amount: 0, percentage: 0, color: "bg-orange", progressColor: "bg-orange" }, { name: "Overdue 90+ Days", amount: 0, percentage: 0, color: "bg-danger", progressColor: "bg-danger" }] : [{ name: "On Time (0-30 days)", amount: e, percentage: Math.round(e / i * 100), color: "bg-success", progressColor: "bg-success" }, { name: "Overdue 31-60 Days", amount: n, percentage: Math.round(n / i * 100), color: "bg-warning", progressColor: "bg-warning" }, { name: "Overdue 61-90 Days", amount: g, percentage: Math.round(g / i * 100), color: "bg-orange", progressColor: "bg-orange" }, { name: "Overdue 90+ Days", amount: l, percentage: Math.round(l / i * 100), color: "bg-danger", progressColor: "bg-danger" }] }), W = () => { try { const s = JSON.parse(localStorage.getItem("kigrama_user_data") || "{}").stations || []; if (s.length === 0) return N.value = [], []; let e = s.find(n => n.IsPrimary === "1"); return e || (e = s[0]), N.value = [e], [e.StationID] } catch (a) { return console.error("Error getting user station:", a), N.value = [], [] } }, dt = async () => { try { const a = W(); if (a.length === 0) throw new Error("No station assigned to user"); const s = a[0], [e, n] = await Promise.all([fetch(`${z}/Transactions`, { headers: { Authorization: `Bearer ${j}`, "Content-Type": "application/json" } }), fetch(`${z}/Customers`, { headers: { Authorization: `Bearer ${j}`, "Content-Type": "application/json" } })]); if (!e.ok || !n.ok) throw new Error("Failed to fetch payment status data"); const [g, l] = await Promise.all([e.json(), n.json()]), i = g.records || [], d = l.records || [], _ = new Map; d.forEach(c => { _.set(c.CustomerID, c) }); const h = i.filter(c => c.StationID === s && c.IsCreditSale === "1" && parseFloat(c.OutstandingAmount || "0") > 0 && c.CustomerID != null), r = new Map, p = new Date; h.forEach(c => { const v = _.get(c.CustomerID); if (!v) return; const S = v.CustomerID; r.has(S) || r.set(S, { CustomerID: v.CustomerID, CustomerCode: v.CustomerCode, CustomerName: v.CompanyName || `${v.FirstName || ""} ${v.LastName || ""}`.trim(), PhoneNumber: v.PhoneNumber, TotalOutstanding: 0, Current: 0, Days31_60: 0, Days61_90: 0, Days90Plus: 0, RiskScore: 0 }); const w = r.get(S), T = parseFloat(c.OutstandingAmount || "0"), E = new Date(c.TransactionDate), F = Math.floor((p - E) / (1e3 * 60 * 60 * 24)); w.TotalOutstanding += T, F <= 30 ? w.Current += T : F <= 60 ? w.Days31_60 += T : F <= 90 ? w.Days61_90 += T : w.Days90Plus += T }); const A = Array.from(r.values()).map(c => ({ ...c, RiskScore: gt(c) })).sort((c, v) => v.TotalOutstanding - c.TotalOutstanding); V.value = A } catch (a) { console.error("Error fetching customer payment status:", a), X(`Failed to load customer payment status data: ${a.message}`) } }, ut = async () => { try { const a = W(); if (a.length === 0) throw new Error("No station assigned to user"); const s = a[0], [e, n] = await Promise.all([fetch(`${z}/SupplierInvoices`, { headers: { Authorization: `Bearer ${j}`, "Content-Type": "application/json" } }), fetch(`${z}/Suppliers`, { headers: { Authorization: `Bearer ${j}`, "Content-Type": "application/json" } })]); if (!e.ok || !n.ok) throw new Error("Failed to fetch supplier data"); const [g, l] = await Promise.all([e.json(), n.json()]), i = g.records || [], d = l.records || [], _ = new Map; d.forEach(c => { _.set(c.SupplierID, c) }); const h = i.filter(c => c.StationID === s && c.Status === "Outstanding" && parseFloat(c.OutstandingAmount || "0") > 0), r = new Map, p = new Date; h.forEach(c => { const v = c.SupplierID, S = _.get(v); if (!S) return; r.has(v) || r.set(v, { SupplierID: S.SupplierID, SupplierName: S.Name, TaxIdentificationNumber: S.TaxIdentificationNumber, ContactPerson: S.ContactPerson, TotalDue: 0, Current: 0, Days31_60: 0, Days61_90: 0, Days90Plus: 0, PaymentPriority: "Medium" }); const w = r.get(v), T = parseFloat(c.OutstandingAmount || "0"), E = new Date(c.DueDate), F = Math.floor((p - E) / (1e3 * 60 * 60 * 24)); w.TotalDue += T, F <= 0 ? w.Current += T : F <= 30 ? w.Days31_60 += T : F <= 60 ? w.Days61_90 += T : w.Days90Plus += T }); const A = Array.from(r.values()).map(c => ({ ...c, PaymentPriority: ht(c) })).sort((c, v) => v.TotalDue - c.TotalDue); Y.value = A } catch (a) { console.error("Error fetching supplier payment status:", a), X(`Failed to load supplier payment status data: ${a.message}`) } }, pt = async () => { try { const a = W(); if (a.length === 0) throw new Error("No station assigned to user"); const s = a[0]; let e = []; try { const n = await fetch(`${z}/FraudDetectionLogs`, { headers: { Authorization: `Bearer ${j}`, "Content-Type": "application/json" } }); n.ok && (e = (await n.json()).records || [], e = e.filter(l => !l.StationID || l.StationID === s)) } catch { console.warn("FraudDetectionLogs table not accessible, using simulated data") } e.length === 0 && (e = await mt([s])), U.value = e.map(n => ({ id: n.FraudLogID || n.id || Math.random(), type: n.RuleType || n.type || "suspicious_pattern", severity: n.Severity || n.severity || "Medium", title: n.Title || vt(n), description: n.Details || n.description || "Suspicious activity detected in station transactions", customerName: n.CustomerName || n.customerName || "Unknown Customer", transactionDate: n.TransactionDate || n.transactionDate || new Date().toISOString().split("T")[0], amount: parseFloat(n.Amount || n.amount || 0), status: n.Status || n.status || "Open", stationId: n.StationID || n.stationId })).filter(n => n.status !== "Resolved") } catch (a) { console.error("Error fetching fraud analysis:", a), U.value = yt() } }, mt = async a => { try { const s = a[0], e = await fetch(`${z}/Transactions`, { headers: { Authorization: `Bearer ${j}`, "Content-Type": "application/json" } }); if (!e.ok) return []; const g = ((await e.json()).records || []).filter(r => r.StationID === s), l = [], i = g.map(r => parseFloat(r.TotalAmount || "0")), d = i.reduce((r, p) => r + p, 0) / i.length, _ = Math.sqrt(i.reduce((r, p) => r + Math.pow(p - d, 2), 0) / i.length); g.forEach(r => { const p = parseFloat(r.TotalAmount || "0"); p > d + 3 * _ && p > 1e5 && l.push({ id: `fraud_${r.TransactionID}`, type: "amount_anomaly", severity: "High", title: "Unusually Large Transaction", description: `Transaction amount (${p.toLocaleString()}) is significantly above normal patterns`, customerName: r.CustomerID ? `Customer ${r.CustomerID}` : "Walk-in Customer", transactionDate: r.TransactionDate, amount: p, status: "Open", stationId: r.StationID }), p > 5e4 && p % 1e4 === 0 && l.push({ id: `round_${r.TransactionID}`, type: "suspicious_pattern", severity: "Medium", title: "Round Number Transaction", description: "Large round number transactions can indicate fraudulent activity", customerName: r.CustomerID ? `Customer ${r.CustomerID}` : "Walk-in Customer", transactionDate: r.TransactionDate, amount: p, status: "Open", stationId: r.StationID }) }); const h = {}; return g.forEach(r => { const p = new Date(r.CreatedAt || r.TransactionDate).getHours(); h[p] = (h[p] || 0) + 1 }), Object.entries(h).forEach(([r, p]) => { (r < 6 || r > 22) && p > 5 && l.push({ id: `time_${r}`, type: "suspicious_timing", severity: "Medium", title: "Off-Hours Activity", description: `Unusual number of transactions (${p}) during off-hours (${r}:00)`, customerName: "Multiple Customers", transactionDate: new Date().toISOString().split("T")[0], amount: 0, status: "Open", stationId: s }) }), l.slice(0, 10) } catch (s) { return console.error("Error generating fraud analysis:", s), [] } }, ft = () => { const a = V.value, s = Y.value; if (a.length === 0 && s.length === 0) { b.paymentBehavior = [], b.recommendations = [], b.predictions = [], b.alerts = []; return } let e = a.length, n = 0, g = 0, l = 0, i = 0, d = 0; a.forEach(u => { const D = parseFloat(u.Current || 0), $ = parseFloat(u.Days31_60 || 0), it = parseFloat(u.Days61_90 || 0), rt = parseFloat(u.Days90Plus || 0), tt = parseFloat(u.TotalOutstanding || 0); i += tt, d += D, tt > 0 && D / tt >= .8 && n++, ($ > 0 || it > 0 || rt > 0) && g++, D > 0 && ($ > 0 || it > 0 || rt > 0) && l++ }); const _ = e > 0 ? Math.round(n / e * 100) : 0, h = e > 0 ? Math.round(g / e * 100) : 0, r = e > 0 ? Math.round(l / e * 100) : 0, p = i > 0 ? Math.round(d / i * 100) : 100; b.paymentBehavior = [{ id: 1, metric: "On-time Payments", value: `${_}%`, percentage: _ }, { id: 2, metric: "Collection Efficiency", value: `${p}%`, percentage: p }, { id: 3, metric: "Late Payments", value: `${h}%`, percentage: h }, { id: 4, metric: "Partial Payments", value: `${r}%`, percentage: r }]; const A = [], c = a.filter(u => parseFloat(u.Days90Plus || 0) > 0), v = a.filter(u => parseFloat(u.Days61_90 || 0) > 0 || parseFloat(u.Days90Plus || 0) > 0), S = a.filter(u => parseFloat(u.Days31_60 || 0) > 0), w = a.filter(u => u.RiskScore < 50); if (c.length > 0) { const u = c.reduce((D, $) => D + parseFloat($.Days90Plus || 0), 0); A.push({ id: 1, priority: "Critical", action: `Contact ${c.length} customers with 90+ days overdue immediately`, reason: `Total amount: ${y(u)} - urgent collection required` }) } if (v.length > 0) { const u = v.reduce((D, $) => D + parseFloat($.Days61_90 || 0) + parseFloat($.Days90Plus || 0), 0); A.push({ id: 2, priority: "High", action: `Follow up with ${v.length} customers overdue 60+ days`, reason: `Amount: ${y(u)} - recovery rate drops significantly after 60 days` }) } if (S.length > 0) { const u = S.reduce((D, $) => D + parseFloat($.Days31_60 || 0), 0); A.push({ id: 3, priority: "Medium", action: `Send payment reminders to ${S.length} customers (31-60 days)`, reason: `Amount: ${y(u)} - early intervention prevents longer delays` }) } if (w.length > 0) { const u = w.reduce((D, $) => D + parseFloat($.TotalOutstanding || 0), 0); A.push({ id: 4, priority: "Low", action: `Review credit limits for ${w.length} high-risk customers`, reason: `Total exposure: ${y(u)} - prevent future credit issues` }) } A.length === 0 && A.push({ id: 1, priority: "Low", action: "All payments are current - excellent performance!", reason: "Continue monitoring payment patterns and maintain good relationships" }), b.recommendations = A.slice(0, 4); const T = a.reduce((u, D) => u + parseFloat(D.Days31_60 || 0) + parseFloat(D.Days61_90 || 0) + parseFloat(D.Days90Plus || 0), 0), E = i > 0 ? Math.round(T / i * 100) : 0, F = k.averageDaysOutstanding || 0, Z = k.overdueAccounts || 0, It = E > 20 ? "up" : "down", At = p > 80 ? "up" : "down"; b.predictions = [{ id: 1, metric: "Default Risk", value: `${E}%`, trend: It, change: `${Math.abs(E - 15)}%` }, { id: 2, metric: "Collection Rate", value: `${p}%`, trend: At, change: `${Math.abs(p - 85)}%` }, { id: 3, metric: "Overdue Accounts", value: `${Z}`, trend: Z > 5 ? "up" : "down", change: `${Z} accounts` }, { id: 4, metric: "Avg Days Outstanding", value: `${F}`, trend: F > 45 ? "up" : "down", change: `${Math.abs(F - 30)} days` }], b.alerts = U.value.slice(0, 5).map(u => ({ id: u.id, severity: u.severity, message: `${u.type.replace("_", " ")}: ${u.customerName} - ${y(u.amount)}` })) }, gt = a => { let s = 100; const e = parseFloat(a.TotalOutstanding || 0), n = parseFloat(a.Current || 0), g = parseFloat(a.Days31_60 || 0), l = parseFloat(a.Days61_90 || 0), i = parseFloat(a.Days90Plus || 0); if (e > 0) { const d = g + l + i, _ = d / e; if (s -= _ * 50, i > 0) { const h = i / e; s -= h * 40 } if (l > 0) { const h = l / e; s -= h * 25 } if (g > 0) { const h = g / e; s -= h * 15 } e > 5e5 && (s -= 10), n === 0 && d > 0 && (s -= 15) } return Math.max(0, Math.min(100, Math.round(s))) }, ht = a => { const s = parseFloat(a.TotalDue || 0); parseFloat(a.Current || 0); const e = parseFloat(a.Days31_60 || 0), n = parseFloat(a.Days61_90 || 0), g = parseFloat(a.Days90Plus || 0), l = e + n + g; return g > 1e5 || l > 0 && l / s > .8 ? "Critical" : n > 5e4 || l > 0 && l / s > .5 ? "High" : l > 0 && l / s > .2 ? "Medium" : "Low" }, yt = () => { const a = W(), s = a.length > 0 ? a[0] : 1; return [{ id: 1, type: "unusual_pattern", severity: "High", title: "Unusual Transaction Pattern Detected", description: "Customer made 15 transactions in 2 hours, significantly above normal behavior", customerName: "ACME Logistics Ltd", transactionDate: "2025-06-26", amount: 75e3, status: "Investigating", stationId: s }, { id: 2, type: "duplicate_payment", severity: "Medium", title: "Potential Duplicate Payment", description: "Same amount paid twice within 5 minutes", customerName: "City Transport Co", transactionDate: "2025-06-25", amount: 25e3, status: "Open", stationId: s }, { id: 3, type: "credit_limit_breach", severity: "Critical", title: "Credit Limit Exceeded", description: "Transaction approved despite customer being over credit limit", customerName: "Rural Distribution Ltd", transactionDate: "2025-06-24", amount: 12e4, status: "Open", stationId: s }, { id: 4, type: "amount_anomaly", severity: "High", title: "Unusually Large Transaction", description: "Transaction amount exceeds 5x the customer average", customerName: "Express Deliveries", transactionDate: "2025-06-23", amount: 2e5, status: "Open", stationId: s }, { id: 5, type: "suspicious_timing", severity: "Medium", title: "Off-Hours Transaction", description: "Large transaction processed at 2:30 AM", customerName: "Night Freight Ltd", transactionDate: "2025-06-22", amount: 85e3, status: "Open", stationId: s }] }, vt = a => ({ unusual_pattern: "Unusual Transaction Pattern", duplicate_payment: "Potential Duplicate Payment", credit_limit_breach: "Credit Limit Exceeded", suspicious_timing: "Suspicious Transaction Timing", amount_anomaly: "Unusual Transaction Amount" })[a.RuleType] || "Fraud Alert", _t = () => { const a = V.value, s = Y.value; k.totalOutstanding = 0, k.overdueAccounts = 0, k.averageDaysOutstanding = 0; let e = 0, n = 0; a.forEach(i => { k.totalOutstanding += parseFloat(i.TotalOutstanding || 0); const d = parseFloat(i.Days31_60 || 0), _ = parseFloat(i.Days61_90 || 0), h = parseFloat(i.Days90Plus || 0); (d > 0 || _ > 0 || h > 0) && k.overdueAccounts++, e += d * 45 + _ * 75 + h * 120, n += d + _ + h }), s.forEach(i => { k.totalOutstanding += parseFloat(i.TotalDue || 0); const d = parseFloat(i.Days31_60 || 0), _ = parseFloat(i.Days61_90 || 0), h = parseFloat(i.Days90Plus || 0); (d > 0 || _ > 0 || h > 0) && k.overdueAccounts++, e += d * 45 + _ * 75 + h * 120, n += d + _ + h }), k.averageDaysOutstanding = n > 0 ? Math.round(e / n) : 0; const g = a.reduce((i, d) => i + parseFloat(d.Current || 0), 0) + s.reduce((i, d) => i + parseFloat(d.Current || 0), 0), l = k.totalOutstanding; if (L.efficiency = l > 0 ? Math.round(g / l * 100) : 100, l > 0) { const i = n / l * 100; b.riskScore = Math.min(100, Math.max(0, Math.round(100 - i))) } else b.riskScore = 0 }, K = () => { const a = new Date; switch (x.type) { case "month": x.startDate = new Date(a.getFullYear(), a.getMonth(), 1).toISOString().split("T")[0], x.endDate = a.toISOString().split("T")[0]; break; case "quarter": const s = Math.floor(a.getMonth() / 3); x.startDate = new Date(a.getFullYear(), s * 3, 1).toISOString().split("T")[0], x.endDate = a.toISOString().split("T")[0]; break; case "year": x.startDate = new Date(a.getFullYear(), 0, 1).toISOString().split("T")[0], x.endDate = a.toISOString().split("T")[0]; break }Q() }, Q = async () => { var a; q.value = !0; try { const s = W(); if (s.length === 0) { P.fire({ title: "No Station Assigned", text: "You do not have access to any station. Please contact your administrator.", icon: "warning", confirmButtonColor: "#f1416c" }); return } await Promise.all([dt(), ut(), pt()]), _t(), ft(); const e = ((a = N.value[0]) == null ? void 0 : a.StationName) || `Station ${s[0]}`; P.fire({ title: "Data Refreshed", text: `Payment status updated for ${e}`, icon: "success", toast: !0, position: "top-end", timer: 2e3, showConfirmButton: !1 }) } catch (s) { console.error("Error refreshing data:", s), X(`Failed to refresh payment status data: ${s.message}`) } finally { q.value = !1 } }, y = a => new Intl.NumberFormat("en-UG", { style: "currency", currency: "UGX", minimumFractionDigits: 0 }).format(a || 0), nt = a => a ? a.split(" ").map(s => s[0]).join("").toUpperCase().slice(0, 2) : "NA", bt = a => a > 5e5 ? "text-danger" : a > 1e5 ? "text-warning" : "text-gray-800", xt = a => a >= 80 ? "badge-light-success" : a >= 60 ? "badge-light-warning" : "badge-light-danger", ot = a => { switch (a) { case "Critical": return "badge-danger"; case "High": return "badge-warning"; case "Medium": return "badge-info"; case "Low": return "badge-success"; default: return "badge-light" } }, wt = a => { switch (a) { case "Critical": return "alert-danger"; case "High": return "alert-warning"; case "Medium": return "alert-info"; default: return "alert-light" } }, Dt = a => { switch (a) { case "unusual_pattern": return "ki-graph-up text-warning"; case "duplicate_payment": return "ki-copy text-info"; case "credit_limit_breach": return "ki-warning-2 text-danger"; default: return "ki-shield-cross text-warning" } }, Ct = async a => { const s = await P.fire({ title: "Contact Customer", text: `Contact ${a.CustomerName} about outstanding balance of ${y(a.TotalOutstanding)}?`, icon: "question", showCancelButton: !0, confirmButtonText: "Call Now", cancelButtonText: "Send SMS", confirmButtonColor: "#3699ff", cancelButtonColor: "#f1416c" }); s.isConfirmed ? P.fire({ title: "Calling Customer", text: "Initiating call...", icon: "info", toast: !0, position: "top-end", timer: 2e3, showConfirmButton: !1 }) : s.isDismissed && s.dismiss === P.DismissReason.cancel && P.fire({ title: "SMS Sent", text: "Payment reminder SMS sent to customer", icon: "success", toast: !0, position: "top-end", timer: 2e3, showConfirmButton: !1 }) }, kt = async a => { (await P.fire({ title: "Schedule Payment", text: `Schedule payment of ${y(a.TotalDue)} to ${a.SupplierName}?`, icon: "question", showCancelButton: !0, confirmButtonText: "Schedule", confirmButtonColor: "#50cd89" })).isConfirmed && P.fire({ title: "Payment Scheduled", text: "Payment has been added to the payment queue", icon: "success", toast: !0, position: "top-end", timer: 2e3, showConfirmButton: !1 }) }, St = async a => { P.fire({ title: "Investigation Started", text: `Investigation case opened for ${a.title}`, icon: "info", confirmButtonColor: "#3699ff" }) }, Tt = async a => { (await P.fire({ title: "Mark as Resolved", text: "Are you sure this fraud case is resolved?", icon: "question", showCancelButton: !0, confirmButtonText: "Mark Resolved", confirmButtonColor: "#50cd89" })).isConfirmed && (U.value = U.value.filter(e => e.id !== a.id), P.fire({ title: "Case Resolved", text: "Fraud case marked as resolved", icon: "success", toast: !0, position: "top-end", timer: 2e3, showConfirmButton: !1 })) }, Pt = () => {
      P.fire({
        title: "All Fraud Alerts", html: b.alerts.map(a => `<div class="d-flex justify-content-between align-items-center mb-2">
        <span class="badge badge-${a.severity === "High" ? "danger" : a.severity === "Medium" ? "warning" : "info"}">${a.severity}</span>
        <span class="text-gray-800">${a.message}</span>
      </div>`).join(""), confirmButtonColor: "#3699ff"
      })
    }, X = a => { P.fire({ title: "Error", text: a, icon: "error", confirmButtonColor: "#f1416c" }) }; return Ot(async () => { K(), await Q() }), (a, s) => (f(), m("div", Nt, [t("div", Rt, [t("div", Bt, [s[9] || (s[9] = O('<h1 class="text-gray-900 fw-bold fs-2 mb-0" data-v-e42e063f><i class="ki-duotone ki-calendar-8 fs-1 text-primary me-2" data-v-e42e063f><span class="path1" data-v-e42e063f></span><span class="path2" data-v-e42e063f></span><span class="path3" data-v-e42e063f></span><span class="path4" data-v-e42e063f></span><span class="path5" data-v-e42e063f></span><span class="path6" data-v-e42e063f></span></i> Payment Status </h1>', 1)), t("button", { onClick: Q, disabled: q.value, class: "btn btn-sm btn-light-primary d-flex align-items-center" }, [t("i", { class: C(["ki-duotone ki-arrows-circle fs-4 me-1", { "spinner-border spinner-border-sm": q.value }]) }, s[7] || (s[7] = [t("span", { class: "path1" }, null, -1), t("span", { class: "path2" }, null, -1)]), 2), s[8] || (s[8] = t("span", { class: "d-none d-sm-inline" }, "Refresh", -1))], 8, Et)]), N.value.length > 0 ? (f(), m("div", jt, [s[11] || (s[11] = t("i", { class: "ki-duotone ki-geolocation fs-2 text-info me-3" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)), t("div", Lt, [s[10] || (s[10] = t("h6", { class: "fw-bold text-info mb-1" }, "Station Assignment", -1)), t("span", Ut, [st(" Analyzing payment status for: " + o(N.value[0].StationName || `Station ${N.value[0].StationID}`) + " ", 1), N.value[0].IsPrimary === "1" ? (f(), m("span", Ht, "Primary Station")) : M("", !0)])])])) : M("", !0), t("div", zt, [t("div", qt, [t("div", Vt, [t("div", Yt, [s[13] || (s[13] = t("label", { class: "form-label fw-semibold text-gray-800 fs-7" }, "Filter Type", -1)), et(t("select", { "onUpdate:modelValue": s[0] || (s[0] = e => x.type = e), onChange: K, class: "form-select form-select-sm" }, s[12] || (s[12] = [O('<option value="all" data-v-e42e063f>All Time</option><option value="month" data-v-e42e063f>This Month</option><option value="quarter" data-v-e42e063f>This Quarter</option><option value="year" data-v-e42e063f>This Year</option><option value="custom" data-v-e42e063f>Custom Range</option>', 5)]), 544), [[Mt, x.type]])]), x.type === "custom" ? (f(), m("div", Wt, [s[14] || (s[14] = t("label", { class: "form-label fw-semibold text-gray-800 fs-7" }, "From Date", -1)), et(t("input", { "onUpdate:modelValue": s[1] || (s[1] = e => x.startDate = e), type: "date", class: "form-control form-control-sm" }, null, 512), [[lt, x.startDate]])])) : M("", !0), x.type === "custom" ? (f(), m("div", Gt, [s[15] || (s[15] = t("label", { class: "form-label fw-semibold text-gray-800 fs-7" }, "To Date", -1)), et(t("input", { "onUpdate:modelValue": s[2] || (s[2] = e => x.endDate = e), type: "date", class: "form-control form-control-sm" }, null, 512), [[lt, x.endDate]])])) : M("", !0), t("div", { class: "col-12 col-md-6 col-lg-3 d-flex align-items-end" }, [t("button", { onClick: K, class: "btn btn-sm btn-primary w-100" }, s[16] || (s[16] = [t("i", { class: "ki-duotone ki-magnifier fs-4 me-1" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1), st(" Apply Filter ")]))])])])])]), b.alerts.length > 0 ? (f(), m("div", Jt, [s[18] || (s[18] = O('<i class="ki-duotone ki-shield-search fs-2 text-warning me-3 mt-1" data-v-e42e063f><span class="path1" data-v-e42e063f></span><span class="path2" data-v-e42e063f></span><span class="path3" data-v-e42e063f></span><span class="path4" data-v-e42e063f></span></i>', 1)), t("div", Kt, [s[17] || (s[17] = t("h6", { class: "fw-bold text-warning mb-2" }, "AI Fraud Detection Alerts", -1)), (f(!0), m(R, null, B(b.alerts.slice(0, 3), e => (f(), m("div", { key: e.id, class: "mb-1" }, [t("span", Qt, o(e.severity), 1), t("span", Xt, o(e.message), 1)]))), 128)), t("button", { onClick: Pt, class: "btn btn-link btn-sm text-warning p-0 mt-1" }, " View All " + o(b.alerts.length) + " Alerts ", 1)])])) : M("", !0), t("div", Zt, [t("div", ts, [t("div", ss, [t("div", es, [s[19] || (s[19] = t("i", { class: "ki-duotone ki-dollar fs-2x text-success mb-3" }, [t("span", { class: "path1" }), t("span", { class: "path2" }), t("span", { class: "path3" })], -1)), t("span", as, o(y(k.totalOutstanding)), 1), s[20] || (s[20] = t("span", { class: "text-gray-600 fs-7 fw-semibold" }, "Total Outstanding", -1))])])]), t("div", ns, [t("div", os, [t("div", is, [s[21] || (s[21] = t("i", { class: "ki-duotone ki-timer fs-2x text-warning mb-3" }, [t("span", { class: "path1" }), t("span", { class: "path2" }), t("span", { class: "path3" })], -1)), t("span", rs, o(k.averageDaysOutstanding), 1), s[22] || (s[22] = t("span", { class: "text-gray-600 fs-7 fw-semibold" }, "Avg Days Outstanding", -1))])])]), t("div", ls, [t("div", cs, [t("div", ds, [s[23] || (s[23] = t("i", { class: "ki-duotone ki-warning-2 fs-2x text-danger mb-3" }, [t("span", { class: "path1" }), t("span", { class: "path2" }), t("span", { class: "path3" })], -1)), t("span", us, o(k.overdueAccounts), 1), s[24] || (s[24] = t("span", { class: "text-gray-600 fs-7 fw-semibold" }, "Overdue Accounts", -1))])])]), t("div", ps, [t("div", ms, [t("div", fs, [s[25] || (s[25] = t("i", { class: "ki-duotone ki-chart-pie-4 fs-2x text-info mb-3" }, [t("span", { class: "path1" }), t("span", { class: "path2" }), t("span", { class: "path3" })], -1)), t("span", gs, o(b.riskScore) + "%", 1), s[26] || (s[26] = t("span", { class: "text-gray-600 fs-7 fw-semibold" }, "AI Risk Score", -1))])])])]), t("div", hs, [t("div", ys, [t("div", vs, [s[27] || (s[27] = O('<div class="card-header border-0 pt-6" data-v-e42e063f><h3 class="card-title fw-bold text-gray-800" data-v-e42e063f><i class="ki-duotone ki-chart-pie-3 fs-3 text-primary me-2" data-v-e42e063f><span class="path1" data-v-e42e063f></span><span class="path2" data-v-e42e063f></span><span class="path3" data-v-e42e063f></span></i> Payment Status Distribution </h3></div>', 1)), t("div", _s, [t("div", bs, [(f(!0), m(R, null, B(ct.value, e => (f(), m("div", { key: e.name, class: "d-flex align-items-center" }, [t("div", { class: C(`w-4px h-30px rounded me-3 ${e.color}`) }, null, 2), t("div", xs, [t("div", ws, [t("span", Ds, o(e.name), 1), t("span", Cs, o(y(e.amount)), 1)]), t("div", ks, [t("div", { class: C(["progress-bar", e.progressColor]), style: at(`width: ${e.percentage}%`) }, null, 6)])])]))), 128))])])])]), t("div", Ss, [t("div", Ts, [s[29] || (s[29] = O('<div class="card-header border-0 pt-6" data-v-e42e063f><h3 class="card-title fw-bold text-gray-800" data-v-e42e063f><i class="ki-duotone ki-chart-line-up fs-3 text-success me-2" data-v-e42e063f><span class="path1" data-v-e42e063f></span><span class="path2" data-v-e42e063f></span><span class="path3" data-v-e42e063f></span></i> Collection Efficiency </h3></div>', 1)), t("div", Ps, [t("div", Is, [t("span", As, o(L.efficiency) + "%", 1), t("div", Fs, [s[28] || (s[28] = t("i", { class: "ki-duotone ki-arrow-up fs-4 me-1" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)), t("span", $s, o(L.improvement) + "%", 1)])]), t("div", Os, [t("div", { class: "progress-bar bg-success", style: at(`width: ${L.efficiency}%`) }, null, 4)]), t("div", Ms, " Collected " + o(y(L.collected)) + " of " + o(y(L.target)) + " this month ", 1)])])])]), t("div", Ns, [t("div", Rs, [t("ul", Bs, [t("li", Es, [t("a", { onClick: s[3] || (s[3] = e => I.value = "customers"), class: C(`nav-link text-active-primary ${I.value === "customers" ? "active" : ""}`), href: "#" }, s[30] || (s[30] = [O('<i class="ki-duotone ki-people fs-4 me-2" data-v-e42e063f><span class="path1" data-v-e42e063f></span><span class="path2" data-v-e42e063f></span><span class="path3" data-v-e42e063f></span><span class="path4" data-v-e42e063f></span><span class="path5" data-v-e42e063f></span></i> Customer Payments ', 2)]), 2)]), t("li", js, [t("a", { onClick: s[4] || (s[4] = e => I.value = "suppliers"), class: C(`nav-link text-active-primary ${I.value === "suppliers" ? "active" : ""}`), href: "#" }, s[31] || (s[31] = [O('<i class="ki-duotone ki-delivery fs-4 me-2" data-v-e42e063f><span class="path1" data-v-e42e063f></span><span class="path2" data-v-e42e063f></span><span class="path3" data-v-e42e063f></span><span class="path4" data-v-e42e063f></span><span class="path5" data-v-e42e063f></span></i> Supplier Payments ', 2)]), 2)]), t("li", Ls, [t("a", { onClick: s[5] || (s[5] = e => I.value = "fraud"), class: C(`nav-link text-active-primary ${I.value === "fraud" ? "active" : ""}`), href: "#" }, s[32] || (s[32] = [t("i", { class: "ki-duotone ki-shield-tick fs-4 me-2" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1), st(" Fraud Analysis ")]), 2)]), t("li", Us, [t("a", { onClick: s[6] || (s[6] = e => I.value = "insights"), class: C(`nav-link text-active-primary ${I.value === "insights" ? "active" : ""}`), href: "#" }, s[33] || (s[33] = [O('<i class="ki-duotone ki-graph-up fs-4 me-2" data-v-e42e063f><span class="path1" data-v-e42e063f></span><span class="path2" data-v-e42e063f></span><span class="path3" data-v-e42e063f></span><span class="path4" data-v-e42e063f></span><span class="path5" data-v-e42e063f></span><span class="path6" data-v-e42e063f></span></i> AI Insights ', 2)]), 2)])])]), t("div", Hs, [I.value === "customers" ? (f(), m("div", zs, [t("div", qs, [t("table", Vs, [s[35] || (s[35] = t("thead", null, [t("tr", { class: "fw-semibold fs-7 text-gray-800 bg-light" }, [t("th", { class: "min-w-125px" }, "Customer"), t("th", { class: "text-center min-w-100px" }, "Total Outstanding"), t("th", { class: "text-center min-w-80px" }, "On Time"), t("th", { class: "text-center min-w-80px" }, "31-60 Days"), t("th", { class: "text-center min-w-80px" }, "61-90 Days"), t("th", { class: "text-center min-w-80px" }, "90+ Days"), t("th", { class: "text-center min-w-100px" }, "Risk Score"), t("th", { class: "text-center min-w-80px" }, "Actions")])], -1)), t("tbody", null, [(f(!0), m(R, null, B(V.value, e => (f(), m("tr", { key: e.CustomerID }, [t("td", null, [t("div", Ys, [t("div", Ws, [t("span", Gs, o(nt(e.CustomerName)), 1)]), t("div", Js, [t("span", Ks, o(e.CustomerName), 1), t("span", Qs, o(e.CustomerCode), 1)])])]), t("td", Xs, [t("span", { class: C(["fw-bold fs-7", bt(e.TotalOutstanding)]) }, o(y(e.TotalOutstanding)), 3)]), t("td", Zs, [t("span", te, o(y(e.Current)), 1)]), t("td", se, [t("span", ee, o(y(e.Days31_60)), 1)]), t("td", ae, [t("span", ne, o(y(e.Days61_90)), 1)]), t("td", oe, [t("span", ie, o(y(e.Days90Plus)), 1)]), t("td", re, [t("span", { class: C(`badge ${xt(e.RiskScore)} fw-bold`) }, o(e.RiskScore) + "% ", 3)]), t("td", le, [t("button", { onClick: n => Ct(e), class: "btn btn-sm btn-light-primary" }, s[34] || (s[34] = [t("i", { class: "ki-duotone ki-phone fs-5" }, [t("span", { class: "path1" }), t("span", { class: "path2" })], -1)]), 8, ce)])]))), 128))])])])])) : M("", !0), I.value === "suppliers" ? (f(), m("div", de, [t("div", ue, [t("table", pe, [s[37] || (s[37] = t("thead", null, [t("tr", { class: "fw-semibold fs-7 text-gray-800 bg-light" }, [t("th", { class: "min-w-125px" }, "Supplier"), t("th", { class: "text-center min-w-100px" }, "Total Due"), t("th", { class: "text-center min-w-80px" }, "On Time"), t("th", { class: "text-center min-w-80px" }, "31-60 Days"), t("th", { class: "text-center min-w-80px" }, "61-90 Days"), t("th", { class: "text-center min-w-80px" }, "90+ Days"), t("th", { class: "text-center min-w-100px" }, "Payment Priority"), t("th", { class: "text-center min-w-80px" }, "Actions")])], -1)), t("tbody", null, [(f(!0), m(R, null, B(Y.value, e => (f(), m("tr", { key: e.SupplierID }, [t("td", null, [t("div", me, [t("div", fe, [t("span", ge, o(nt(e.SupplierName)), 1)]), t("div", he, [t("span", ye, o(e.SupplierName), 1), t("span", ve, o(e.TaxIdentificationNumber), 1)])])]), t("td", _e, [t("span", be, o(y(e.TotalDue)), 1)]), t("td", xe, [t("span", we, o(y(e.Current)), 1)]), t("td", De, [t("span", Ce, o(y(e.Days31_60)), 1)]), t("td", ke, [t("span", Se, o(y(e.Days61_90)), 1)]), t("td", Te, [t("span", Pe, o(y(e.Days90Plus)), 1)]), t("td", Ie, [t("span", { class: C(`badge ${ot(e.PaymentPriority)} fw-bold`) }, o(e.PaymentPriority), 3)]), t("td", Ae, [t("button", { onClick: n => kt(e), class: "btn btn-sm btn-light-success" }, s[36] || (s[36] = [t("i", { class: "ki-duotone ki-dollar fs-5" }, [t("span", { class: "path1" }), t("span", { class: "path2" }), t("span", { class: "path3" })], -1)]), 8, Fe)])]))), 128))])])])])) : M("", !0), I.value === "fraud" ? (f(), m("div", $e, [t("div", Oe, [t("div", Me, [t("div", Ne, [(f(!0), m(R, null, B(U.value, e => (f(), m("div", { key: e.id, class: C(["alert border-0", wt(e.severity)]) }, [t("div", Re, [t("i", { class: C(`ki-duotone fs-2 me-3 mt-1 ${Dt(e.type)}`) }, s[38] || (s[38] = [t("span", { class: "path1" }, null, -1), t("span", { class: "path2" }, null, -1), t("span", { class: "path3" }, null, -1)]), 2), t("div", Be, [t("h6", Ee, o(e.title), 1), t("p", je, o(e.description), 1), t("div", Le, [t("span", Ue, o(e.customerName), 1), t("span", He, o(e.transactionDate), 1), t("span", ze, o(y(e.amount)), 1)]), t("div", qe, [t("button", { onClick: n => St(e), class: "btn btn-sm btn-light-warning" }, " Investigate ", 8, Ve), t("button", { onClick: n => Tt(e), class: "btn btn-sm btn-light-success" }, " Mark Resolved ", 8, Ye)])])])], 2))), 128))])]), t("div", We, [t("div", Ge, [t("div", Je, [s[43] || (s[43] = t("h6", { class: "fw-bold text-gray-800 mb-4" }, "Fraud Detection Summary", -1)), t("div", Ke, [t("div", Qe, [s[39] || (s[39] = t("span", { class: "text-gray-600 fs-7" }, "Active Investigations", -1)), t("span", Xe, o(J.activeInvestigations), 1)]), t("div", Ze, [s[40] || (s[40] = t("span", { class: "text-gray-600 fs-7" }, "Resolved This Month", -1)), t("span", ta, o(J.resolvedThisMonth), 1)]), t("div", sa, [s[41] || (s[41] = t("span", { class: "text-gray-600 fs-7" }, "Potential Loss", -1)), t("span", ea, o(y(J.potentialLoss)), 1)]), t("div", aa, [s[42] || (s[42] = t("span", { class: "text-gray-600 fs-7" }, "Prevention Rate", -1)), t("span", na, o(J.preventionRate) + "%", 1)])])])])])])])) : M("", !0), I.value === "insights" ? (f(), m("div", oa, [t("div", ia, [t("div", ra, [t("div", la, [t("div", ca, [s[44] || (s[44] = O('<div class="d-flex align-items-center mb-4" data-v-e42e063f><i class="ki-duotone ki-chart-pie-4 fs-2 text-primary me-3" data-v-e42e063f><span class="path1" data-v-e42e063f></span><span class="path2" data-v-e42e063f></span><span class="path3" data-v-e42e063f></span></i><h6 class="fw-bold text-primary mb-0" data-v-e42e063f>Payment Behavior Analysis</h6></div>', 1)), (f(!0), m(R, null, B(b.paymentBehavior, e => (f(), m("div", { key: e.id, class: "mb-3" }, [t("div", da, [t("span", ua, o(e.metric), 1), t("span", pa, o(e.value), 1)]), t("div", ma, [t("div", { class: "progress-bar bg-primary", style: at(`width: ${e.percentage}%`) }, null, 4)])]))), 128))])])]), t("div", fa, [t("div", ga, [t("div", ha, [s[45] || (s[45] = O('<div class="d-flex align-items-center mb-4" data-v-e42e063f><i class="ki-duotone ki-graph-up fs-2 text-success me-3" data-v-e42e063f><span class="path1" data-v-e42e063f></span><span class="path2" data-v-e42e063f></span><span class="path3" data-v-e42e063f></span><span class="path4" data-v-e42e063f></span><span class="path5" data-v-e42e063f></span><span class="path6" data-v-e42e063f></span></i><h6 class="fw-bold text-success mb-0" data-v-e42e063f>Collection Recommendations</h6></div>', 1)), (f(!0), m(R, null, B(b.recommendations, e => (f(), m("div", { key: e.id, class: "mb-3" }, [t("div", ya, [t("span", { class: C(`badge ${ot(e.priority)} me-2 mt-1`) }, o(e.priority), 3), t("div", null, [t("div", va, o(e.action), 1), t("div", _a, o(e.reason), 1)])])]))), 128))])])]), t("div", ba, [t("div", xa, [t("div", wa, [s[47] || (s[47] = O('<div class="d-flex align-items-center mb-4" data-v-e42e063f><i class="ki-duotone ki-information-5 fs-2 text-warning me-3" data-v-e42e063f><span class="path1" data-v-e42e063f></span><span class="path2" data-v-e42e063f></span><span class="path3" data-v-e42e063f></span></i><h6 class="fw-bold text-warning mb-0" data-v-e42e063f>Risk Predictions &amp; Trends</h6></div>', 1)), t("div", Da, [(f(!0), m(R, null, B(b.predictions, e => (f(), m("div", { key: e.id, class: "col-12 col-md-6 col-lg-4" }, [t("div", Ca, [t("span", ka, o(e.value), 1), t("span", Sa, o(e.metric), 1), t("div", { class: C(["d-flex align-items-center mt-1", e.trend === "up" ? "text-danger" : "text-success"]) }, [t("i", { class: C(`ki-duotone ki-arrow-${e.trend} fs-6 me-1`) }, s[46] || (s[46] = [t("span", { class: "path1" }, null, -1), t("span", { class: "path2" }, null, -1)]), 2), t("span", Ta, o(e.change), 1)], 2)])]))), 128))])])])])])])) : M("", !0)])]), q.value ? (f(), m("div", Pa, s[48] || (s[48] = [t("div", { class: "d-flex flex-column align-items-center" }, [t("div", { class: "spinner-border text-primary", style: { width: "3rem", height: "3rem" } }), t("span", { class: "text-gray-600 fw-semibold mt-3" }, "Analyzing payment status...")], -1)]))) : M("", !0)]))
  }
}, $a = Ft(Ia, [["__scopeId", "data-v-e42e063f"]]); export { $a as default };
