import{_ as rs,r as f,a as R,c as J,o as is,b as n,d as s,e as h,g as ds,t as o,f as O,F as N,h as M,n as F,x as X,w as x,m as Z,v as T,S as V,i as r,j as ss}from"./index-BJk99QVQ.js";const cs={class:"d-flex flex-column gap-5 p-4"},us={class:"card card-flush bg-light-primary"},ps={class:"card-body p-6"},vs={class:"d-flex align-items-center justify-content-between mb-3"},hs={class:"d-flex align-items-center gap-3"},fs={class:"text-gray-600 fs-6"},gs={class:"d-flex gap-2"},ms={key:0,class:"d-flex gap-2 flex-wrap"},bs=["onClick"],ws={key:0,class:"card card-flush"},ys={class:"card-header"},xs={class:"card-toolbar"},_s={class:"badge badge-light-success fs-7"},Cs={class:"card-body p-6"},Ss={class:"row g-4"},ks={class:"col-6 col-md-3"},Ds={class:"bg-light-info rounded p-4 text-center"},Is={class:"fw-bold text-dark fs-4"},Os={class:"col-6 col-md-3"},Fs={class:"bg-light-success rounded p-4 text-center"},Ts={class:"fw-bold text-dark fs-4"},Vs={class:"col-6 col-md-3"},Bs={class:"bg-light-warning rounded p-4 text-center"},Es={class:"fw-bold text-dark fs-4"},$s={class:"col-6 col-md-3"},As={class:"fw-bold text-dark fs-4"},Us={class:"d-flex gap-3 flex-wrap"},Ns={class:"row g-5"},Ms={class:"col-12 col-md-6"},Ps={class:"card card-flush h-100"},Rs={class:"card-body"},qs={class:"chart-container"},Ls={class:"text-gray-700 fw-semibold"},js={class:"d-flex align-items-center gap-2"},Gs={class:"progress",style:{width:"100px",height:"8px"}},Js={class:"badge badge-light-primary fs-8"},Xs={class:"col-12 col-md-6"},Hs={class:"card card-flush h-100"},zs={class:"card-body"},Ks={class:"chart-container"},Ws={class:"text-gray-700 fw-semibold"},Qs={class:"d-flex align-items-center gap-2"},Ys={class:"progress",style:{width:"100px",height:"8px"}},Zs={class:"badge badge-light-success fs-8"},st={class:"row g-5"},tt={class:"col-6 col-md-3"},et={class:"card card-flush bg-light-success"},at={class:"card-body text-center p-6"},ot={class:"fw-bold text-dark fs-3"},lt={class:"col-6 col-md-3"},nt={class:"card card-flush bg-light-warning"},rt={class:"card-body text-center p-6"},it={class:"fw-bold text-dark fs-3"},dt={class:"col-6 col-md-3"},ct={class:"card card-flush bg-light-info"},ut={class:"card-body text-center p-6"},pt={class:"fw-bold text-dark fs-3"},vt={class:"col-6 col-md-3"},ht={class:"card card-flush bg-light-primary"},ft={class:"card-body text-center p-6"},gt={class:"fw-bold text-dark fs-3"},mt={class:"card card-flush"},bt={class:"card-header"},wt={class:"card-toolbar"},yt={class:"badge badge-light-primary"},xt={class:"card-body p-0"},_t={class:"table-responsive"},Ct={class:"table align-middle table-row-dashed fs-6 gy-4"},St={class:"text-gray-600 fw-semibold"},kt={class:"badge badge-light-info"},Dt={key:0},It={key:1,class:"modal fade show d-block",tabindex:"-1"},Ot={class:"modal-dialog modal-dialog-centered"},Ft={class:"modal-content"},Tt={class:"modal-header"},Vt={class:"modal-body"},Bt={class:"row g-5"},Et={class:"col-12"},$t=["value"],At={key:0,class:"text-danger fs-7 mt-1"},Ut={class:"col-12"},Nt={class:"col-12"},Mt={key:0,class:"text-danger fs-7 mt-1"},Pt={class:"col-12"},Rt={class:"modal-footer"},qt=["disabled"],Lt={key:0,class:"spinner-border spinner-border-sm me-2"},jt={key:2,class:"modal fade show d-block",tabindex:"-1"},Gt={class:"modal-dialog modal-dialog-centered"},Jt={class:"modal-content"},Xt={class:"modal-header"},Ht={class:"modal-body"},zt={class:"bg-light-warning rounded p-4 mb-5"},Kt={class:"d-flex align-items-center gap-3"},Wt={class:"fw-bold text-dark"},Qt={class:"row g-5"},Yt={class:"col-12"},Zt={class:"col-12"},se={class:"modal-footer"},te=["disabled"],ee={key:0,class:"spinner-border spinner-border-sm me-2"},ae={key:3,class:"modal fade show d-block",tabindex:"-1"},oe={class:"modal-dialog modal-dialog-centered"},le={class:"modal-content"},ne={class:"modal-header"},re={class:"modal-title fw-bold"},ie={class:"modal-body"},de={class:"row g-5"},ce={class:"col-12"},ue={class:"col-12"},pe=["placeholder"],ve={class:"col-12"},he={class:"modal-footer"},fe=["disabled"],ge={key:0,class:"spinner-border spinner-border-sm me-2"},me={key:4,class:"overlay"},be="https://backend.cloudfuelstationmis.com/api/records/v1",we={__name:"CashOps",setup(ye){const ts=localStorage.getItem("kigrama_auth_token")||"demo_token",q=(()=>{try{const a=localStorage.getItem("kigrama_user_data");return a?JSON.parse(a):null}catch{return null}})(),B=(q==null?void 0:q.user)||{id:1,name:"Demo User"},p=f(!1),i=f(null),g=f([]),C=f([]),w=f(null);f("current");const E=f(!1),$=f(!1),A=f(!1),S=f("sale"),k=f({todaysCash:0,weeklyVariance:0,avgClosingTime:"00:00",totalDrawers:0}),U=f({dailyVariances:[],cashTrends:[],closureTimes:[]}),d=R({stationId:"",shiftType:"Morning",openingBalance:"0.00",notes:""}),_=R({actualCash:"0.00",notes:""}),m=R({amount:"0.00",description:"",reference:""}),y=R({openDrawer:{},closeDrawer:{},cashOperation:{}}),H=J(()=>{if(!i.value)return"0.00";const a=parseFloat(i.value.ExpectedCash||0);return(parseFloat(i.value.ActualCash||0)-a).toFixed(2)}),z=J(()=>{const a=parseFloat(H.value);return a===0?"success":Math.abs(a)<=50?"warning":"danger"}),L=J(()=>i.value&&i.value.Status==="Open"),D=async(a,t={})=>{try{const l=await fetch(`${be}${a}`,{headers:{Authorization:`Bearer ${ts}`,"Content-Type":"application/json",...t.headers},...t});if(!l.ok)throw new Error(`API Error: ${l.status}`);return await l.json()}catch(l){throw console.error("API Call Error:",l),l}},es=async()=>{try{p.value=!0;const l=((await D(`/UserStations?UserID=${B.id}`)).records||[]).map(async c=>({...await D(`/Stations/${c.StationID}`),userStation:c}));C.value=await Promise.all(l),C.value.length>0&&!w.value&&(w.value=C.value[0],d.stationId=C.value[0].StationID,await P())}catch(a){console.error("Error fetching user stations:",a),await V.fire({title:"Error!",text:"Could not load your assigned stations",icon:"error",confirmButtonColor:"#f1416c"})}finally{p.value=!1}},P=async()=>{if(w.value)try{const t=(await D(`/CashDrawers?StationID=${w.value.StationID}&Status=Open&AttendantID=${B.id}`)).records||[];i.value=t.length>0?t[0]:null}catch(a){console.error("Error fetching current drawer:",a)}},j=async()=>{if(w.value)try{const a=await D(`/CashDrawers?StationID=${w.value.StationID}&AttendantID=${B.id}&limit=20&sort=-CreatedAt`);g.value=a.records||[],as()}catch(a){console.error("Error fetching drawer history:",a)}},as=()=>{if(g.value.length===0)return;const a=new Date().toISOString().split("T")[0],t=new Date(Date.now()-7*24*60*60*1e3).toISOString().split("T")[0],l=g.value.filter(u=>u.ShiftDate===a);k.value.todaysCash=l.reduce((u,b)=>u+parseFloat(b.CashSales||0),0);const c=g.value.filter(u=>u.ShiftDate>=t),e=c.reduce((u,b)=>u+Math.abs(parseFloat(b.Variance||0)),0);k.value.weeklyVariance=c.length>0?e/c.length:0,k.value.totalDrawers=g.value.length,os()},os=()=>{const a=[];for(let l=6;l>=0;l--){const c=new Date(Date.now()-l*24*60*60*1e3),e=c.toISOString().split("T")[0],u=g.value.filter(I=>I.ShiftDate===e),b=u.length>0?u.reduce((I,G)=>I+Math.abs(parseFloat(G.Variance||0)),0)/u.length:0;a.push({date:c.toLocaleDateString("en-US",{weekday:"short"}),variance:b.toFixed(2)})}U.value.dailyVariances=a;const t=[];for(let l=6;l>=0;l--){const c=new Date(Date.now()-l*24*60*60*1e3),e=c.toISOString().split("T")[0],b=g.value.filter(I=>I.ShiftDate===e).reduce((I,G)=>I+parseFloat(G.CashSales||0),0);t.push({date:c.toLocaleDateString("en-US",{weekday:"short"}),amount:b.toFixed(0)})}U.value.cashTrends=t},ls=()=>(y.openDrawer={},d.stationId||(y.openDrawer.stationId="Station is required"),d.shiftType||(y.openDrawer.shiftType="Shift type is required"),(!d.openingBalance||parseFloat(d.openingBalance)<0)&&(y.openDrawer.openingBalance="Valid opening balance is required"),Object.keys(y.openDrawer).length===0),K=async()=>{if(ls())try{p.value=!0;const a={StationID:parseInt(d.stationId),ShiftDate:new Date().toISOString().split("T")[0],ShiftType:d.shiftType,AttendantID:B.id,OpeningBalance:d.openingBalance,ClosingBalance:"0.00",ExpectedCash:d.openingBalance,ActualCash:"0.00",Variance:"0.00",CashSales:"0.00",CashPayouts:"0.00",Status:"Open",OpenedBy:B.id,Notes:d.notes||null};await D("/CashDrawers",{method:"POST",body:JSON.stringify(a)}),await V.fire({title:"Drawer Opened!",text:`${d.shiftType} shift started successfully`,icon:"success",toast:!0,position:"top-end",timer:3e3,showConfirmButton:!1}),E.value=!1,await P(),await j()}catch(a){console.error("Error opening drawer:",a),await V.fire({title:"Error!",text:"Could not open cash drawer",icon:"error",confirmButtonColor:"#f1416c"})}finally{p.value=!1}},W=async()=>{if(i.value)try{p.value=!0;const a=parseFloat(_.actualCash),t=parseFloat(i.value.ExpectedCash),l=a-t,c={ActualCash:_.actualCash,ClosingBalance:_.actualCash,Variance:l.toFixed(2),Status:"Closed",ClosedBy:B.id,ClosedAt:new Date().toISOString(),Notes:_.notes||null};await D(`/CashDrawers/${i.value.DrawerID}`,{method:"PATCH",body:JSON.stringify(c)});const e=l===0?"Perfect!":Math.abs(l)<=50?"Small variance detected":"Large variance - please review";await V.fire({title:"Drawer Closed!",text:`Shift ended. ${e}`,icon:l===0?"success":Math.abs(l)<=50?"warning":"error",toast:!0,position:"top-end",timer:3e3,showConfirmButton:!1}),$.value=!1,i.value=null,await j()}catch(a){console.error("Error closing drawer:",a),await V.fire({title:"Error!",text:"Could not close cash drawer",icon:"error",confirmButtonColor:"#f1416c"})}finally{p.value=!1}},Q=a=>{S.value=a,A.value=!0},Y=async()=>{if(i.value)try{p.value=!0;const a=parseFloat(m.amount),t=parseFloat(i.value.CashSales||0),l=parseFloat(i.value.CashPayouts||0),c=parseFloat(i.value.ExpectedCash||0);let e={};S.value==="sale"?e={CashSales:(t+a).toFixed(2),ExpectedCash:(c+a).toFixed(2)}:e={CashPayouts:(l+a).toFixed(2),ExpectedCash:(c-a).toFixed(2)},await D(`/CashDrawers/${i.value.DrawerID}`,{method:"PATCH",body:JSON.stringify(e)}),await V.fire({title:"Recorded!",text:`Cash ${S.value} of UGX ${a.toLocaleString()} recorded`,icon:"success",toast:!0,position:"top-end",timer:2e3,showConfirmButton:!1}),A.value=!1,m.amount="0.00",m.description="",m.reference="",await P()}catch(a){console.error("Error recording cash operation:",a),await V.fire({title:"Error!",text:"Could not record cash operation",icon:"error",confirmButtonColor:"#f1416c"})}finally{p.value=!1}},ns=async a=>{w.value=a,d.stationId=a.StationID,await P(),await j()},v=a=>new Intl.NumberFormat("en-UG",{style:"currency",currency:"UGX",minimumFractionDigits:0,maximumFractionDigits:0}).format(parseFloat(a||0));return is(async()=>{await es()}),(a,t)=>{var l,c;return r(),n("div",cs,[s("div",us,[s("div",ps,[s("div",vs,[s("div",hs,[t[20]||(t[20]=ds('<div class="symbol symbol-45px bg-primary" data-v-8c38b9f8><span class="symbol-label" data-v-8c38b9f8><i class="ki-duotone ki-wallet fs-1 text-white" data-v-8c38b9f8><span class="path1" data-v-8c38b9f8></span><span class="path2" data-v-8c38b9f8></span><span class="path3" data-v-8c38b9f8></span></i></span></div>',1)),s("div",null,[t[19]||(t[19]=s("h1",{class:"text-dark fw-bold fs-2 mb-0"},"Cash Drawer",-1)),s("span",fs,o(((l=w.value)==null?void 0:l.StationName)||"Select Station"),1)])]),s("div",gs,[L.value?h("",!0):(r(),n("button",{key:0,onClick:t[0]||(t[0]=e=>E.value=!0),class:"btn btn-light-success btn-sm"},t[21]||(t[21]=[s("i",{class:"ki-duotone ki-plus fs-3"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1),O(" Open Drawer ")]))),L.value?(r(),n("button",{key:1,onClick:t[1]||(t[1]=e=>$.value=!0),class:"btn btn-light-danger btn-sm"},t[22]||(t[22]=[s("i",{class:"ki-duotone ki-cross fs-3"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1),O(" Close Drawer ")]))):h("",!0)])]),C.value.length>1?(r(),n("div",ms,[(r(!0),n(N,null,M(C.value,e=>{var u;return r(),n("button",{key:e.StationID,onClick:b=>ns(e),class:F(["btn btn-sm",((u=w.value)==null?void 0:u.StationID)===e.StationID?"btn-primary":"btn-light-primary"])},o(e.StationName),11,bs)}),128))])):h("",!0)])]),L.value?(r(),n("div",ws,[s("div",ys,[t[23]||(t[23]=s("h3",{class:"card-title fw-bold text-dark"},"Current Shift",-1)),s("div",xs,[s("span",_s,o(i.value.ShiftType)+" - OPEN ",1)])]),s("div",Cs,[s("div",Ss,[s("div",ks,[s("div",Ds,[t[24]||(t[24]=s("i",{class:"ki-duotone ki-chart-line-up fs-2x text-info mb-2"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)),s("div",Is,o(v(i.value.OpeningBalance)),1),t[25]||(t[25]=s("div",{class:"text-gray-600 fs-7"},"Opening",-1))])]),s("div",Os,[s("div",Fs,[t[26]||(t[26]=s("i",{class:"ki-duotone ki-dollar fs-2x text-success mb-2"},[s("span",{class:"path1"}),s("span",{class:"path2"}),s("span",{class:"path3"})],-1)),s("div",Ts,o(v(i.value.CashSales)),1),t[27]||(t[27]=s("div",{class:"text-gray-600 fs-7"},"Sales",-1))])]),s("div",Vs,[s("div",Bs,[t[28]||(t[28]=s("i",{class:"ki-duotone ki-calculator fs-2x text-warning mb-2"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)),s("div",Es,o(v(i.value.ExpectedCash)),1),t[29]||(t[29]=s("div",{class:"text-gray-600 fs-7"},"Expected",-1))])]),s("div",$s,[s("div",{class:F(["rounded","p-4","text-center","bg-light-"+z.value])},[s("i",{class:F(["ki-duotone ki-arrows-circle fs-2x mb-2","text-"+z.value])},t[30]||(t[30]=[s("span",{class:"path1"},null,-1),s("span",{class:"path2"},null,-1)]),2),s("div",As,o(v(H.value)),1),t[31]||(t[31]=s("div",{class:"text-gray-600 fs-7"},"Variance",-1))],2)])]),t[34]||(t[34]=s("div",{class:"separator my-5"},null,-1)),s("div",Us,[s("button",{onClick:t[2]||(t[2]=e=>Q("sale")),class:"btn btn-light-success"},t[32]||(t[32]=[s("i",{class:"ki-duotone ki-plus fs-4"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1),O(" Record Sale ")])),s("button",{onClick:t[3]||(t[3]=e=>Q("payout")),class:"btn btn-light-danger"},t[33]||(t[33]=[s("i",{class:"ki-duotone ki-minus fs-4"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1),O(" Record Payout ")]))])])])):h("",!0),s("div",Ns,[s("div",Ms,[s("div",Ps,[t[35]||(t[35]=s("div",{class:"card-header"},[s("h3",{class:"card-title fw-bold text-dark"},"Daily Variance Trend")],-1)),s("div",Rs,[s("div",qs,[(r(!0),n(N,null,M(U.value.dailyVariances,(e,u)=>(r(),n("div",{key:u,class:"d-flex align-items-center justify-content-between mb-3"},[s("span",Ls,o(e.date),1),s("div",js,[s("div",Gs,[s("div",{class:F(["progress-bar",parseFloat(e.variance)<=50?"bg-success":parseFloat(e.variance)<=100?"bg-warning":"bg-danger"]),style:ss(`width: ${Math.min(parseFloat(e.variance)/200*100,100)}%`)},null,6)]),s("span",Js,o(v(e.variance)),1)])]))),128))])])])]),s("div",Xs,[s("div",Hs,[t[36]||(t[36]=s("div",{class:"card-header"},[s("h3",{class:"card-title fw-bold text-dark"},"Cash Sales Trend")],-1)),s("div",zs,[s("div",Ks,[(r(!0),n(N,null,M(U.value.cashTrends,(e,u)=>(r(),n("div",{key:u,class:"d-flex align-items-center justify-content-between mb-3"},[s("span",Ws,o(e.date),1),s("div",Qs,[s("div",Ys,[s("div",{class:"progress-bar bg-primary",style:ss(`width: ${Math.min(parseFloat(e.amount)/Math.max(...U.value.cashTrends.map(b=>parseFloat(b.amount)))*100,100)}%`)},null,4)]),s("span",Zs,o(v(e.amount)),1)])]))),128))])])])])]),s("div",st,[s("div",tt,[s("div",et,[s("div",at,[t[37]||(t[37]=s("i",{class:"ki-duotone ki-chart-pie-4 fs-2x text-success mb-3"},[s("span",{class:"path1"}),s("span",{class:"path2"}),s("span",{class:"path3"})],-1)),s("div",ot,o(v(k.value.todaysCash)),1),t[38]||(t[38]=s("div",{class:"text-gray-600 fs-7"},"Today's Cash",-1))])])]),s("div",lt,[s("div",nt,[s("div",rt,[t[39]||(t[39]=s("i",{class:"ki-duotone ki-chart-line-down fs-2x text-warning mb-3"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)),s("div",it,o(v(k.value.weeklyVariance)),1),t[40]||(t[40]=s("div",{class:"text-gray-600 fs-7"},"Avg Variance",-1))])])]),s("div",dt,[s("div",ct,[s("div",ut,[t[41]||(t[41]=s("i",{class:"ki-duotone ki-clock fs-2x text-info mb-3"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)),s("div",pt,o(k.value.avgClosingTime),1),t[42]||(t[42]=s("div",{class:"text-gray-600 fs-7"},"Avg Close Time",-1))])])]),s("div",vt,[s("div",ht,[s("div",ft,[t[43]||(t[43]=s("i",{class:"ki-duotone ki-folder fs-2x text-primary mb-3"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)),s("div",gt,o(k.value.totalDrawers),1),t[44]||(t[44]=s("div",{class:"text-gray-600 fs-7"},"Total Shifts",-1))])])])]),s("div",mt,[s("div",bt,[t[45]||(t[45]=s("h3",{class:"card-title fw-bold text-dark"},"Recent Shifts",-1)),s("div",wt,[s("span",yt,o(g.value.length)+" Shifts",1)])]),s("div",xt,[s("div",_t,[s("table",Ct,[t[47]||(t[47]=s("thead",null,[s("tr",{class:"text-start text-gray-400 fw-bold fs-7 text-uppercase gs-0"},[s("th",null,"Date"),s("th",null,"Shift"),s("th",null,"Opening"),s("th",null,"Sales"),s("th",null,"Expected"),s("th",null,"Actual"),s("th",null,"Variance"),s("th",null,"Status")])],-1)),s("tbody",St,[(r(!0),n(N,null,M(g.value.slice(0,10),e=>(r(),n("tr",{key:e.DrawerID},[s("td",null,o(new Date(e.ShiftDate).toLocaleDateString()),1),s("td",null,[s("span",kt,o(e.ShiftType),1)]),s("td",null,o(v(e.OpeningBalance)),1),s("td",null,o(v(e.CashSales)),1),s("td",null,o(v(e.ExpectedCash)),1),s("td",null,o(v(e.ActualCash)),1),s("td",null,[s("span",{class:F(["badge",parseFloat(e.Variance)===0?"badge-light-success":Math.abs(parseFloat(e.Variance))<=50?"badge-light-warning":"badge-light-danger"])},o(v(e.Variance)),3)]),s("td",null,[s("span",{class:F(["badge",e.Status==="Open"?"badge-light-success":"badge-light-primary"])},o(e.Status),3)])]))),128)),g.value.length===0?(r(),n("tr",Dt,t[46]||(t[46]=[s("td",{colspan:"8",class:"text-center py-8"},[s("div",{class:"text-gray-400"},[s("i",{class:"ki-duotone ki-folder-down fs-3x mb-3"},[s("span",{class:"path1"}),s("span",{class:"path2"})]),s("div",null,"No drawer history found")])],-1)]))):h("",!0)])])])])]),E.value?(r(),n("div",It,[s("div",Ot,[s("div",Ft,[s("div",Tt,[t[49]||(t[49]=s("h3",{class:"modal-title fw-bold"},"Open Cash Drawer",-1)),s("button",{onClick:t[4]||(t[4]=e=>E.value=!1),class:"btn btn-icon btn-sm btn-active-light-primary"},t[48]||(t[48]=[s("i",{class:"ki-duotone ki-cross fs-1"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)]))]),s("div",Vt,[s("form",{onSubmit:X(K,["prevent"])},[s("div",Bt,[s("div",Et,[t[50]||(t[50]=s("label",{class:"form-label required"},"Station",-1)),x(s("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>d.stationId=e),class:"form-select form-select-lg"},[(r(!0),n(N,null,M(C.value,e=>(r(),n("option",{key:e.StationID,value:e.StationID},o(e.StationName),9,$t))),128))],512),[[Z,d.stationId]]),y.openDrawer.stationId?(r(),n("div",At,o(y.openDrawer.stationId),1)):h("",!0)]),s("div",Ut,[t[52]||(t[52]=s("label",{class:"form-label required"},"Shift Type",-1)),x(s("select",{"onUpdate:modelValue":t[6]||(t[6]=e=>d.shiftType=e),class:"form-select form-select-lg"},t[51]||(t[51]=[s("option",{value:"Morning"},"Morning Shift",-1),s("option",{value:"Afternoon"},"Afternoon Shift",-1),s("option",{value:"Night"},"Night Shift",-1)]),512),[[Z,d.shiftType]])]),s("div",Nt,[t[53]||(t[53]=s("label",{class:"form-label required"},"Opening Balance (UGX)",-1)),x(s("input",{"onUpdate:modelValue":t[7]||(t[7]=e=>d.openingBalance=e),type:"number",step:"0.01",class:"form-control form-control-lg",placeholder:"0.00"},null,512),[[T,d.openingBalance]]),y.openDrawer.openingBalance?(r(),n("div",Mt,o(y.openDrawer.openingBalance),1)):h("",!0)]),s("div",Pt,[t[54]||(t[54]=s("label",{class:"form-label"},"Notes",-1)),x(s("textarea",{"onUpdate:modelValue":t[8]||(t[8]=e=>d.notes=e),class:"form-control",rows:"3",placeholder:"Optional notes..."},null,512),[[T,d.notes]])])])],32)]),s("div",Rt,[s("button",{onClick:t[9]||(t[9]=e=>E.value=!1),class:"btn btn-light"},"Cancel"),s("button",{onClick:K,disabled:p.value,class:"btn btn-primary"},[p.value?(r(),n("span",Lt)):h("",!0),t[55]||(t[55]=O(" Open Drawer "))],8,qt)])])])])):h("",!0),$.value?(r(),n("div",jt,[s("div",Gt,[s("div",Jt,[s("div",Xt,[t[57]||(t[57]=s("h3",{class:"modal-title fw-bold"},"Close Cash Drawer",-1)),s("button",{onClick:t[10]||(t[10]=e=>$.value=!1),class:"btn btn-icon btn-sm btn-active-light-primary"},t[56]||(t[56]=[s("i",{class:"ki-duotone ki-cross fs-1"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)]))]),s("div",Ht,[s("div",zt,[s("div",Kt,[t[59]||(t[59]=s("i",{class:"ki-duotone ki-information-5 fs-2x text-warning"},[s("span",{class:"path1"}),s("span",{class:"path2"}),s("span",{class:"path3"})],-1)),s("div",null,[s("div",Wt," Expected Cash: "+o(v((c=i.value)==null?void 0:c.ExpectedCash)),1),t[58]||(t[58]=s("div",{class:"text-gray-600 fs-7"}," Count your actual cash and enter the amount below ",-1))])])]),s("form",{onSubmit:X(W,["prevent"])},[s("div",Qt,[s("div",Yt,[t[60]||(t[60]=s("label",{class:"form-label required"},"Actual Cash Count (UGX)",-1)),x(s("input",{"onUpdate:modelValue":t[11]||(t[11]=e=>_.actualCash=e),type:"number",step:"0.01",class:"form-control form-control-lg",placeholder:"0.00"},null,512),[[T,_.actualCash]])]),s("div",Zt,[t[61]||(t[61]=s("label",{class:"form-label"},"Closing Notes",-1)),x(s("textarea",{"onUpdate:modelValue":t[12]||(t[12]=e=>_.notes=e),class:"form-control",rows:"3",placeholder:"Any variance explanations or notes..."},null,512),[[T,_.notes]])])])],32)]),s("div",se,[s("button",{onClick:t[13]||(t[13]=e=>$.value=!1),class:"btn btn-light"},"Cancel"),s("button",{onClick:W,disabled:p.value,class:"btn btn-danger"},[p.value?(r(),n("span",ee)):h("",!0),t[62]||(t[62]=O(" Close Drawer "))],8,te)])])])])):h("",!0),A.value?(r(),n("div",ae,[s("div",oe,[s("div",le,[s("div",ne,[s("h3",re," Record Cash "+o(S.value==="sale"?"Sale":"Payout"),1),s("button",{onClick:t[14]||(t[14]=e=>A.value=!1),class:"btn btn-icon btn-sm btn-active-light-primary"},t[63]||(t[63]=[s("i",{class:"ki-duotone ki-cross fs-1"},[s("span",{class:"path1"}),s("span",{class:"path2"})],-1)]))]),s("div",ie,[s("form",{onSubmit:X(Y,["prevent"])},[s("div",de,[s("div",ce,[t[64]||(t[64]=s("label",{class:"form-label required"},"Amount (UGX)",-1)),x(s("input",{"onUpdate:modelValue":t[15]||(t[15]=e=>m.amount=e),type:"number",step:"0.01",class:"form-control form-control-lg",placeholder:"0.00"},null,512),[[T,m.amount]])]),s("div",ue,[t[65]||(t[65]=s("label",{class:"form-label required"},"Description",-1)),x(s("input",{"onUpdate:modelValue":t[16]||(t[16]=e=>m.description=e),type:"text",class:"form-control form-control-lg",placeholder:S.value==="sale"?"Fuel sale, convenience items, etc.":"Petty cash, refund, etc."},null,8,pe),[[T,m.description]])]),s("div",ve,[t[66]||(t[66]=s("label",{class:"form-label"},"Reference",-1)),x(s("input",{"onUpdate:modelValue":t[17]||(t[17]=e=>m.reference=e),type:"text",class:"form-control form-control-lg",placeholder:"Receipt number, invoice, etc."},null,512),[[T,m.reference]])])])],32)]),s("div",he,[s("button",{onClick:t[18]||(t[18]=e=>A.value=!1),class:"btn btn-light"},"Cancel"),s("button",{onClick:Y,disabled:p.value,class:F(["btn",S.value==="sale"?"btn-success":"btn-danger"])},[p.value?(r(),n("span",ge)):h("",!0),O(" Record "+o(S.value==="sale"?"Sale":"Payout"),1)],10,fe)])])])])):h("",!0),p.value?(r(),n("div",me,t[67]||(t[67]=[s("div",{class:"overlay-wrapper"},[s("div",{class:"spinner-border text-primary",role:"status"},[s("span",{class:"visually-hidden"},"Loading...")])],-1)]))):h("",!0)])}}},Ce=rs(we,[["__scopeId","data-v-8c38b9f8"]]);export{Ce as default};
